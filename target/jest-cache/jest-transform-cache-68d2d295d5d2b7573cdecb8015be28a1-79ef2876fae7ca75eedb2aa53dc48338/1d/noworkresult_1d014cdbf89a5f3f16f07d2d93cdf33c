08b04878dcc921ac67da2c4e69f11560
'use strict';

let MapGenerator = require('./map-generator');
let stringify = require('./stringify');
let warnOnce = require('./warn-once');
let parse = require('./parse');
const Result = require('./result');
class NoWorkResult {
  constructor(processor, css, opts) {
    css = css.toString();
    this.stringified = false;
    this._processor = processor;
    this._css = css;
    this._opts = opts;
    this._map = undefined;
    let root;
    let str = stringify;
    this.result = new Result(this._processor, root, this._opts);
    this.result.css = css;
    let self = this;
    Object.defineProperty(this.result, 'root', {
      get() {
        return self.root;
      }
    });
    let map = new MapGenerator(str, root, this._opts, css);
    if (map.isMap()) {
      let [generatedCSS, generatedMap] = map.generate();
      if (generatedCSS) {
        this.result.css = generatedCSS;
      }
      if (generatedMap) {
        this.result.map = generatedMap;
      }
    } else {
      map.clearAnnotation();
      this.result.css = map.css;
    }
  }
  async() {
    if (this.error) return Promise.reject(this.error);
    return Promise.resolve(this.result);
  }
  catch(onRejected) {
    return this.async().catch(onRejected);
  }
  finally(onFinally) {
    return this.async().then(onFinally, onFinally);
  }
  sync() {
    if (this.error) throw this.error;
    return this.result;
  }
  then(onFulfilled, onRejected) {
    if (process.env.NODE_ENV !== 'production') {
      if (!('from' in this._opts)) {
        warnOnce('Without `from` option PostCSS could generate wrong source map ' + 'and will not find Browserslist config. Set it to CSS file path ' + 'or to `undefined` to prevent this warning.');
      }
    }
    return this.async().then(onFulfilled, onRejected);
  }
  toString() {
    return this._css;
  }
  warnings() {
    return [];
  }
  get content() {
    return this.result.css;
  }
  get css() {
    return this.result.css;
  }
  get map() {
    return this.result.map;
  }
  get messages() {
    return [];
  }
  get opts() {
    return this.result.opts;
  }
  get processor() {
    return this.result.processor;
  }
  get root() {
    if (this._root) {
      return this._root;
    }
    let root;
    let parser = parse;
    try {
      root = parser(this._css, this._opts);
    } catch (error) {
      this.error = error;
    }
    if (this.error) {
      throw this.error;
    } else {
      this._root = root;
      return root;
    }
  }
  get [Symbol.toStringTag]() {
    return 'NoWorkResult';
  }
}
module.exports = NoWorkResult;
NoWorkResult.default = NoWorkResult;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNYXBHZW5lcmF0b3IiLCJyZXF1aXJlIiwic3RyaW5naWZ5Iiwid2Fybk9uY2UiLCJwYXJzZSIsIlJlc3VsdCIsIk5vV29ya1Jlc3VsdCIsImNvbnN0cnVjdG9yIiwicHJvY2Vzc29yIiwiY3NzIiwib3B0cyIsInRvU3RyaW5nIiwic3RyaW5naWZpZWQiLCJfcHJvY2Vzc29yIiwiX2NzcyIsIl9vcHRzIiwiX21hcCIsInVuZGVmaW5lZCIsInJvb3QiLCJzdHIiLCJyZXN1bHQiLCJzZWxmIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJtYXAiLCJpc01hcCIsImdlbmVyYXRlZENTUyIsImdlbmVyYXRlZE1hcCIsImdlbmVyYXRlIiwiY2xlYXJBbm5vdGF0aW9uIiwiYXN5bmMiLCJlcnJvciIsIlByb21pc2UiLCJyZWplY3QiLCJyZXNvbHZlIiwiY2F0Y2giLCJvblJlamVjdGVkIiwiZmluYWxseSIsIm9uRmluYWxseSIsInRoZW4iLCJzeW5jIiwib25GdWxmaWxsZWQiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJ3YXJuaW5ncyIsImNvbnRlbnQiLCJtZXNzYWdlcyIsIl9yb290IiwicGFyc2VyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJtb2R1bGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbIm5vLXdvcmstcmVzdWx0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5sZXQgTWFwR2VuZXJhdG9yID0gcmVxdWlyZSgnLi9tYXAtZ2VuZXJhdG9yJylcbmxldCBzdHJpbmdpZnkgPSByZXF1aXJlKCcuL3N0cmluZ2lmeScpXG5sZXQgd2Fybk9uY2UgPSByZXF1aXJlKCcuL3dhcm4tb25jZScpXG5sZXQgcGFyc2UgPSByZXF1aXJlKCcuL3BhcnNlJylcbmNvbnN0IFJlc3VsdCA9IHJlcXVpcmUoJy4vcmVzdWx0JylcblxuY2xhc3MgTm9Xb3JrUmVzdWx0IHtcbiAgY29uc3RydWN0b3IocHJvY2Vzc29yLCBjc3MsIG9wdHMpIHtcbiAgICBjc3MgPSBjc3MudG9TdHJpbmcoKVxuICAgIHRoaXMuc3RyaW5naWZpZWQgPSBmYWxzZVxuXG4gICAgdGhpcy5fcHJvY2Vzc29yID0gcHJvY2Vzc29yXG4gICAgdGhpcy5fY3NzID0gY3NzXG4gICAgdGhpcy5fb3B0cyA9IG9wdHNcbiAgICB0aGlzLl9tYXAgPSB1bmRlZmluZWRcbiAgICBsZXQgcm9vdFxuXG4gICAgbGV0IHN0ciA9IHN0cmluZ2lmeVxuICAgIHRoaXMucmVzdWx0ID0gbmV3IFJlc3VsdCh0aGlzLl9wcm9jZXNzb3IsIHJvb3QsIHRoaXMuX29wdHMpXG4gICAgdGhpcy5yZXN1bHQuY3NzID0gY3NzXG5cbiAgICBsZXQgc2VsZiA9IHRoaXNcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5yZXN1bHQsICdyb290Jywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gc2VsZi5yb290XG4gICAgICB9XG4gICAgfSlcblxuICAgIGxldCBtYXAgPSBuZXcgTWFwR2VuZXJhdG9yKHN0ciwgcm9vdCwgdGhpcy5fb3B0cywgY3NzKVxuICAgIGlmIChtYXAuaXNNYXAoKSkge1xuICAgICAgbGV0IFtnZW5lcmF0ZWRDU1MsIGdlbmVyYXRlZE1hcF0gPSBtYXAuZ2VuZXJhdGUoKVxuICAgICAgaWYgKGdlbmVyYXRlZENTUykge1xuICAgICAgICB0aGlzLnJlc3VsdC5jc3MgPSBnZW5lcmF0ZWRDU1NcbiAgICAgIH1cbiAgICAgIGlmIChnZW5lcmF0ZWRNYXApIHtcbiAgICAgICAgdGhpcy5yZXN1bHQubWFwID0gZ2VuZXJhdGVkTWFwXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hcC5jbGVhckFubm90YXRpb24oKVxuICAgICAgdGhpcy5yZXN1bHQuY3NzID0gbWFwLmNzc1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jKCkge1xuICAgIGlmICh0aGlzLmVycm9yKSByZXR1cm4gUHJvbWlzZS5yZWplY3QodGhpcy5lcnJvcilcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMucmVzdWx0KVxuICB9XG5cbiAgY2F0Y2gob25SZWplY3RlZCkge1xuICAgIHJldHVybiB0aGlzLmFzeW5jKCkuY2F0Y2gob25SZWplY3RlZClcbiAgfVxuXG4gIGZpbmFsbHkob25GaW5hbGx5KSB7XG4gICAgcmV0dXJuIHRoaXMuYXN5bmMoKS50aGVuKG9uRmluYWxseSwgb25GaW5hbGx5KVxuICB9XG5cbiAgc3luYygpIHtcbiAgICBpZiAodGhpcy5lcnJvcikgdGhyb3cgdGhpcy5lcnJvclxuICAgIHJldHVybiB0aGlzLnJlc3VsdFxuICB9XG5cbiAgdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoISgnZnJvbScgaW4gdGhpcy5fb3B0cykpIHtcbiAgICAgICAgd2Fybk9uY2UoXG4gICAgICAgICAgJ1dpdGhvdXQgYGZyb21gIG9wdGlvbiBQb3N0Q1NTIGNvdWxkIGdlbmVyYXRlIHdyb25nIHNvdXJjZSBtYXAgJyArXG4gICAgICAgICAgICAnYW5kIHdpbGwgbm90IGZpbmQgQnJvd3NlcnNsaXN0IGNvbmZpZy4gU2V0IGl0IHRvIENTUyBmaWxlIHBhdGggJyArXG4gICAgICAgICAgICAnb3IgdG8gYHVuZGVmaW5lZGAgdG8gcHJldmVudCB0aGlzIHdhcm5pbmcuJ1xuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuYXN5bmMoKS50aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKVxuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Nzc1xuICB9XG5cbiAgd2FybmluZ3MoKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICBnZXQgY29udGVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXN1bHQuY3NzXG4gIH1cblxuICBnZXQgY3NzKCkge1xuICAgIHJldHVybiB0aGlzLnJlc3VsdC5jc3NcbiAgfVxuXG4gIGdldCBtYXAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzdWx0Lm1hcFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VzKCkge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgZ2V0IG9wdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzdWx0Lm9wdHNcbiAgfVxuXG4gIGdldCBwcm9jZXNzb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzdWx0LnByb2Nlc3NvclxuICB9XG5cbiAgZ2V0IHJvb3QoKSB7XG4gICAgaWYgKHRoaXMuX3Jvb3QpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yb290XG4gICAgfVxuXG4gICAgbGV0IHJvb3RcbiAgICBsZXQgcGFyc2VyID0gcGFyc2VcblxuICAgIHRyeSB7XG4gICAgICByb290ID0gcGFyc2VyKHRoaXMuX2NzcywgdGhpcy5fb3B0cylcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lcnJvciA9IGVycm9yXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZXJyb3IpIHtcbiAgICAgIHRocm93IHRoaXMuZXJyb3JcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcm9vdCA9IHJvb3RcbiAgICAgIHJldHVybiByb290XG4gICAgfVxuICB9XG5cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCkge1xuICAgIHJldHVybiAnTm9Xb3JrUmVzdWx0J1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTm9Xb3JrUmVzdWx0XG5Ob1dvcmtSZXN1bHQuZGVmYXVsdCA9IE5vV29ya1Jlc3VsdFxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaLElBQUlBLFlBQVksR0FBR0MsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQzdDLElBQUlDLFNBQVMsR0FBR0QsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUN0QyxJQUFJRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDckMsSUFBSUcsS0FBSyxHQUFHSCxPQUFPLENBQUMsU0FBUyxD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