0558deb77508f9b57ee9643b80c739be
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Reference = Reference;
var React = _interopRequireWildcard(require("react"));
var _warning = _interopRequireDefault(require("warning"));
var _Manager = require("./Manager");
var _utils = require("./utils");
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}
function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();
  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };
  return cache;
}
function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }
  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      "default": obj
    };
  }
  var cache = _getRequireWildcardCache();
  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }
  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }
  newObj["default"] = obj;
  if (cache) {
    cache.set(obj, newObj);
  }
  return newObj;
}
function Reference(_ref) {
  var children = _ref.children,
    innerRef = _ref.innerRef;
  var setReferenceNode = React.useContext(_Manager.ManagerReferenceNodeSetterContext);
  var refHandler = React.useCallback(function (node) {
    (0, _utils.setRef)(innerRef, node);
    (0, _utils.safeInvoke)(setReferenceNode, node);
  }, [innerRef, setReferenceNode]); // ran on unmount
  // eslint-disable-next-line react-hooks/exhaustive-deps

  React.useEffect(function () {
    return function () {
      return (0, _utils.setRef)(innerRef, null);
    };
  }, []);
  React.useEffect(function () {
    (0, _warning["default"])(Boolean(setReferenceNode), '`Reference` should not be used outside of a `Manager` component.');
  }, [setReferenceNode]);
  return (0, _utils.unwrapArray)(children)({
    ref: refHandler
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlJlZmVyZW5jZSIsIlJlYWN0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJyZXF1aXJlIiwiX3dhcm5pbmciLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX01hbmFnZXIiLCJfdXRpbHMiLCJvYmoiLCJfX2VzTW9kdWxlIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiV2Vha01hcCIsImNhY2hlIiwiaGFzIiwiZ2V0IiwibmV3T2JqIiwiaGFzUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsInNldCIsIl9yZWYiLCJjaGlsZHJlbiIsImlubmVyUmVmIiwic2V0UmVmZXJlbmNlTm9kZSIsInVzZUNvbnRleHQiLCJNYW5hZ2VyUmVmZXJlbmNlTm9kZVNldHRlckNvbnRleHQiLCJyZWZIYW5kbGVyIiwidXNlQ2FsbGJhY2siLCJub2RlIiwic2V0UmVmIiwic2FmZUludm9rZSIsInVzZUVmZmVjdCIsIkJvb2xlYW4iLCJ1bndyYXBBcnJheSIsInJlZiJdLCJzb3VyY2VzIjpbIlJlZmVyZW5jZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuUmVmZXJlbmNlID0gUmVmZXJlbmNlO1xuXG52YXIgUmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKFwicmVhY3RcIikpO1xuXG52YXIgX3dhcm5pbmcgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJ3YXJuaW5nXCIpKTtcblxudmFyIF9NYW5hZ2VyID0gcmVxdWlyZShcIi4vTWFuYWdlclwiKTtcblxudmFyIF91dGlscyA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblxuZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKCkgeyBpZiAodHlwZW9mIFdlYWtNYXAgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIG51bGw7IHZhciBjYWNoZSA9IG5ldyBXZWFrTWFwKCk7IF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSA9IGZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgcmV0dXJuIGNhY2hlOyB9OyByZXR1cm4gY2FjaGU7IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG9iaiAhPT0gXCJmdW5jdGlvblwiKSB7IHJldHVybiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfSB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDogbnVsbDsgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSBuZXdPYmpbXCJkZWZhdWx0XCJdID0gb2JqOyBpZiAoY2FjaGUpIHsgY2FjaGUuc2V0KG9iaiwgbmV3T2JqKTsgfSByZXR1cm4gbmV3T2JqOyB9XG5cbmZ1bmN0aW9uIFJlZmVyZW5jZShfcmVmKSB7XG4gIHZhciBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW4sXG4gICAgICBpbm5lclJlZiA9IF9yZWYuaW5uZXJSZWY7XG4gIHZhciBzZXRSZWZlcmVuY2VOb2RlID0gUmVhY3QudXNlQ29udGV4dChfTWFuYWdlci5NYW5hZ2VyUmVmZXJlbmNlTm9kZVNldHRlckNvbnRleHQpO1xuICB2YXIgcmVmSGFuZGxlciA9IFJlYWN0LnVzZUNhbGxiYWNrKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgKDAsIF91dGlscy5zZXRSZWYpKGlubmVyUmVmLCBub2RlKTtcbiAgICAoMCwgX3V0aWxzLnNhZmVJbnZva2UpKHNldFJlZmVyZW5jZU5vZGUsIG5vZGUpO1xuICB9LCBbaW5uZXJSZWYsIHNldFJlZmVyZW5jZU5vZGVdKTsgLy8gcmFuIG9uIHVubW91bnRcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuXG4gIFJlYWN0LnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAoMCwgX3V0aWxzLnNldFJlZikoaW5uZXJSZWYsIG51bGwpO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAoMCwgX3dhcm5pbmdbXCJkZWZhdWx0XCJdKShCb29sZWFuKHNldFJlZmVyZW5jZU5vZGUpLCAnYFJlZmVyZW5jZWAgc2hvdWxkIG5vdCBiZSB1c2VkIG91dHNpZGUgb2YgYSBgTWFuYWdlcmAgY29tcG9uZW50LicpO1xuICB9LCBbc2V0UmVmZXJlbmNlTm9kZV0pO1xuICByZXR1cm4gKDAsIF91dGlscy51bndyYXBBcnJheSkoY2hpbGRyZW4pKHtcbiAgICByZWY6IHJlZkhhbmRsZXJcbiAgfSk7XG59Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaQSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUMzQ0MsS0FBSyxFQUFFO0FBQ1QsQ0FBQyxDQUFDO0FBQ0ZELE9BQU8sQ0FBQ0UsU0FBUyxHQUFHQSxTQUFTO0FBRTdCLElBQUlDLEtBQUssR0FBR0MsdUJBQXVCLENBQUNDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUVyRCxJQUFJQyxRQUFRLEdBQUdDLHNCQUFzQixDQUFDRixPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFFekQsSUFBSUcsUUFBUSxHQUFHSCxPQUFPLENBQUMsV0FBVyxDQUFDO0FBRW5DLElBQUlJLE1BQU0sR0FBR0osT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUUvQixTQUFTRSxzQkFBc0JBLENBQUNHLEdBQUcsRUFBRTtFQUFFLE9BQU9BLEdBQUcsSUFBSUEsR0FBRyxDQUFDQyxVQUFVLEdBQUdELEdBQUcsR0FBRztJQUFFLFNBQVMsRUFBRUE7RUFBSSxDQUFDO0FBQUU7QUFFaEcsU0FBU0Usd0JBQXdCQSxDQUFBLEVBQUc7RUFBRSxJQUFJLE9BQU9DLE9BQU8sS0FBSyxVQUFVLEVBQUUsT0FBTyxJQUFJO0VBQUUsSUFBSUMsS0FBSyxHQUFHLElBQUlELE9BQU8sQ0FBQyxDQUFDO0VBQUVELHdCQUF3QixHQUFHLFNBQVNBLHdCQUF3QkEsQ0FBQSxFQUFHO0lBQUUsT0FBT0UsS0FBSztFQUFFLENBQUM7RUFBRSxPQUFPQSxLQUFLO0FBQUU7QUFFak4sU0FBU1YsdUJBQXVCQSxDQUFDTSxHQUFHLEVBQUU7RUFBRSxJQUFJQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ0Ms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