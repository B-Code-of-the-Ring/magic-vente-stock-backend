d77d9b426a13b5e8d2acf58e38f62aaf
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _lite = require("dequal/lite");
var _iterationDecorator = _interopRequireDefault(require("./util/iterationDecorator"));
var _rolesMap = _interopRequireDefault(require("./rolesMap"));
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
function _slicedToArray(arr, i) {
  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
}
function _nonIterableRest() {
  throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _iterableToArrayLimit(arr, i) {
  var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"];
  if (_i == null) return;
  var _arr = [];
  var _n = true;
  var _d = false;
  var _s, _e;
  try {
    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {
      _arr.push(_s.value);
      if (i && _arr.length === i) break;
    }
  } catch (err) {
    _d = true;
    _e = err;
  } finally {
    try {
      if (!_n && _i["return"] != null) _i["return"]();
    } finally {
      if (_d) throw _e;
    }
  }
  return _arr;
}
function _arrayWithHoles(arr) {
  if (Array.isArray(arr)) return arr;
}
function _createForOfIteratorHelper(o, allowArrayLike) {
  var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
  if (!it) {
    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
      if (it) o = it;
      var i = 0;
      var F = function F() {};
      return {
        s: F,
        n: function n() {
          if (i >= o.length) return {
            done: true
          };
          return {
            done: false,
            value: o[i++]
          };
        },
        e: function e(_e2) {
          throw _e2;
        },
        f: F
      };
    }
    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  var normalCompletion = true,
    didErr = false,
    err;
  return {
    s: function s() {
      it = it.call(o);
    },
    n: function n() {
      var step = it.next();
      normalCompletion = step.done;
      return step;
    },
    e: function e(_e3) {
      didErr = true;
      err = _e3;
    },
    f: function f() {
      try {
        if (!normalCompletion && it.return != null) it.return();
      } finally {
        if (didErr) throw err;
      }
    }
  };
}
function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;
  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }
  return arr2;
}
var elementRoles = [];
var keys = _rolesMap.default.keys();
for (var i = 0; i < keys.length; i++) {
  var key = keys[i];
  var role = _rolesMap.default.get(key);
  if (role) {
    var concepts = [].concat(role.baseConcepts, role.relatedConcepts);
    for (var k = 0; k < concepts.length; k++) {
      var relation = concepts[k];
      if (relation.module === 'HTML') {
        (function () {
          var concept = relation.concept;
          if (concept) {
            var elementRoleRelation = elementRoles.find(function (relation) {
              return (0, _lite.dequal)(relation, concept);
            });
            var roles;
            if (elementRoleRelation) {
              roles = elementRoleRelation[1];
            } else {
              roles = [];
            }
            var isUnique = true;
            for (var _i = 0; _i < roles.length; _i++) {
              if (roles[_i] === key) {
                isUnique = false;
                break;
              }
            }
            if (isUnique) {
              roles.push(key);
            }
            elementRoles.push([concept, roles]);
          }
        })();
      }
    }
  }
}
var elementRoleMap = {
  entries: function entries() {
    return elementRoles;
  },
  forEach: function forEach(fn) {
    var thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    var _iterator = _createForOfIteratorHelper(elementRoles),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var _step$value = _slicedToArray(_step.value, 2),
          _key = _step$value[0],
          values = _step$value[1];
        fn.call(thisArg, values, _key, elementRoles);
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  },
  get: function get(key) {
    var item = elementRoles.find(function (tuple) {
      return key.name === tuple[0].name && (0, _lite.dequal)(key.attributes, tuple[0].attributes);
    });
    return item && item[1];
  },
  has: function has(key) {
    return !!elementRoleMap.get(key);
  },
  keys: function keys() {
    return elementRoles.map(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 1),
        key = _ref2[0];
      return key;
    });
  },
  values: function values() {
    return elementRoles.map(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
        values = _ref4[1];
      return values;
    });
  }
};
var _default = (0, _iterationDecorator.default)(elementRoleMap, elementRoleMap.entries());
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJfbGl0ZSIsInJlcXVpcmUiLCJfaXRlcmF0aW9uRGVjb3JhdG9yIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9yb2xlc01hcCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJfc2xpY2VkVG9BcnJheSIsImFyciIsImkiLCJfYXJyYXlXaXRoSG9sZXMiLCJfaXRlcmFibGVUb0FycmF5TGltaXQiLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJfbm9uSXRlcmFibGVSZXN0IiwiVHlwZUVycm9yIiwiX2kiLCJTeW1ib2wiLCJpdGVyYXRvciIsIl9hcnIiLCJfbiIsIl9kIiwiX3MiLCJfZSIsImNhbGwiLCJuZXh0IiwiZG9uZSIsInB1c2giLCJsZW5ndGgiLCJlcnIiLCJBcnJheSIsImlzQXJyYXkiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsIm8iLCJhbGxvd0FycmF5TGlrZSIsIml0IiwiRiIsInMiLCJuIiwiZSIsIl9lMiIsImYiLCJub3JtYWxDb21wbGV0aW9uIiwiZGlkRXJyIiwic3RlcCIsIl9lMyIsInJldHVybiIsIm1pbkxlbiIsIl9hcnJheUxpa2VUb0FycmF5IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJzbGljZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsImZyb20iLCJ0ZXN0IiwibGVuIiwiYXJyMiIsImVsZW1lbnRSb2xlcyIsImtleXMiLCJrZXkiLCJyb2xlIiwiZ2V0IiwiY29uY2VwdHMiLCJjb25jYXQiLCJiYXNlQ29uY2VwdHMiLCJyZWxhdGVkQ29uY2VwdHMiLCJrIiwicmVsYXRpb24iLCJtb2R1bGUiLCJjb25jZXB0IiwiZWxlbWVudFJvbGVSZWxhdGlvbiIsImZpbmQiLCJkZXF1YWwiLCJyb2xlcyIsImlzVW5pcXVlIiwiZWxlbWVudFJvbGVNYXAiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImZuIiwidGhpc0FyZyIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsIl9pdGVyYXRvciIsIl9zdGVwIiwiX3N0ZXAkdmFsdWUiLCJfa2V5IiwidmFsdWVzIiwiaXRlbSIsInR1cGxlIiwiYXR0cmlidXRlcyIsImhhcyIsIm1hcCIsIl9yZWYiLCJfcmVmMiIsIl9yZWYzIiwiX3JlZjQiLCJfZGVmYXVsdCJdLCJzb3VyY2VzIjpbImVsZW1lbnRSb2xlTWFwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xudmFyIF9saXRlID0gcmVxdWlyZShcImRlcXVhbC9saXRlXCIpO1xudmFyIF9pdGVyYXRpb25EZWNvcmF0b3IgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3V0aWwvaXRlcmF0aW9uRGVjb3JhdG9yXCIpKTtcbnZhciBfcm9sZXNNYXAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3JvbGVzTWFwXCIpKTtcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyB2YXIgX2kgPSBhcnIgPT0gbnVsbCA/IG51bGwgOiB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIGFycltTeW1ib2wuaXRlcmF0b3JdIHx8IGFycltcIkBAaXRlcmF0b3JcIl07IGlmIChfaSA9PSBudWxsKSByZXR1cm47IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX3MsIF9lOyB0cnkgeyBmb3IgKF9pID0gX2kuY2FsbChhcnIpOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH1cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfVxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1tcIkBAaXRlcmF0b3JcIl07IGlmICghaXQpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgdGhyb3cgX2UyOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UzKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMzsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0LnJldHVybiAhPSBudWxsKSBpdC5yZXR1cm4oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cbnZhciBlbGVtZW50Um9sZXMgPSBbXTtcbnZhciBrZXlzID0gX3JvbGVzTWFwLmRlZmF1bHQua2V5cygpO1xuZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gIHZhciBrZXkgPSBrZXlzW2ldO1xuICB2YXIgcm9sZSA9IF9yb2xlc01hcC5kZWZhdWx0LmdldChrZXkpO1xuICBpZiAocm9sZSkge1xuICAgIHZhciBjb25jZXB0cyA9IFtdLmNvbmNhdChyb2xlLmJhc2VDb25jZXB0cywgcm9sZS5yZWxhdGVkQ29uY2VwdHMpO1xuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY29uY2VwdHMubGVuZ3RoOyBrKyspIHtcbiAgICAgIHZhciByZWxhdGlvbiA9IGNvbmNlcHRzW2tdO1xuICAgICAgaWYgKHJlbGF0aW9uLm1vZHVsZSA9PT0gJ0hUTUwnKSB7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGNvbmNlcHQgPSByZWxhdGlvbi5jb25jZXB0O1xuICAgICAgICAgIGlmIChjb25jZXB0KSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudFJvbGVSZWxhdGlvbiA9IGVsZW1lbnRSb2xlcy5maW5kKGZ1bmN0aW9uIChyZWxhdGlvbikge1xuICAgICAgICAgICAgICByZXR1cm4gKDAsIF9saXRlLmRlcXVhbCkocmVsYXRpb24sIGNvbmNlcHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgcm9sZXM7XG4gICAgICAgICAgICBpZiAoZWxlbWVudFJvbGVSZWxhdGlvbikge1xuICAgICAgICAgICAgICByb2xlcyA9IGVsZW1lbnRSb2xlUmVsYXRpb25bMV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByb2xlcyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlzVW5pcXVlID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCByb2xlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgaWYgKHJvbGVzW19pXSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgaXNVbmlxdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzVW5pcXVlKSB7XG4gICAgICAgICAgICAgIHJvbGVzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsZW1lbnRSb2xlcy5wdXNoKFtjb25jZXB0LCByb2xlc10pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbnZhciBlbGVtZW50Um9sZU1hcCA9IHtcbiAgZW50cmllczogZnVuY3Rpb24gZW50cmllcygpIHtcbiAgICByZXR1cm4gZWxlbWVudFJvbGVzO1xuICB9LFxuICBmb3JFYWNoOiBmdW5jdGlvbiBmb3JFYWNoKGZuKSB7XG4gICAgdmFyIHRoaXNBcmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG51bGw7XG4gICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGVsZW1lbnRSb2xlcyksXG4gICAgICBfc3RlcDtcbiAgICB0cnkge1xuICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIF9zdGVwJHZhbHVlID0gX3NsaWNlZFRvQXJyYXkoX3N0ZXAudmFsdWUsIDIpLFxuICAgICAgICAgIF9rZXkgPSBfc3RlcCR2YWx1ZVswXSxcbiAgICAgICAgICB2YWx1ZXMgPSBfc3RlcCR2YWx1ZVsxXTtcbiAgICAgICAgZm4uY2FsbCh0aGlzQXJnLCB2YWx1ZXMsIF9rZXksIGVsZW1lbnRSb2xlcyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBfaXRlcmF0b3IuZShlcnIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBfaXRlcmF0b3IuZigpO1xuICAgIH1cbiAgfSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gICAgdmFyIGl0ZW0gPSBlbGVtZW50Um9sZXMuZmluZChmdW5jdGlvbiAodHVwbGUpIHtcbiAgICAgIHJldHVybiBrZXkubmFtZSA9PT0gdHVwbGVbMF0ubmFtZSAmJiAoMCwgX2xpdGUuZGVxdWFsKShrZXkuYXR0cmlidXRlcywgdHVwbGVbMF0uYXR0cmlidXRlcyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGl0ZW0gJiYgaXRlbVsxXTtcbiAgfSxcbiAgaGFzOiBmdW5jdGlvbiBoYXMoa2V5KSB7XG4gICAgcmV0dXJuICEhZWxlbWVudFJvbGVNYXAuZ2V0KGtleSk7XG4gIH0sXG4gIGtleXM6IGZ1bmN0aW9uIGtleXMoKSB7XG4gICAgcmV0dXJuIGVsZW1lbnRSb2xlcy5tYXAoZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDEpLFxuICAgICAgICBrZXkgPSBfcmVmMlswXTtcbiAgICAgIHJldHVybiBrZXk7XG4gICAgfSk7XG4gIH0sXG4gIHZhbHVlczogZnVuY3Rpb24gdmFsdWVzKCkge1xuICAgIHJldHVybiBlbGVtZW50Um9sZXMubWFwKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgdmFyIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDIpLFxuICAgICAgICB2YWx1ZXMgPSBfcmVmNFsxXTtcbiAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfSk7XG4gIH1cbn07XG52YXIgX2RlZmF1bHQgPSAoMCwgX2l0ZXJhdGlvbkRlY29yYXRvci5kZWZhdWx0KShlbGVtZW50Um9sZU1hcCwgZWxlbWVudFJvbGVNYXAuZW50cmllcygpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWkEsTUFBTSxDQUFDQyxjQUFjLENBQUNDLE9BQU8sRUFBRSxZQUFZLEVBQUU7RUFDM0NDLEtBQUssRUFBRTtBQUNULENBQUMsQ0FBQztBQUNGRCxPQUFPLENBQUNFLE9BQU8sR0FBRyxLQUFLLENBQUM7QUFDeEIsSUFBSUMsS0FBSyxHQUFHQyxPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ2xDLElBQUlDLG1CQUFtQixHQUFHQyxzQkFBc0IsQ0FBQ0YsT0FBTyxDQUFDLDJCQUEyQixDQUFDLENBQUM7QUFDdEYsSUFBSUcsU0FBUyxHQUFHRCxzQkFBc0IsQ0FBQ0YsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO0FBQzdELFNBQVNFLHNCQUFzQkEsQ0FBQ0UsR0FBRyxFQUFFO0VBQUUsT0FBT0EsR0FBRyxJQUFJQSxHQUFHLENBQUNDLFVBQVUsR0FBR0QsR0FBRyxHQUFHO0lBQUVOLE9BQU8sRUFBRU07RUFBSSxDQUFDO0FBQUU7QUFDOUYsU0FBU0UsY0FBY0EsQ0FBQ0MsR0FBRyxFQUFFQyxD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