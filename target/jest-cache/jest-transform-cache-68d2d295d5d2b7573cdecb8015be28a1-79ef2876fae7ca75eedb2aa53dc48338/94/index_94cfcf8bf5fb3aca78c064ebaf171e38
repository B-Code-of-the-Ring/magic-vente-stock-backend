f1e00dbcd51b8bc4076e49edb97c3ccd
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = highlight;
exports.shouldHighlight = shouldHighlight;
var _jsTokens = require("js-tokens");
var _helperValidatorIdentifier = require("@babel/helper-validator-identifier");
var _picocolors = _interopRequireWildcard(require("picocolors"), true);
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function (e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != typeof e && "function" != typeof e) return {
    default: e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n.default = e, t && t.set(e, n), n;
}
const colors = typeof process === "object" && (process.env.FORCE_COLOR === "0" || process.env.FORCE_COLOR === "false") ? (0, _picocolors.createColors)(false) : _picocolors.default;
const compose = (f, g) => v => f(g(v));
const sometimesKeywords = new Set(["as", "async", "from", "get", "of", "set"]);
function getDefs(colors) {
  return {
    keyword: colors.cyan,
    capitalized: colors.yellow,
    jsxIdentifier: colors.yellow,
    punctuator: colors.yellow,
    number: colors.magenta,
    string: colors.green,
    regex: colors.magenta,
    comment: colors.gray,
    invalid: compose(compose(colors.white, colors.bgRed), colors.bold)
  };
}
const NEWLINE = /\r\n|[\n\r\u2028\u2029]/;
const BRACKET = /^[()[\]{}]$/;
let tokenize;
{
  const JSX_TAG = /^[a-z][\w-]*$/i;
  const getTokenType = function (token, offset, text) {
    if (token.type === "name") {
      if ((0, _helperValidatorIdentifier.isKeyword)(token.value) || (0, _helperValidatorIdentifier.isStrictReservedWord)(token.value, true) || sometimesKeywords.has(token.value)) {
        return "keyword";
      }
      if (JSX_TAG.test(token.value) && (text[offset - 1] === "<" || text.slice(offset - 2, offset) === "</")) {
        return "jsxIdentifier";
      }
      if (token.value[0] !== token.value[0].toLowerCase()) {
        return "capitalized";
      }
    }
    if (token.type === "punctuator" && BRACKET.test(token.value)) {
      return "bracket";
    }
    if (token.type === "invalid" && (token.value === "@" || token.value === "#")) {
      return "punctuator";
    }
    return token.type;
  };
  tokenize = function* (text) {
    let match;
    while (match = _jsTokens.default.exec(text)) {
      const token = _jsTokens.matchToToken(match);
      yield {
        type: getTokenType(token, match.index, text),
        value: token.value
      };
    }
  };
}
function highlightTokens(defs, text) {
  let highlighted = "";
  for (const {
    type,
    value
  } of tokenize(text)) {
    const colorize = defs[type];
    if (colorize) {
      highlighted += value.split(NEWLINE).map(str => colorize(str)).join("\n");
    } else {
      highlighted += value;
    }
  }
  return highlighted;
}
function shouldHighlight(options) {
  return colors.isColorSupported || options.forceColor;
}
let pcWithForcedColor = undefined;
function getColors(forceColor) {
  if (forceColor) {
    var _pcWithForcedColor;
    (_pcWithForcedColor = pcWithForcedColor) != null ? _pcWithForcedColor : pcWithForcedColor = (0, _picocolors.createColors)(true);
    return pcWithForcedColor;
  }
  return colors;
}
function highlight(code, options = {}) {
  if (code !== "" && shouldHighlight(options)) {
    const defs = getDefs(getColors(options.forceColor));
    return highlightTokens(defs, code);
  } else {
    return code;
  }
}
{
  let chalk, chalkWithForcedColor;
  exports.getChalk = ({
    forceColor
  }) => {
    var _chalk;
    (_chalk = chalk) != null ? _chalk : chalk = require("chalk");
    if (forceColor) {
      var _chalkWithForcedColor;
      (_chalkWithForcedColor = chalkWithForcedColor) != null ? _chalkWithForcedColor : chalkWithForcedColor = new chalk.constructor({
        enabled: true,
        level: 1
      });
      return chalkWithForcedColor;
    }
    return chalk;
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfanNUb2tlbnMiLCJyZXF1aXJlIiwiX2hlbHBlclZhbGlkYXRvcklkZW50aWZpZXIiLCJfcGljb2NvbG9ycyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiZSIsIldlYWtNYXAiLCJyIiwidCIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0IiwiY29sb3JzIiwicHJvY2VzcyIsImVudiIsIkZPUkNFX0NPTE9SIiwiY3JlYXRlQ29sb3JzIiwiY29tcG9zZSIsImYiLCJnIiwidiIsInNvbWV0aW1lc0tleXdvcmRzIiwiU2V0IiwiZ2V0RGVmcyIsImtleXdvcmQiLCJjeWFuIiwiY2FwaXRhbGl6ZWQiLCJ5ZWxsb3ciLCJqc3hJZGVudGlmaWVyIiwicHVuY3R1YXRvciIsIm51bWJlciIsIm1hZ2VudGEiLCJzdHJpbmciLCJncmVlbiIsInJlZ2V4IiwiY29tbWVudCIsImdyYXkiLCJpbnZhbGlkIiwid2hpdGUiLCJiZ1JlZCIsImJvbGQiLCJORVdMSU5FIiwiQlJBQ0tFVCIsInRva2VuaXplIiwiSlNYX1RBRyIsImdldFRva2VuVHlwZSIsInRva2VuIiwib2Zmc2V0IiwidGV4dCIsInR5cGUiLCJpc0tleXdvcmQiLCJ2YWx1ZSIsImlzU3RyaWN0UmVzZXJ2ZWRXb3JkIiwidGVzdCIsInNsaWNlIiwidG9Mb3dlckNhc2UiLCJtYXRjaCIsImV4ZWMiLCJtYXRjaFRvVG9rZW4iLCJpbmRleCIsImhpZ2hsaWdodFRva2VucyIsImRlZnMiLCJoaWdobGlnaHRlZCIsImNvbG9yaXplIiwic3BsaXQiLCJtYXAiLCJzdHIiLCJqb2luIiwic2hvdWxkSGlnaGxpZ2h0Iiwib3B0aW9ucyIsImlzQ29sb3JTdXBwb3J0ZWQiLCJmb3JjZUNvbG9yIiwicGNXaXRoRm9yY2VkQ29sb3IiLCJ1bmRlZmluZWQiLCJnZXRDb2xvcnMiLCJfcGNXaXRoRm9yY2VkQ29sb3IiLCJoaWdobGlnaHQiLCJjb2RlIiwiY2hhbGsiLCJjaGFsa1dpdGhGb3JjZWRDb2xvciIsImV4cG9ydHMiLCJnZXRDaGFsayIsIl9jaGFsayIsIl9jaGFsa1dpdGhGb3JjZWRDb2xvciIsImNvbnN0cnVjdG9yIiwiZW5hYmxlZCIsImxldmVsIl0sInNvdXJjZXMiOlsiLi4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVG9rZW4gYXMgSlNUb2tlbiwgSlNYVG9rZW4gfSBmcm9tIFwianMtdG9rZW5zXCI7XG5pbXBvcnQganNUb2tlbnMgZnJvbSBcImpzLXRva2Vuc1wiO1xuXG5pbXBvcnQge1xuICBpc1N0cmljdFJlc2VydmVkV29yZCxcbiAgaXNLZXl3b3JkLFxufSBmcm9tIFwiQGJhYmVsL2hlbHBlci12YWxpZGF0b3ItaWRlbnRpZmllclwiO1xuXG5pbXBvcnQgX2NvbG9ycywgeyBjcmVhdGVDb2xvcnMgfSBmcm9tIFwicGljb2NvbG9yc1wiO1xuaW1wb3J0IHR5cGUgeyBDb2xvcnMsIEZvcm1hdHRlciB9IGZyb20gXCJwaWNvY29sb3JzL3R5cGVzXCI7XG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FsZXhleXJhc3BvcG92L3BpY29jb2xvcnMvaXNzdWVzLzYyXG5jb25zdCBjb2xvcnMgPVxuICB0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJlxuICAocHJvY2Vzcy5lbnYuRk9SQ0VfQ09MT1IgPT09IFwiMFwiIHx8IHByb2Nlc3MuZW52LkZPUkNFX0NPTE9SID09PSBcImZhbHNlXCIpXG4gICAgPyBjcmVhdGVDb2xvcnMoZmFsc2UpXG4gICAgOiBfY29sb3JzO1xuXG5jb25zdCBjb21wb3NlOiA8VCwgVSwgVj4oZjogKGd2OiBVKSA9PiBWLCBnOiAodjogVCkgPT4gVSkgPT4gKHY6IFQpID0+IFYgPVxuICAoZiwgZykgPT4gdiA9PlxuICAgIGYoZyh2KSk7XG5cbi8qKlxuICogTmFtZXMgdGhhdCBhcmUgYWx3YXlzIGFsbG93ZWQgYXMgaWRlbnRpZmllcnMsIGJ1dCBhbHNvIGFwcGVhciBhcyBrZXl3b3Jkc1xuICogd2l0aGluIGNlcnRhaW4gc3ludGFjdGljIHByb2R1Y3Rpb25zLlxuICpcbiAqIGh0dHBzOi8vdGMzOS5lcy9lY21hMjYyLyNzZWMta2V5d29yZHMtYW5kLXJlc2VydmVkLXdvcmRzXG4gKlxuICogYHRhcmdldGAgaGFzIGJlZW4gb21pdHRlZCBzaW5jZSBpdCBpcyB2ZXJ5IGxpa2VseSBnb2luZyB0byBiZSBhIGZhbHNlXG4gKiBwb3NpdGl2ZS5cbiAqL1xuY29uc3Qgc29tZXRpbWVzS2V5d29yZHMgPSBuZXcgU2V0KFtcImFzXCIsIFwiYXN5bmNcIiwgXCJmcm9tXCIsIFwiZ2V0XCIsIFwib2ZcIiwgXCJzZXRcIl0pO1xuXG50eXBlIEludGVybmFsVG9rZW5UeXBlID1cbiAgfCBcImtleXdvcmRcIlxuICB8IFwiY2FwaXRhbGl6ZWRcIlxuICB8IFwianN4SWRlbnRpZmllclwiXG4gIHwgXCJwdW5jdHVhdG9yXCJcbiAgfCBcIm51bWJlclwiXG4gIHwgXCJzdHJpbmdcIlxuICB8IFwicmVnZXhcIlxuICB8IFwiY29tbWVudFwiXG4gIHwgXCJpbnZhbGlkXCI7XG5cbnR5cGUgVG9rZW4gPSB7XG4gIHR5cGU6IEludGVybmFsVG9rZW5UeXBlIHwgXCJ1bmNvbG9yZWRcIjtcbiAgdmFsdWU6IHN0cmluZztcbn07XG4vKipcbiAqIFN0eWxlcyBmb3IgdG9rZW4gdHlwZXMuXG4gKi9cbmZ1bmN0aW9uIGdldERlZnMoY29sb3JzOiBDb2xvcnMpOiBSZWNvcmQ8SW50ZXJuYWxUb2tlblR5cGUsIEZvcm1hdHRlcj4ge1xuICByZXR1cm4ge1xuICAgIGtleXdvcmQ6IGNvbG9ycy5jeWFuLFxuICAgIGNhcGl0YWxpemVkOiBjb2xvcnMueWVsbG93LFxuICAgIGpzeElkZW50aWZpZXI6IGNvbG9ycy55ZWxsb3csXG4gICAgcHVuY3R1YXRvcjogY29sb3JzLnllbGxvdyxcbiAgICBudW1iZXI6IGNvbG9ycy5tYWdlbnRhLFxuICAgIHN0cmluZzogY29sb3JzLmdyZWVuLFxuICAgIHJlZ2V4OiBjb2xvcnMubWFnZW50YSxcbiAgICBjb21tZW50OiBjb2xvcnMuZ3JheSxcbiAgICBpbnZhbGlkOiBjb21wb3NlKGNvbXBvc2UoY29sb3JzLndoaXRlLCBjb2xvcnMuYmdSZWQpLCBjb2xvcnMuYm9sZCksXG4gIH07XG59XG5cbi8qKlxuICogUmVnRXhwIHRvIHRlc3QgZm9yIG5ld2xpbmVzIGluIHRlcm1pbmFsLlxuICovXG5jb25zdCBORVdMSU5FID0gL1xcclxcbnxbXFxuXFxyXFx1MjAyOFxcdTIwMjldLztcblxuLyoqXG4gKiBSZWdFeHAgdG8gdGVzdCBmb3IgdGhlIHRocmVlIHR5cGVzIG9mIGJyYWNrZXRzLlxuICovXG5jb25zdCBCUkFDS0VUID0gL15bKClbXFxde31dJC87XG5cbmxldCB0b2tlbml6ZTogKFxuICB0ZXh0OiBzdHJpbmcsXG4pID0+IEdlbmVyYXRvcjx7IHR5cGU6IEludGVybmFsVG9rZW5UeXBlIHwgXCJ1bmNvbG9yZWRcIjsgdmFsdWU6IHN0cmluZyB9PjtcblxuaWYgKHByb2Nlc3MuZW52LkJBQkVMXzhfQlJFQUtJTkcpIHtcbiAgLyoqXG4gICAqIEdldCB0aGUgdHlwZSBvZiB0b2tlbiwgc3BlY2lmeWluZyBwdW5jdHVhdG9yIHR5cGUuXG4gICAqL1xuICBjb25zdCBnZXRUb2tlblR5cGUgPSBmdW5jdGlvbiAoXG4gICAgdG9rZW46IEpTVG9rZW4gfCBKU1hUb2tlbixcbiAgKTogSW50ZXJuYWxUb2tlblR5cGUgfCBcInVuY29sb3JlZFwiIHtcbiAgICBpZiAodG9rZW4udHlwZSA9PT0gXCJJZGVudGlmaWVyTmFtZVwiKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGlzS2V5d29yZCh0b2tlbi52YWx1ZSkgfHxcbiAgICAgICAgaXNTdHJpY3RSZXNlcnZlZFdvcmQodG9rZW4udmFsdWUsIHRydWUpIHx8XG4gICAgICAgIHNvbWV0aW1lc0tleXdvcmRzLmhhcyh0b2tlbi52YWx1ZSlcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gXCJrZXl3b3JkXCI7XG4gICAgICB9XG5cbiAgICAgIGlmICh0b2tlbi52YWx1ZVswXSAhPT0gdG9rZW4udmFsdWVbMF0udG9Mb3dlckNhc2UoKSkge1xuICAgICAgICByZXR1cm4gXCJjYXBpdGFsaXplZFwiO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0b2tlbi50eXBlID09PSBcIlB1bmN0dWF0b3JcIiAmJiBCUkFDS0VULnRlc3QodG9rZW4udmFsdWUpKSB7XG4gICAgICByZXR1cm4gXCJ1bmNvbG9yZWRcIjtcbiAgICB9XG5cbiAgICBpZiAodG9rZW4udHlwZSA9PT0gXCJJbnZhbGlkXCIgJiYgdG9rZW4udmFsdWUgPT09IFwiQFwiKSB7XG4gICAgICByZXR1cm4gXCJwdW5jdHVhdG9yXCI7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0b2tlbi50eXBlKSB7XG4gICAgICBjYXNlIFwiTnVtZXJpY0xpdGVyYWxcIjpcbiAgICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG5cbiAgICAgIGNhc2UgXCJTdHJpbmdMaXRlcmFsXCI6XG4gICAgICBjYXNlIFwiSlNYU3RyaW5nXCI6XG4gICAgICBjYXNlIFwiTm9TdWJzdGl0dXRpb25UZW1wbGF0ZVwiOlxuICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcblxuICAgICAgY2FzZSBcIlJlZ3VsYXJFeHByZXNzaW9uTGl0ZXJhbFwiOlxuICAgICAgICByZXR1cm4gXCJyZWdleFwiO1xuXG4gICAgICBjYXNlIFwiUHVuY3R1YXRvclwiOlxuICAgICAgY2FzZSBcIkpTWFB1bmN0dWF0b3JcIjpcbiAgICAgICAgcmV0dXJuIFwicHVuY3R1YXRvclwiO1xuXG4gICAgICBjYXNlIFwiTXVsdGlMaW5lQ29tbWVudFwiOlxuICAgICAgY2FzZSBcIlNpbmdsZUxpbmVDb21tZW50XCI6XG4gICAgICAgIHJldHVybiBcImNvbW1lbnRcIjtcblxuICAgICAgY2FzZSBcIkludmFsaWRcIjpcbiAgICAgIGNhc2UgXCJKU1hJbnZhbGlkXCI6XG4gICAgICAgIHJldHVybiBcImludmFsaWRcIjtcblxuICAgICAgY2FzZSBcIkpTWElkZW50aWZpZXJcIjpcbiAgICAgICAgcmV0dXJuIFwianN4SWRlbnRpZmllclwiO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gXCJ1bmNvbG9yZWRcIjtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFR1cm4gYSBzdHJpbmcgb2YgSlMgaW50byBhbiBhcnJheSBvZiBvYmplY3RzLlxuICAgKi9cbiAgdG9rZW5pemUgPSBmdW5jdGlvbiogKHRleHQ6IHN0cmluZyk6IEdlbmVyYXRvcjxUb2tlbj4ge1xuICAgIGZvciAoY29uc3QgdG9rZW4gb2YganNUb2tlbnModGV4dCwgeyBqc3g6IHRydWUgfSkpIHtcbiAgICAgIHN3aXRjaCAodG9rZW4udHlwZSkge1xuICAgICAgICBjYXNlIFwiVGVtcGxhdGVIZWFkXCI6XG4gICAgICAgICAgeWllbGQgeyB0eXBlOiBcInN0cmluZ1wiLCB2YWx1ZTogdG9rZW4udmFsdWUuc2xpY2UoMCwgLTIpIH07XG4gICAgICAgICAgeWllbGQgeyB0eXBlOiBcInB1bmN0dWF0b3JcIiwgdmFsdWU6IFwiJHtcIiB9O1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJUZW1wbGF0ZU1pZGRsZVwiOlxuICAgICAgICAgIHlpZWxkIHsgdHlwZTogXCJwdW5jdHVhdG9yXCIsIHZhbHVlOiBcIn1cIiB9O1xuICAgICAgICAgIHlpZWxkIHsgdHlwZTogXCJzdHJpbmdcIiwgdmFsdWU6IHRva2VuLnZhbHVlLnNsaWNlKDEsIC0yKSB9O1xuICAgICAgICAgIHlpZWxkIHsgdHlwZTogXCJwdW5jdHVhdG9yXCIsIHZhbHVlOiBcIiR7XCIgfTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiVGVtcGxhdGVUYWlsXCI6XG4gICAgICAgICAgeWllbGQgeyB0eXBlOiBcInB1bmN0dWF0b3JcIiwgdmFsdWU6IFwifVwiIH07XG4gICAgICAgICAgeWllbGQgeyB0eXBlOiBcInN0cmluZ1wiLCB2YWx1ZTogdG9rZW4udmFsdWUuc2xpY2UoMSkgfTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHlpZWxkIHtcbiAgICAgICAgICAgIHR5cGU6IGdldFRva2VuVHlwZSh0b2tlbiksXG4gICAgICAgICAgICB2YWx1ZTogdG9rZW4udmFsdWUsXG4gICAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59IGVsc2Uge1xuICAvKipcbiAgICogUmVnRXhwIHRvIHRlc3QgZm9yIHdoYXQgc2VlbXMgdG8gYmUgYSBKU1ggdGFnIG5hbWUuXG4gICAqL1xuICBjb25zdCBKU1hfVEFHID0gL15bYS16XVtcXHctXSokL2k7XG5cbiAgLy8gVGhlIHRva2VuIGhlcmUgaXMgZGVmaW5lZCBpbiBqcy10b2tlbnNANC4gSG93ZXZlciB3ZSBkb24ndCBib3RoZXJcbiAgLy8gdHlwaW5nIGl0IHNpbmNlIHRoZSB3aG9sZSBibG9jayB3aWxsIGJlIHJlbW92ZWQgaW4gQmFiZWwgOFxuICBjb25zdCBnZXRUb2tlblR5cGUgPSBmdW5jdGlvbiAodG9rZW46IGFueSwgb2Zmc2V0OiBudW1iZXIsIHRleHQ6IHN0cmluZykge1xuICAgIGlmICh0b2tlbi50eXBlID09PSBcIm5hbWVcIikge1xuICAgICAgaWYgKFxuICAgICAgICBpc0tleXdvcmQodG9rZW4udmFsdWUpIHx8XG4gICAgICAgIGlzU3RyaWN0UmVzZXJ2ZWRXb3JkKHRva2VuLnZhbHVlLCB0cnVlKSB8fFxuICAgICAgICBzb21ldGltZXNLZXl3b3Jkcy5oYXModG9rZW4udmFsdWUpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIFwia2V5d29yZFwiO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIEpTWF9UQUcudGVzdCh0b2tlbi52YWx1ZSkgJiZcbiAgICAgICAgKHRleHRbb2Zmc2V0IC0gMV0gPT09IFwiPFwiIHx8IHRleHQuc2xpY2Uob2Zmc2V0IC0gMiwgb2Zmc2V0KSA9PT0gXCI8L1wiKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBcImpzeElkZW50aWZpZXJcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRva2VuLnZhbHVlWzBdICE9PSB0b2tlbi52YWx1ZVswXS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgIHJldHVybiBcImNhcGl0YWxpemVkXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRva2VuLnR5cGUgPT09IFwicHVuY3R1YXRvclwiICYmIEJSQUNLRVQudGVzdCh0b2tlbi52YWx1ZSkpIHtcbiAgICAgIHJldHVybiBcImJyYWNrZXRcIjtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0b2tlbi50eXBlID09PSBcImludmFsaWRcIiAmJlxuICAgICAgKHRva2VuLnZhbHVlID09PSBcIkBcIiB8fCB0b2tlbi52YWx1ZSA9PT0gXCIjXCIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gXCJwdW5jdHVhdG9yXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VuLnR5cGU7XG4gIH07XG5cbiAgdG9rZW5pemUgPSBmdW5jdGlvbiogKHRleHQ6IHN0cmluZykge1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gKGpzVG9rZW5zIGFzIGFueSkuZGVmYXVsdC5leGVjKHRleHQpKSkge1xuICAgICAgY29uc3QgdG9rZW4gPSAoanNUb2tlbnMgYXMgYW55KS5tYXRjaFRvVG9rZW4obWF0Y2gpO1xuXG4gICAgICB5aWVsZCB7XG4gICAgICAgIHR5cGU6IGdldFRva2VuVHlwZSh0b2tlbiwgbWF0Y2guaW5kZXgsIHRleHQpLFxuICAgICAgICB2YWx1ZTogdG9rZW4udmFsdWUsXG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBIaWdobGlnaHQgYHRleHRgIHVzaW5nIHRoZSB0b2tlbiBkZWZpbml0aW9ucyBpbiBgZGVmc2AuXG4gKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodFRva2VucyhkZWZzOiBSZWNvcmQ8c3RyaW5nLCBGb3JtYXR0ZXI+LCB0ZXh0OiBzdHJpbmcpIHtcbiAgbGV0IGhpZ2hsaWdodGVkID0gXCJcIjtcblxuICBmb3IgKGNvbnN0IHsgdHlwZSwgdmFsdWUgfSBvZiB0b2tlbml6ZSh0ZXh0KSkge1xuICAgIGNvbnN0IGNvbG9yaXplID0gZGVmc1t0eXBlXTtcbiAgICBpZiAoY29sb3JpemUpIHtcbiAgICAgIGhpZ2hsaWdodGVkICs9IHZhbHVlXG4gICAgICAgIC5zcGxpdChORVdMSU5FKVxuICAgICAgICAubWFwKHN0ciA9PiBjb2xvcml6ZShzdHIpKVxuICAgICAgICAuam9pbihcIlxcblwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGlnaGxpZ2h0ZWQgKz0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGhpZ2hsaWdodGVkO1xufVxuXG4vKipcbiAqIEhpZ2hsaWdodCBgdGV4dGAgdXNpbmcgdGhlIHRva2VuIGRlZmluaXRpb25zIGluIGBkZWZzYC5cbiAqL1xuXG50eXBlIE9wdGlvbnMgPSB7XG4gIGZvcmNlQ29sb3I/OiBib29sZWFuO1xufTtcblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBjb2RlIHNob3VsZCBiZSBoaWdobGlnaHRlZCBnaXZlbiB0aGUgcGFzc2VkIG9wdGlvbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRIaWdobGlnaHQob3B0aW9uczogT3B0aW9ucyk6IGJvb2xlYW4ge1xuICByZXR1cm4gY29sb3JzLmlzQ29sb3JTdXBwb3J0ZWQgfHwgb3B0aW9ucy5mb3JjZUNvbG9yO1xufVxuXG5sZXQgcGNXaXRoRm9yY2VkQ29sb3I6IENvbG9ycyA9IHVuZGVmaW5lZDtcbmZ1bmN0aW9uIGdldENvbG9ycyhmb3JjZUNvbG9yOiBib29sZWFuKSB7XG4gIGlmIChmb3JjZUNvbG9yKSB7XG4gICAgcGNXaXRoRm9yY2VkQ29sb3IgPz89IGNyZWF0ZUNvbG9ycyh0cnVlKTtcbiAgICByZXR1cm4gcGNXaXRoRm9yY2VkQ29sb3I7XG4gIH1cbiAgcmV0dXJuIGNvbG9ycztcbn1cblxuLyoqXG4gKiBIaWdobGlnaHQgYGNvZGVgLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoaWdobGlnaHQoY29kZTogc3RyaW5nLCBvcHRpb25zOiBPcHRpb25zID0ge30pOiBzdHJpbmcge1xuICBpZiAoY29kZSAhPT0gXCJcIiAmJiBzaG91bGRIaWdobGlnaHQob3B0aW9ucykpIHtcbiAgICBjb25zdCBkZWZzID0gZ2V0RGVmcyhnZXRDb2xvcnMob3B0aW9ucy5mb3JjZUNvbG9yKSk7XG4gICAgcmV0dXJuIGhpZ2hsaWdodFRva2VucyhkZWZzLCBjb2RlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY29kZTtcbiAgfVxufVxuXG5pZiAoIXByb2Nlc3MuZW52LkJBQkVMXzhfQlJFQUtJTkcgJiYgIVVTRV9FU00gJiYgIUlTX1NUQU5EQUxPTkUpIHtcbiAgbGV0IGNoYWxrOiBhbnksIGNoYWxrV2l0aEZvcmNlZENvbG9yOiBhbnk7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgZXhwb3J0cy5nZXRDaGFsayA9ICh7IGZvcmNlQ29sb3IgfTogT3B0aW9ucykgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICBjaGFsayA/Pz0gcmVxdWlyZShcImNoYWxrXCIpO1xuICAgIGlmIChmb3JjZUNvbG9yKSB7XG4gICAgICBjaGFsa1dpdGhGb3JjZWRDb2xvciA/Pz0gbmV3IGNoYWxrLmNvbnN0cnVjdG9yKHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgbGV2ZWw6IDEsXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjaGFsa1dpdGhGb3JjZWRDb2xvcjtcbiAgICB9XG4gICAgcmV0dXJuIGNoYWxrO1xuICB9O1xufVxuIl0sIm1h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