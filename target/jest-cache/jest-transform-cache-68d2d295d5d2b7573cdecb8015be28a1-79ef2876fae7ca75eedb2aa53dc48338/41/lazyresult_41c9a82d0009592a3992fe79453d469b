0c1ee628b2fdcbaeefc7aa91d67c98bf
'use strict';

let {
  isClean,
  my
} = require('./symbols');
let MapGenerator = require('./map-generator');
let stringify = require('./stringify');
let Container = require('./container');
let Document = require('./document');
let warnOnce = require('./warn-once');
let Result = require('./result');
let parse = require('./parse');
let Root = require('./root');
const TYPE_TO_CLASS_NAME = {
  atrule: 'AtRule',
  comment: 'Comment',
  decl: 'Declaration',
  document: 'Document',
  root: 'Root',
  rule: 'Rule'
};
const PLUGIN_PROPS = {
  AtRule: true,
  AtRuleExit: true,
  Comment: true,
  CommentExit: true,
  Declaration: true,
  DeclarationExit: true,
  Document: true,
  DocumentExit: true,
  Once: true,
  OnceExit: true,
  postcssPlugin: true,
  prepare: true,
  Root: true,
  RootExit: true,
  Rule: true,
  RuleExit: true
};
const NOT_VISITORS = {
  Once: true,
  postcssPlugin: true,
  prepare: true
};
const CHILDREN = 0;
function isPromise(obj) {
  return typeof obj === 'object' && typeof obj.then === 'function';
}
function getEvents(node) {
  let key = false;
  let type = TYPE_TO_CLASS_NAME[node.type];
  if (node.type === 'decl') {
    key = node.prop.toLowerCase();
  } else if (node.type === 'atrule') {
    key = node.name.toLowerCase();
  }
  if (key && node.append) {
    return [type, type + '-' + key, CHILDREN, type + 'Exit', type + 'Exit-' + key];
  } else if (key) {
    return [type, type + '-' + key, type + 'Exit', type + 'Exit-' + key];
  } else if (node.append) {
    return [type, CHILDREN, type + 'Exit'];
  } else {
    return [type, type + 'Exit'];
  }
}
function toStack(node) {
  let events;
  if (node.type === 'document') {
    events = ['Document', CHILDREN, 'DocumentExit'];
  } else if (node.type === 'root') {
    events = ['Root', CHILDREN, 'RootExit'];
  } else {
    events = getEvents(node);
  }
  return {
    eventIndex: 0,
    events,
    iterator: 0,
    node,
    visitorIndex: 0,
    visitors: []
  };
}
function cleanMarks(node) {
  node[isClean] = false;
  if (node.nodes) node.nodes.forEach(i => cleanMarks(i));
  return node;
}
let postcss = {};
class LazyResult {
  constructor(processor, css, opts) {
    this.stringified = false;
    this.processed = false;
    let root;
    if (typeof css === 'object' && css !== null && (css.type === 'root' || css.type === 'document')) {
      root = cleanMarks(css);
    } else if (css instanceof LazyResult || css instanceof Result) {
      root = cleanMarks(css.root);
      if (css.map) {
        if (typeof opts.map === 'undefined') opts.map = {};
        if (!opts.map.inline) opts.map.inline = false;
        opts.map.prev = css.map;
      }
    } else {
      let parser = parse;
      if (opts.syntax) parser = opts.syntax.parse;
      if (opts.parser) parser = opts.parser;
      if (parser.parse) parser = parser.parse;
      try {
        root = parser(css, opts);
      } catch (error) {
        this.processed = true;
        this.error = error;
      }
      if (root && !root[my]) {
        /* c8 ignore next 2 */
        Container.rebuild(root);
      }
    }
    this.result = new Result(processor, root, opts);
    this.helpers = {
      ...postcss,
      postcss,
      result: this.result
    };
    this.plugins = this.processor.plugins.map(plugin => {
      if (typeof plugin === 'object' && plugin.prepare) {
        return {
          ...plugin,
          ...plugin.prepare(this.result)
        };
      } else {
        return plugin;
      }
    });
  }
  async() {
    if (this.error) return Promise.reject(this.error);
    if (this.processed) return Promise.resolve(this.result);
    if (!this.processing) {
      this.processing = this.runAsync();
    }
    return this.processing;
  }
  catch(onRejected) {
    return this.async().catch(onRejected);
  }
  finally(onFinally) {
    return this.async().then(onFinally, onFinally);
  }
  getAsyncError() {
    throw new Error('Use process(css).then(cb) to work with async plugins');
  }
  handleError(error, node) {
    let plugin = this.result.lastPlugin;
    try {
      if (node) node.addToError(error);
      this.error = error;
      if (error.name === 'CssSyntaxError' && !error.plugin) {
        error.plugin = plugin.postcssPlugin;
        error.setMessage();
      } else if (plugin.postcssVersion) {
        if (process.env.NODE_ENV !== 'production') {
          let pluginName = plugin.postcssPlugin;
          let pluginVer = plugin.postcssVersion;
          let runtimeVer = this.result.processor.version;
          let a = pluginVer.split('.');
          let b = runtimeVer.split('.');
          if (a[0] !== b[0] || parseInt(a[1]) > parseInt(b[1])) {
            // eslint-disable-next-line no-console
            console.error('Unknown error from PostCSS plugin. Your current PostCSS ' + 'version is ' + runtimeVer + ', but ' + pluginName + ' uses ' + pluginVer + '. Perhaps this is the source of the error below.');
          }
        }
      }
    } catch (err) {
      /* c8 ignore next 3 */
      // eslint-disable-next-line no-console
      if (console && console.error) console.error(err);
    }
    return error;
  }
  prepareVisitors() {
    this.listeners = {};
    let add = (plugin, type, cb) => {
      if (!this.listeners[type]) this.listeners[type] = [];
      this.listeners[type].push([plugin, cb]);
    };
    for (let plugin of this.plugins) {
      if (typeof plugin === 'object') {
        for (let event in plugin) {
          if (!PLUGIN_PROPS[event] && /^[A-Z]/.test(event)) {
            throw new Error(`Unknown event ${event} in ${plugin.postcssPlugin}. ` + `Try to update PostCSS (${this.processor.version} now).`);
          }
          if (!NOT_VISITORS[event]) {
            if (typeof plugin[event] === 'object') {
              for (let filter in plugin[event]) {
                if (filter === '*') {
                  add(plugin, event, plugin[event][filter]);
                } else {
                  add(plugin, event + '-' + filter.toLowerCase(), plugin[event][filter]);
                }
              }
            } else if (typeof plugin[event] === 'function') {
              add(plugin, event, plugin[event]);
            }
          }
        }
      }
    }
    this.hasListener = Object.keys(this.listeners).length > 0;
  }
  async runAsync() {
    this.plugin = 0;
    for (let i = 0; i < this.plugins.length; i++) {
      let plugin = this.plugins[i];
      let promise = this.runOnRoot(plugin);
      if (isPromise(promise)) {
        try {
          await promise;
        } catch (error) {
          throw this.handleError(error);
        }
      }
    }
    this.prepareVisitors();
    if (this.hasListener) {
      let root = this.result.root;
      while (!root[isClean]) {
        root[isClean] = true;
        let stack = [toStack(root)];
        while (stack.length > 0) {
          let promise = this.visitTick(stack);
          if (isPromise(promise)) {
            try {
              await promise;
            } catch (e) {
              let node = stack[stack.length - 1].node;
              throw this.handleError(e, node);
            }
          }
        }
      }
      if (this.listeners.OnceExit) {
        for (let [plugin, visitor] of this.listeners.OnceExit) {
          this.result.lastPlugin = plugin;
          try {
            if (root.type === 'document') {
              let roots = root.nodes.map(subRoot => visitor(subRoot, this.helpers));
              await Promise.all(roots);
            } else {
              await visitor(root, this.helpers);
            }
          } catch (e) {
            throw this.handleError(e);
          }
        }
      }
    }
    this.processed = true;
    return this.stringify();
  }
  runOnRoot(plugin) {
    this.result.lastPlugin = plugin;
    try {
      if (typeof plugin === 'object' && plugin.Once) {
        if (this.result.root.type === 'document') {
          let roots = this.result.root.nodes.map(root => plugin.Once(root, this.helpers));
          if (isPromise(roots[0])) {
            return Promise.all(roots);
          }
          return roots;
        }
        return plugin.Once(this.result.root, this.helpers);
      } else if (typeof plugin === 'function') {
        return plugin(this.result.root, this.result);
      }
    } catch (error) {
      throw this.handleError(error);
    }
  }
  stringify() {
    if (this.error) throw this.error;
    if (this.stringified) return this.result;
    this.stringified = true;
    this.sync();
    let opts = this.result.opts;
    let str = stringify;
    if (opts.syntax) str = opts.syntax.stringify;
    if (opts.stringifier) str = opts.stringifier;
    if (str.stringify) str = str.stringify;
    let map = new MapGenerator(str, this.result.root, this.result.opts);
    let data = map.generate();
    this.result.css = data[0];
    this.result.map = data[1];
    return this.result;
  }
  sync() {
    if (this.error) throw this.error;
    if (this.processed) return this.result;
    this.processed = true;
    if (this.processing) {
      throw this.getAsyncError();
    }
    for (let plugin of this.plugins) {
      let promise = this.runOnRoot(plugin);
      if (isPromise(promise)) {
        throw this.getAsyncError();
      }
    }
    this.prepareVisitors();
    if (this.hasListener) {
      let root = this.result.root;
      while (!root[isClean]) {
        root[isClean] = true;
        this.walkSync(root);
      }
      if (this.listeners.OnceExit) {
        if (root.type === 'document') {
          for (let subRoot of root.nodes) {
            this.visitSync(this.listeners.OnceExit, subRoot);
          }
        } else {
          this.visitSync(this.listeners.OnceExit, root);
        }
      }
    }
    return this.result;
  }
  then(onFulfilled, onRejected) {
    if (process.env.NODE_ENV !== 'production') {
      if (!('from' in this.opts)) {
        warnOnce('Without `from` option PostCSS could generate wrong source map ' + 'and will not find Browserslist config. Set it to CSS file path ' + 'or to `undefined` to prevent this warning.');
      }
    }
    return this.async().then(onFulfilled, onRejected);
  }
  toString() {
    return this.css;
  }
  visitSync(visitors, node) {
    for (let [plugin, visitor] of visitors) {
      this.result.lastPlugin = plugin;
      let promise;
      try {
        promise = visitor(node, this.helpers);
      } catch (e) {
        throw this.handleError(e, node.proxyOf);
      }
      if (node.type !== 'root' && node.type !== 'document' && !node.parent) {
        return true;
      }
      if (isPromise(promise)) {
        throw this.getAsyncError();
      }
    }
  }
  visitTick(stack) {
    let visit = stack[stack.length - 1];
    let {
      node,
      visitors
    } = visit;
    if (node.type !== 'root' && node.type !== 'document' && !node.parent) {
      stack.pop();
      return;
    }
    if (visitors.length > 0 && visit.visitorIndex < visitors.length) {
      let [plugin, visitor] = visitors[visit.visitorIndex];
      visit.visitorIndex += 1;
      if (visit.visitorIndex === visitors.length) {
        visit.visitors = [];
        visit.visitorIndex = 0;
      }
      this.result.lastPlugin = plugin;
      try {
        return visitor(node.toProxy(), this.helpers);
      } catch (e) {
        throw this.handleError(e, node);
      }
    }
    if (visit.iterator !== 0) {
      let iterator = visit.iterator;
      let child;
      while (child = node.nodes[node.indexes[iterator]]) {
        node.indexes[iterator] += 1;
        if (!child[isClean]) {
          child[isClean] = true;
          stack.push(toStack(child));
          return;
        }
      }
      visit.iterator = 0;
      delete node.indexes[iterator];
    }
    let events = visit.events;
    while (visit.eventIndex < events.length) {
      let event = events[visit.eventIndex];
      visit.eventIndex += 1;
      if (event === CHILDREN) {
        if (node.nodes && node.nodes.length) {
          node[isClean] = true;
          visit.iterator = node.getIterator();
        }
        return;
      } else if (this.listeners[event]) {
        visit.visitors = this.listeners[event];
        return;
      }
    }
    stack.pop();
  }
  walkSync(node) {
    node[isClean] = true;
    let events = getEvents(node);
    for (let event of events) {
      if (event === CHILDREN) {
        if (node.nodes) {
          node.each(child => {
            if (!child[isClean]) this.walkSync(child);
          });
        }
      } else {
        let visitors = this.listeners[event];
        if (visitors) {
          if (this.visitSync(visitors, node.toProxy())) return;
        }
      }
    }
  }
  warnings() {
    return this.sync().warnings();
  }
  get content() {
    return this.stringify().content;
  }
  get css() {
    return this.stringify().css;
  }
  get map() {
    return this.stringify().map;
  }
  get messages() {
    return this.sync().messages;
  }
  get opts() {
    return this.result.opts;
  }
  get processor() {
    return this.result.processor;
  }
  get root() {
    return this.sync().root;
  }
  get [Symbol.toStringTag]() {
    return 'LazyResult';
  }
}
LazyResult.registerPostcss = dependant => {
  postcss = dependant;
};
module.exports = LazyResult;
LazyResult.default = LazyResult;
Root.registerLazyResult(LazyResult);
Document.registerLazyResult(LazyResult);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpc0NsZWFuIiwibXkiLCJyZXF1aXJlIiwiTWFwR2VuZXJhdG9yIiwic3RyaW5naWZ5IiwiQ29udGFpbmVyIiwiRG9jdW1lbnQiLCJ3YXJuT25jZSIsIlJlc3VsdCIsInBhcnNlIiwiUm9vdCIsIlRZUEVfVE9fQ0xBU1NfTkFNRSIsImF0cnVsZSIsImNvbW1lbnQiLCJkZWNsIiwiZG9jdW1lbnQiLCJyb290IiwicnVsZSIsIlBMVUdJTl9QUk9QUyIsIkF0UnVsZSIsIkF0UnVsZUV4aXQiLCJDb21tZW50IiwiQ29tbWVudEV4aXQiLCJEZWNsYXJhdGlvbiIsIkRlY2xhcmF0aW9uRXhpdCIsIkRvY3VtZW50RXhpdCIsIk9uY2UiLCJPbmNlRXhpdCIsInBvc3Rjc3NQbHVnaW4iLCJwcmVwYXJlIiwiUm9vdEV4aXQiLCJSdWxlIiwiUnVsZUV4aXQiLCJOT1RfVklTSVRPUlMiLCJDSElMRFJFTiIsImlzUHJvbWlzZSIsIm9iaiIsInRoZW4iLCJnZXRFdmVudHMiLCJub2RlIiwia2V5IiwidHlwZSIsInByb3AiLCJ0b0xvd2VyQ2FzZSIsIm5hbWUiLCJhcHBlbmQiLCJ0b1N0YWNrIiwiZXZlbnRzIiwiZXZlbnRJbmRleCIsIml0ZXJhdG9yIiwidmlzaXRvckluZGV4IiwidmlzaXRvcnMiLCJjbGVhbk1hcmtzIiwibm9kZXMiLCJmb3JFYWNoIiwiaSIsInBvc3Rjc3MiLCJMYXp5UmVzdWx0IiwiY29uc3RydWN0b3IiLCJwcm9jZXNzb3IiLCJjc3MiLCJvcHRzIiwic3RyaW5naWZpZWQiLCJwcm9jZXNzZWQiLCJtYXAiLCJpbmxpbmUiLCJwcmV2IiwicGFyc2VyIiwic3ludGF4IiwiZXJyb3IiLCJyZWJ1aWxkIiwicmVzdWx0IiwiaGVscGVycyIsInBsdWdpbnMiLCJwbHVnaW4iLCJhc3luYyIsIlByb21pc2UiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvY2Vzc2luZyIsInJ1bkFzeW5jIiwiY2F0Y2giLCJvblJlamVjdGVkIiwiZmluYWxseSIsIm9uRmluYWxseSIsImdldEFzeW5jRXJyb3IiLCJFcnJvciIsImhhbmRsZUVycm9yIiwibGFzdFBsdWdpbiIsImFkZFRvRXJyb3IiLCJzZXRNZXNzYWdlIiwicG9zdGNzc1ZlcnNpb24iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJwbHVnaW5OYW1lIiwicGx1Z2luVmVyIiwicnVudGltZVZlciIsInZlcnNpb24iLCJhIiwic3BsaXQiLCJiIiwicGFyc2VJbnQiLCJjb25zb2xlIiwiZXJyIiwicHJlcGFyZVZpc2l0b3JzIiwibGlzdGVuZXJzIiwiYWRkIiwiY2IiLCJwdXNoIiwiZXZlbnQiLCJ0ZXN0IiwiZmlsdGVyIiwiaGFzTGlzdGVuZXIiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwicHJvbWlzZSIsInJ1bk9uUm9vdCIsInN0YWNrIiwidmlzaXRUaWNrIiwiZSIsInZpc2l0b3IiLCJyb290cyIsInN1YlJvb3QiLCJhbGwiLCJzeW5jIiwic3RyIiwic3RyaW5naWZpZXIiLCJkYXRhIiwiZ2VuZXJhdGUiLCJ3YWxrU3luYyIsInZpc2l0U3luYyIsIm9uRnVsZmlsbGVkIiwidG9TdHJpbmciLCJwcm94eU9mIiwicGFyZW50IiwidmlzaXQiLCJwb3AiLCJ0b1Byb3h5IiwiY2hpbGQiLCJpbmRleGVzIiwiZ2V0SXRlcmF0b3IiLCJlYWNoIiwid2FybmluZ3MiLCJjb250ZW50IiwibWVzc2FnZXMiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInJlZ2lzdGVyUG9zdGNzcyIsImRlcGVuZGFudCIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZhdWx0IiwicmVnaXN0ZXJMYXp5UmVzdWx0Il0sInNvdXJjZXMiOlsibGF6eS1yZXN1bHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmxldCB7IGlzQ2xlYW4sIG15IH0gPSByZXF1aXJlKCcuL3N5bWJvbHMnKVxubGV0IE1hcEdlbmVyYXRvciA9IHJlcXVpcmUoJy4vbWFwLWdlbmVyYXRvcicpXG5sZXQgc3RyaW5naWZ5ID0gcmVxdWlyZSgnLi9zdHJpbmdpZnknKVxubGV0IENvbnRhaW5lciA9IHJlcXVpcmUoJy4vY29udGFpbmVyJylcbmxldCBEb2N1bWVudCA9IHJlcXVpcmUoJy4vZG9jdW1lbnQnKVxubGV0IHdhcm5PbmNlID0gcmVxdWlyZSgnLi93YXJuLW9uY2UnKVxubGV0IFJlc3VsdCA9IHJlcXVpcmUoJy4vcmVzdWx0JylcbmxldCBwYXJzZSA9IHJlcXVpcmUoJy4vcGFyc2UnKVxubGV0IFJvb3QgPSByZXF1aXJlKCcuL3Jvb3QnKVxuXG5jb25zdCBUWVBFX1RPX0NMQVNTX05BTUUgPSB7XG4gIGF0cnVsZTogJ0F0UnVsZScsXG4gIGNvbW1lbnQ6ICdDb21tZW50JyxcbiAgZGVjbDogJ0RlY2xhcmF0aW9uJyxcbiAgZG9jdW1lbnQ6ICdEb2N1bWVudCcsXG4gIHJvb3Q6ICdSb290JyxcbiAgcnVsZTogJ1J1bGUnXG59XG5cbmNvbnN0IFBMVUdJTl9QUk9QUyA9IHtcbiAgQXRSdWxlOiB0cnVlLFxuICBBdFJ1bGVFeGl0OiB0cnVlLFxuICBDb21tZW50OiB0cnVlLFxuICBDb21tZW50RXhpdDogdHJ1ZSxcbiAgRGVjbGFyYXRpb246IHRydWUsXG4gIERlY2xhcmF0aW9uRXhpdDogdHJ1ZSxcbiAgRG9jdW1lbnQ6IHRydWUsXG4gIERvY3VtZW50RXhpdDogdHJ1ZSxcbiAgT25jZTogdHJ1ZSxcbiAgT25jZUV4aXQ6IHRydWUsXG4gIHBvc3Rjc3NQbHVnaW46IHRydWUsXG4gIHByZXBhcmU6IHRydWUsXG4gIFJvb3Q6IHRydWUsXG4gIFJvb3RFeGl0OiB0cnVlLFxuICBSdWxlOiB0cnVlLFxuICBSdWxlRXhpdDogdHJ1ZVxufVxuXG5jb25zdCBOT1RfVklTSVRPUlMgPSB7XG4gIE9uY2U6IHRydWUsXG4gIHBvc3Rjc3NQbHVnaW46IHRydWUsXG4gIHByZXBhcmU6IHRydWVcbn1cblxuY29uc3QgQ0hJTERSRU4gPSAwXG5cbmZ1bmN0aW9uIGlzUHJvbWlzZShvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gJ2Z1bmN0aW9uJ1xufVxuXG5mdW5jdGlvbiBnZXRFdmVudHMobm9kZSkge1xuICBsZXQga2V5ID0gZmFsc2VcbiAgbGV0IHR5cGUgPSBUWVBFX1RPX0NMQVNTX05BTUVbbm9kZS50eXBlXVxuICBpZiAobm9kZS50eXBlID09PSAnZGVjbCcpIHtcbiAgICBrZXkgPSBub2RlLnByb3AudG9Mb3dlckNhc2UoKVxuICB9IGVsc2UgaWYgKG5vZGUudHlwZSA9PT0gJ2F0cnVsZScpIHtcbiAgICBrZXkgPSBub2RlLm5hbWUudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgaWYgKGtleSAmJiBub2RlLmFwcGVuZCkge1xuICAgIHJldHVybiBbXG4gICAgICB0eXBlLFxuICAgICAgdHlwZSArICctJyArIGtleSxcbiAgICAgIENISUxEUkVOLFxuICAgICAgdHlwZSArICdFeGl0JyxcbiAgICAgIHR5cGUgKyAnRXhpdC0nICsga2V5XG4gICAgXVxuICB9IGVsc2UgaWYgKGtleSkge1xuICAgIHJldHVybiBbdHlwZSwgdHlwZSArICctJyArIGtleSwgdHlwZSArICdFeGl0JywgdHlwZSArICdFeGl0LScgKyBrZXldXG4gIH0gZWxzZSBpZiAobm9kZS5hcHBlbmQpIHtcbiAgICByZXR1cm4gW3R5cGUsIENISUxEUkVOLCB0eXBlICsgJ0V4aXQnXVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBbdHlwZSwgdHlwZSArICdFeGl0J11cbiAgfVxufVxuXG5mdW5jdGlvbiB0b1N0YWNrKG5vZGUpIHtcbiAgbGV0IGV2ZW50c1xuICBpZiAobm9kZS50eXBlID09PSAnZG9jdW1lbnQnKSB7XG4gICAgZXZlbnRzID0gWydEb2N1bWVudCcsIENISUxEUkVOLCAnRG9jdW1lbnRFeGl0J11cbiAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09ICdyb290Jykge1xuICAgIGV2ZW50cyA9IFsnUm9vdCcsIENISUxEUkVOLCAnUm9vdEV4aXQnXVxuICB9IGVsc2Uge1xuICAgIGV2ZW50cyA9IGdldEV2ZW50cyhub2RlKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBldmVudEluZGV4OiAwLFxuICAgIGV2ZW50cyxcbiAgICBpdGVyYXRvcjogMCxcbiAgICBub2RlLFxuICAgIHZpc2l0b3JJbmRleDogMCxcbiAgICB2aXNpdG9yczogW11cbiAgfVxufVxuXG5mdW5jdGlvbiBjbGVhbk1hcmtzKG5vZGUpIHtcbiAgbm9kZVtpc0NsZWFuXSA9IGZhbHNlXG4gIGlmIChub2RlLm5vZGVzKSBub2RlLm5vZGVzLmZvckVhY2goaSA9PiBjbGVhbk1hcmtzKGkpKVxuICByZXR1cm4gbm9kZVxufVxuXG5sZXQgcG9zdGNzcyA9IHt9XG5cbmNsYXNzIExhenlSZXN1bHQge1xuICBjb25zdHJ1Y3Rvcihwcm9jZXNzb3IsIGNzcywgb3B0cykge1xuICAgIHRoaXMuc3RyaW5naWZpZWQgPSBmYWxzZVxuICAgIHRoaXMucHJvY2Vzc2VkID0gZmFsc2VcblxuICAgIGxldCByb290XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGNzcyA9PT0gJ29iamVjdCcgJiZcbiAgICAgIGNzcyAhPT0gbnVsbCAmJlxuICAgICAgKGNzcy50eXBlID09PSAncm9vdCcgfHwgY3NzLnR5cGUgPT09ICdkb2N1bWVudCcpXG4gICAgKSB7XG4gICAgICByb290ID0gY2xlYW5NYXJrcyhjc3MpXG4gICAgfSBlbHNlIGlmIChjc3MgaW5zdGFuY2VvZiBMYXp5UmVzdWx0IHx8IGNzcyBpbnN0YW5jZW9mIFJlc3VsdCkge1xuICAgICAgcm9vdCA9IGNsZWFuTWFya3MoY3NzLnJvb3QpXG4gICAgICBpZiAoY3NzLm1hcCkge1xuICAgICAgICBpZiAodHlwZW9mIG9wdHMubWFwID09PSAndW5kZWZpbmVkJykgb3B0cy5tYXAgPSB7fVxuICAgICAgICBpZiAoIW9wdHMubWFwLmlubGluZSkgb3B0cy5tYXAuaW5saW5lID0gZmFsc2VcbiAgICAgICAgb3B0cy5tYXAucHJldiA9IGNzcy5tYXBcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHBhcnNlciA9IHBhcnNlXG4gICAgICBpZiAob3B0cy5zeW50YXgpIHBhcnNlciA9IG9wdHMuc3ludGF4LnBhcnNlXG4gICAgICBpZiAob3B0cy5wYXJzZXIpIHBhcnNlciA9IG9wdHMucGFyc2VyXG4gICAgICBpZiAocGFyc2VyLnBhcnNlKSBwYXJzZXIgPSBwYXJzZXIucGFyc2VcblxuICAgICAgdHJ5IHtcbiAgICAgICAgcm9vdCA9IHBhcnNlcihjc3MsIG9wdHMpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB0aGlzLnByb2Nlc3NlZCA9IHRydWVcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yXG4gICAgICB9XG5cbiAgICAgIGlmIChyb290ICYmICFyb290W215XSkge1xuICAgICAgICAvKiBjOCBpZ25vcmUgbmV4dCAyICovXG4gICAgICAgIENvbnRhaW5lci5yZWJ1aWxkKHJvb3QpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yZXN1bHQgPSBuZXcgUmVzdWx0KHByb2Nlc3Nvciwgcm9vdCwgb3B0cylcbiAgICB0aGlzLmhlbHBlcnMgPSB7IC4uLnBvc3Rjc3MsIHBvc3Rjc3MsIHJlc3VsdDogdGhpcy5yZXN1bHQgfVxuICAgIHRoaXMucGx1Z2lucyA9IHRoaXMucHJvY2Vzc29yLnBsdWdpbnMubWFwKHBsdWdpbiA9PiB7XG4gICAgICBpZiAodHlwZW9mIHBsdWdpbiA9PT0gJ29iamVjdCcgJiYgcGx1Z2luLnByZXBhcmUpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4ucGx1Z2luLCAuLi5wbHVnaW4ucHJlcGFyZSh0aGlzLnJlc3VsdCkgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBsdWdpblxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBhc3luYygpIHtcbiAgICBpZiAodGhpcy5lcnJvcikgcmV0dXJuIFByb21pc2UucmVqZWN0KHRoaXMuZXJyb3IpXG4gICAgaWYgKHRoaXMucHJvY2Vzc2VkKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMucmVzdWx0KVxuICAgIGlmICghdGhpcy5wcm9jZXNzaW5nKSB7XG4gICAgICB0aGlzLnByb2Nlc3NpbmcgPSB0aGlzLnJ1bkFzeW5jKClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucHJvY2Vzc2luZ1xuICB9XG5cbiAgY2F0Y2gob25SZWplY3RlZCkge1xuICAgIHJldHVybiB0aGlzLmFzeW5jKCkuY2F0Y2gob25SZWplY3RlZClcbiAgfVxuXG4gIGZpbmFsbHkob25GaW5hbGx5KSB7XG4gICAgcmV0dXJuIHRoaXMuYXN5bmMoKS50aGVuKG9uRmluYWxseSwgb25GaW5hbGx5KVxuICB9XG5cbiAgZ2V0QXN5bmNFcnJvcigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZSBwcm9jZXNzKGNzcykudGhlbihjYikgdG8gd29yayB3aXRoIGFzeW5jIHBsdWdpbnMnKVxuICB9XG5cbiAgaGFuZGxlRXJyb3IoZXJyb3IsIG5vZGUpIHtcbiAgICBsZXQgcGx1Z2luID0gdGhpcy5yZXN1bHQubGFzdFBsdWdpblxuICAgIHRyeSB7XG4gICAgICBpZiAobm9kZSkgbm9kZS5hZGRUb0Vycm9yKGVycm9yKVxuICAgICAgdGhpcy5lcnJvciA9IGVycm9yXG4gICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Nzc1N5bnRheEVycm9yJyAmJiAhZXJyb3IucGx1Z2luKSB7XG4gICAgICAgIGVycm9yLnBsdWdpbiA9IHBsdWdpbi5wb3N0Y3NzUGx1Z2luXG4gICAgICAgIGVycm9yLnNldE1lc3NhZ2UoKVxuICAgICAgfSBlbHNlIGlmIChwbHVnaW4ucG9zdGNzc1ZlcnNpb24pIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBsZXQgcGx1Z2luTmFtZSA9IHBsdWdpbi5wb3N0Y3NzUGx1Z2luXG4gICAgICAgICAgbGV0IHBsdWdpblZlciA9IHBsdWdpbi5wb3N0Y3NzVmVyc2lvblxuICAgICAgICAgIGxldCBydW50aW1lVmVyID0gdGhpcy5yZXN1bHQucHJvY2Vzc29yLnZlcnNpb25cbiAgICAgICAgICBsZXQgYSA9IHBsdWdpblZlci5zcGxpdCgnLicpXG4gICAgICAgICAgbGV0IGIgPSBydW50aW1lVmVyLnNwbGl0KCcuJylcblxuICAgICAgICAgIGlmIChhWzBdICE9PSBiWzBdIHx8IHBhcnNlSW50KGFbMV0pID4gcGFyc2VJbnQoYlsxXSkpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAnVW5rbm93biBlcnJvciBmcm9tIFBvc3RDU1MgcGx1Z2luLiBZb3VyIGN1cnJlbnQgUG9zdENTUyAnICtcbiAgICAgICAgICAgICAgICAndmVyc2lvbiBpcyAnICtcbiAgICAgICAgICAgICAgICBydW50aW1lVmVyICtcbiAgICAgICAgICAgICAgICAnLCBidXQgJyArXG4gICAgICAgICAgICAgICAgcGx1Z2luTmFtZSArXG4gICAgICAgICAgICAgICAgJyB1c2VzICcgK1xuICAgICAgICAgICAgICAgIHBsdWdpblZlciArXG4gICAgICAgICAgICAgICAgJy4gUGVyaGFwcyB0aGlzIGlzIHRoZSBzb3VyY2Ugb2YgdGhlIGVycm9yIGJlbG93LidcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8qIGM4IGlnbm9yZSBuZXh0IDMgKi9cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBpZiAoY29uc29sZSAmJiBjb25zb2xlLmVycm9yKSBjb25zb2xlLmVycm9yKGVycilcbiAgICB9XG4gICAgcmV0dXJuIGVycm9yXG4gIH1cblxuICBwcmVwYXJlVmlzaXRvcnMoKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSB7fVxuICAgIGxldCBhZGQgPSAocGx1Z2luLCB0eXBlLCBjYikgPT4ge1xuICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1t0eXBlXSkgdGhpcy5saXN0ZW5lcnNbdHlwZV0gPSBbXVxuICAgICAgdGhpcy5saXN0ZW5lcnNbdHlwZV0ucHVzaChbcGx1Z2luLCBjYl0pXG4gICAgfVxuICAgIGZvciAobGV0IHBsdWdpbiBvZiB0aGlzLnBsdWdpbnMpIHtcbiAgICAgIGlmICh0eXBlb2YgcGx1Z2luID09PSAnb2JqZWN0Jykge1xuICAgICAgICBmb3IgKGxldCBldmVudCBpbiBwbHVnaW4pIHtcbiAgICAgICAgICBpZiAoIVBMVUdJTl9QUk9QU1tldmVudF0gJiYgL15bQS1aXS8udGVzdChldmVudCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYFVua25vd24gZXZlbnQgJHtldmVudH0gaW4gJHtwbHVnaW4ucG9zdGNzc1BsdWdpbn0uIGAgK1xuICAgICAgICAgICAgICAgIGBUcnkgdG8gdXBkYXRlIFBvc3RDU1MgKCR7dGhpcy5wcm9jZXNzb3IudmVyc2lvbn0gbm93KS5gXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghTk9UX1ZJU0lUT1JTW2V2ZW50XSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwbHVnaW5bZXZlbnRdID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICBmb3IgKGxldCBmaWx0ZXIgaW4gcGx1Z2luW2V2ZW50XSkge1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIgPT09ICcqJykge1xuICAgICAgICAgICAgICAgICAgYWRkKHBsdWdpbiwgZXZlbnQsIHBsdWdpbltldmVudF1bZmlsdGVyXSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgYWRkKFxuICAgICAgICAgICAgICAgICAgICBwbHVnaW4sXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50ICsgJy0nICsgZmlsdGVyLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbltldmVudF1bZmlsdGVyXVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcGx1Z2luW2V2ZW50XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBhZGQocGx1Z2luLCBldmVudCwgcGx1Z2luW2V2ZW50XSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5oYXNMaXN0ZW5lciA9IE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPiAwXG4gIH1cblxuICBhc3luYyBydW5Bc3luYygpIHtcbiAgICB0aGlzLnBsdWdpbiA9IDBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGx1Z2lucy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHBsdWdpbiA9IHRoaXMucGx1Z2luc1tpXVxuICAgICAgbGV0IHByb21pc2UgPSB0aGlzLnJ1bk9uUm9vdChwbHVnaW4pXG4gICAgICBpZiAoaXNQcm9taXNlKHByb21pc2UpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcHJvbWlzZVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnByZXBhcmVWaXNpdG9ycygpXG4gICAgaWYgKHRoaXMuaGFzTGlzdGVuZXIpIHtcbiAgICAgIGxldCByb290ID0gdGhpcy5yZXN1bHQucm9vdFxuICAgICAgd2hpbGUgKCFyb290W2lzQ2xlYW5dKSB7XG4gICAgICAgIHJvb3RbaXNDbGVhbl0gPSB0cnVlXG4gICAgICAgIGxldCBzdGFjayA9IFt0b1N0YWNrKHJvb3QpXVxuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxldCBwcm9taXNlID0gdGhpcy52aXNpdFRpY2soc3RhY2spXG4gICAgICAgICAgaWYgKGlzUHJvbWlzZShwcm9taXNlKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgcHJvbWlzZVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBsZXQgbm9kZSA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdLm5vZGVcbiAgICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCBub2RlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5saXN0ZW5lcnMuT25jZUV4aXQpIHtcbiAgICAgICAgZm9yIChsZXQgW3BsdWdpbiwgdmlzaXRvcl0gb2YgdGhpcy5saXN0ZW5lcnMuT25jZUV4aXQpIHtcbiAgICAgICAgICB0aGlzLnJlc3VsdC5sYXN0UGx1Z2luID0gcGx1Z2luXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChyb290LnR5cGUgPT09ICdkb2N1bWVudCcpIHtcbiAgICAgICAgICAgICAgbGV0IHJvb3RzID0gcm9vdC5ub2Rlcy5tYXAoc3ViUm9vdCA9PlxuICAgICAgICAgICAgICAgIHZpc2l0b3Ioc3ViUm9vdCwgdGhpcy5oZWxwZXJzKVxuICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocm9vdHMpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhd2FpdCB2aXNpdG9yKHJvb3QsIHRoaXMuaGVscGVycylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5wcm9jZXNzZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRoaXMuc3RyaW5naWZ5KClcbiAgfVxuXG4gIHJ1bk9uUm9vdChwbHVnaW4pIHtcbiAgICB0aGlzLnJlc3VsdC5sYXN0UGx1Z2luID0gcGx1Z2luXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2YgcGx1Z2luID09PSAnb2JqZWN0JyAmJiBwbHVnaW4uT25jZSkge1xuICAgICAgICBpZiAodGhpcy5yZXN1bHQucm9vdC50eXBlID09PSAnZG9jdW1lbnQnKSB7XG4gICAgICAgICAgbGV0IHJvb3RzID0gdGhpcy5yZXN1bHQucm9vdC5ub2Rlcy5tYXAocm9vdCA9PlxuICAgICAgICAgICAgcGx1Z2luLk9uY2Uocm9vdCwgdGhpcy5oZWxwZXJzKVxuICAgICAgICAgIClcblxuICAgICAgICAgIGlmIChpc1Byb21pc2Uocm9vdHNbMF0pKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocm9vdHMpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHJvb3RzXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGx1Z2luLk9uY2UodGhpcy5yZXN1bHQucm9vdCwgdGhpcy5oZWxwZXJzKVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcGx1Z2luID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBwbHVnaW4odGhpcy5yZXN1bHQucm9vdCwgdGhpcy5yZXN1bHQpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRocm93IHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgc3RyaW5naWZ5KCkge1xuICAgIGlmICh0aGlzLmVycm9yKSB0aHJvdyB0aGlzLmVycm9yXG4gICAgaWYgKHRoaXMuc3RyaW5naWZpZWQpIHJldHVybiB0aGlzLnJlc3VsdFxuICAgIHRoaXMuc3RyaW5naWZpZWQgPSB0cnVlXG5cbiAgICB0aGlzLnN5bmMoKVxuXG4gICAgbGV0IG9wdHMgPSB0aGlzLnJlc3VsdC5vcHRzXG4gICAgbGV0IHN0ciA9IHN0cmluZ2lmeVxuICAgIGlmIChvcHRzLnN5bnRheCkgc3RyID0gb3B0cy5zeW50YXguc3RyaW5naWZ5XG4gICAgaWYgKG9wdHMuc3RyaW5naWZpZXIpIHN0ciA9IG9wdHMuc3RyaW5naWZpZXJcbiAgICBpZiAoc3RyLnN0cmluZ2lmeSkgc3RyID0gc3RyLnN0cmluZ2lmeVxuXG4gICAgbGV0IG1hcCA9IG5ldyBNYXBHZW5lcmF0b3Ioc3RyLCB0aGlzLnJlc3VsdC5yb290LCB0aGlzLnJlc3VsdC5vcHRzKVxuICAgIGxldCBkYXRhID0gbWFwLmdlbmVyYXRlKClcbiAgICB0aGlzLnJlc3VsdC5jc3MgPSBkYXRhWzBdXG4gICAgdGhpcy5yZXN1bHQubWFwID0gZGF0YVsxXVxuXG4gICAgcmV0dXJuIHRoaXMucmVzdWx0XG4gIH1cblxuICBzeW5jKCkge1xuICAgIGlmICh0aGlzLmVycm9yKSB0aHJvdyB0aGlzLmVycm9yXG4gICAgaWYgKHRoaXMucHJvY2Vzc2VkKSByZXR1cm4gdGhpcy5yZXN1bHRcbiAgICB0aGlzLnByb2Nlc3NlZCA9IHRydWVcblxuICAgIGlmICh0aGlzLnByb2Nlc3NpbmcpIHtcbiAgICAgIHRocm93IHRoaXMuZ2V0QXN5bmNFcnJvcigpXG4gICAgfVxuXG4gICAgZm9yIChsZXQgcGx1Z2luIG9mIHRoaXMucGx1Z2lucykge1xuICAgICAgbGV0IHByb21pc2UgPSB0aGlzLnJ1bk9uUm9vdChwbHVnaW4pXG4gICAgICBpZiAoaXNQcm9taXNlKHByb21pc2UpKSB7XG4gICAgICAgIHRocm93IHRoaXMuZ2V0QXN5bmNFcnJvcigpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5wcmVwYXJlVmlzaXRvcnMoKVxuICAgIGlmICh0aGlzLmhhc0xpc3RlbmVyKSB7XG4gICAgICBsZXQgcm9vdCA9IHRoaXMucmVzdWx0LnJvb3RcbiAgICAgIHdoaWxlICghcm9vdFtpc0NsZWFuXSkge1xuICAgICAgICByb290W2lzQ2xlYW5dID0gdHJ1ZVxuICAgICAgICB0aGlzLndhbGtTeW5jKHJvb3QpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5saXN0ZW5lcnMuT25jZUV4aXQpIHtcbiAgICAgICAgaWYgKHJvb3QudHlwZSA9PT0gJ2RvY3VtZW50Jykge1xuICAgICAgICAgIGZvciAobGV0IHN1YlJvb3Qgb2Ygcm9vdC5ub2Rlcykge1xuICAgICAgICAgICAgdGhpcy52aXNpdFN5bmModGhpcy5saXN0ZW5lcnMuT25jZUV4aXQsIHN1YlJvb3QpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudmlzaXRTeW5jKHRoaXMubGlzdGVuZXJzLk9uY2VFeGl0LCByb290KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVzdWx0XG4gIH1cblxuICB0aGVuKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmICghKCdmcm9tJyBpbiB0aGlzLm9wdHMpKSB7XG4gICAgICAgIHdhcm5PbmNlKFxuICAgICAgICAgICdXaXRob3V0IGBmcm9tYCBvcHRpb24gUG9zdENTUyBjb3VsZCBnZW5lcmF0ZSB3cm9uZyBzb3VyY2UgbWFwICcgK1xuICAgICAgICAgICAgJ2FuZCB3aWxsIG5vdCBmaW5kIEJyb3dzZXJzbGlzdCBjb25maWcuIFNldCBpdCB0byBDU1MgZmlsZSBwYXRoICcgK1xuICAgICAgICAgICAgJ29yIHRvIGB1bmRlZmluZWRgIHRvIHByZXZlbnQgdGhpcyB3YXJuaW5nLidcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hc3luYygpLnRoZW4ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpXG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5jc3NcbiAgfVxuXG4gIHZpc2l0U3luYyh2aXNpdG9ycywgbm9kZSkge1xuICAgIGZvciAobGV0IFtwbHVnaW4sIHZpc2l0b3JdIG9mIHZpc2l0b3JzKSB7XG4gICAgICB0aGlzLnJlc3VsdC5sYXN0UGx1Z2luID0gcGx1Z2luXG4gICAgICBsZXQgcHJvbWlzZVxuICAgICAgdHJ5IHtcbiAgICAgICAgcHJvbWlzZSA9IHZpc2l0b3Iobm9kZSwgdGhpcy5oZWxwZXJzKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUVycm9yKGUsIG5vZGUucHJveHlPZilcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLnR5cGUgIT09ICdyb290JyAmJiBub2RlLnR5cGUgIT09ICdkb2N1bWVudCcgJiYgIW5vZGUucGFyZW50KSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoaXNQcm9taXNlKHByb21pc2UpKSB7XG4gICAgICAgIHRocm93IHRoaXMuZ2V0QXN5bmNFcnJvcigpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmlzaXRUaWNrKHN0YWNrKSB7XG4gICAgbGV0IHZpc2l0ID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV1cbiAgICBsZXQgeyBub2RlLCB2aXNpdG9ycyB9ID0gdmlzaXRcblxuICAgIGlmIChub2RlLnR5cGUgIT09ICdyb290JyAmJiBub2RlLnR5cGUgIT09ICdkb2N1bWVudCcgJiYgIW5vZGUucGFyZW50KSB7XG4gICAgICBzdGFjay5wb3AoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHZpc2l0b3JzLmxlbmd0aCA+IDAgJiYgdmlzaXQudmlzaXRvckluZGV4IDwgdmlzaXRvcnMubGVuZ3RoKSB7XG4gICAgICBsZXQgW3BsdWdpbiwgdmlzaXRvcl0gPSB2aXNpdG9yc1t2aXNpdC52aXNpdG9ySW5kZXhdXG4gICAgICB2aXNpdC52aXNpdG9ySW5kZXggKz0gMVxuICAgICAgaWYgKHZpc2l0LnZpc2l0b3JJbmRleCA9PT0gdmlzaXRvcnMubGVuZ3RoKSB7XG4gICAgICAgIHZpc2l0LnZpc2l0b3JzID0gW11cbiAgICAgICAgdmlzaXQudmlzaXRvckluZGV4ID0gMFxuICAgICAgfVxuICAgICAgdGhpcy5yZXN1bHQubGFzdFBsdWdpbiA9IHBsdWdpblxuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHZpc2l0b3Iobm9kZS50b1Byb3h5KCksIHRoaXMuaGVscGVycylcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVFcnJvcihlLCBub2RlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh2aXNpdC5pdGVyYXRvciAhPT0gMCkge1xuICAgICAgbGV0IGl0ZXJhdG9yID0gdmlzaXQuaXRlcmF0b3JcbiAgICAgIGxldCBjaGlsZFxuICAgICAgd2hpbGUgKChjaGlsZCA9IG5vZGUubm9kZXNbbm9kZS5pbmRleGVzW2l0ZXJhdG9yXV0pKSB7XG4gICAgICAgIG5vZGUuaW5kZXhlc1tpdGVyYXRvcl0gKz0gMVxuICAgICAgICBpZiAoIWNoaWxkW2lzQ2xlYW5dKSB7XG4gICAgICAgICAgY2hpbGRbaXNDbGVhbl0gPSB0cnVlXG4gICAgICAgICAgc3RhY2sucHVzaCh0b1N0YWNrKGNoaWxkKSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmlzaXQuaXRlcmF0b3IgPSAwXG4gICAgICBkZWxldGUgbm9kZS5pbmRleGVzW2l0ZXJhdG9yXVxuICAgIH1cblxuICAgIGxldCBldmVudHMgPSB2aXNpdC5ldmVudHNcbiAgICB3aGlsZSAodmlzaXQuZXZlbnRJbmRleCA8IGV2ZW50cy5sZW5ndGgpIHtcbiAgICAgIGxldCBldmVudCA9IGV2ZW50c1t2aXNpdC5ldmVudEluZGV4XVxuICAgICAgdmlzaXQuZXZlbnRJbmRleCArPSAxXG4gICAgICBpZiAoZXZlbnQgPT09IENISUxEUkVOKSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoKSB7XG4gICAgICAgICAgbm9kZVtpc0NsZWFuXSA9IHRydWVcbiAgICAgICAgICB2aXNpdC5pdGVyYXRvciA9IG5vZGUuZ2V0SXRlcmF0b3IoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfSBlbHNlIGlmICh0aGlzLmxpc3RlbmVyc1tldmVudF0pIHtcbiAgICAgICAgdmlzaXQudmlzaXRvcnMgPSB0aGlzLmxpc3RlbmVyc1tldmVudF1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuICAgIHN0YWNrLnBvcCgpXG4gIH1cblxuICB3YWxrU3luYyhub2RlKSB7XG4gICAgbm9kZVtpc0NsZWFuXSA9IHRydWVcbiAgICBsZXQgZXZlbnRzID0gZ2V0RXZlbnRzKG5vZGUpXG4gICAgZm9yIChsZXQgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICBpZiAoZXZlbnQgPT09IENISUxEUkVOKSB7XG4gICAgICAgIGlmIChub2RlLm5vZGVzKSB7XG4gICAgICAgICAgbm9kZS5lYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgIGlmICghY2hpbGRbaXNDbGVhbl0pIHRoaXMud2Fsa1N5bmMoY2hpbGQpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHZpc2l0b3JzID0gdGhpcy5saXN0ZW5lcnNbZXZlbnRdXG4gICAgICAgIGlmICh2aXNpdG9ycykge1xuICAgICAgICAgIGlmICh0aGlzLnZpc2l0U3luYyh2aXNpdG9ycywgbm9kZS50b1Byb3h5KCkpKSByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHdhcm5pbmdzKCkge1xuICAgIHJldHVybiB0aGlzLnN5bmMoKS53YXJuaW5ncygpXG4gIH1cblxuICBnZXQgY29udGVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHJpbmdpZnkoKS5jb250ZW50XG4gIH1cblxuICBnZXQgY3NzKCkge1xuICAgIHJldHVybiB0aGlzLnN0cmluZ2lmeSgpLmNzc1xuICB9XG5cbiAgZ2V0IG1hcCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdHJpbmdpZnkoKS5tYXBcbiAgfVxuXG4gIGdldCBtZXNzYWdlcygpIHtcbiAgICByZXR1cm4gdGhpcy5zeW5jKCkubWVzc2FnZXNcbiAgfVxuXG4gIGdldCBvcHRzKCkge1xuICAgIHJldHVybiB0aGlzLnJlc3VsdC5vcHRzXG4gIH1cblxuICBnZXQgcHJvY2Vzc29yKCkge1xuICAgIHJldHVybiB0aGlzLnJlc3VsdC5wcm9jZXNzb3JcbiAgfVxuXG4gIGdldCByb290KCkge1xuICAgIHJldHVybiB0aGlzLnN5bmMoKS5yb290XG4gIH1cblxuICBnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG4gICAgcmV0dXJuICdMYXp5UmVzdWx0J1xuICB9XG59XG5cbkxhenlSZXN1bHQucmVnaXN0ZXJQb3N0Y3NzID0gZGVwZW5kYW50ID0+IHtcbiAgcG9zdGNzcyA9IGRlcGVuZGFudFxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IExhenlSZXN1bHRcbkxhenlSZXN1bHQuZGVmYXVsdCA9IExhenlSZXN1bHRcblxuUm9vdC5yZWdpc3RlckxhenlSZXN1bHQoTGF6eVJlc3VsdClcbkRvY3VtZW50LnJlZ2lzdGVyTGF6eVJlc3VsdChMYXp5UmVzdWx0KVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaLElBQUk7RUFBRUEsT0FBTztFQUFFQztBQUFHLENBQUMsR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUMxQyxJQUFJQyxZQUFZLEdBQUdELE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUM3QyxJQUFJRSxTQUFTLEdBQUdGLE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDdEMsSUFBSUcsU0FBUyxHQUFHSCxPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ3RDLElBQUlJLFFBQVEsR0FBR0osT0FBTyxDQUFDLFlBQVksQ0FBQztBQUNwQyxJQUFJSyxRQUFRLEdBQUdMLE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDckMsSUFBSU0sTUFBTSxHQUFHTixPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ2hDLElBQUlPLEtBQUssR0FBR1AsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUM5QixJQUFJUSxJQUFJLEdBQUdSLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFFNUIsTUFBTVMsa0JBQWtCLEdBQUc7RUFDekJDLE1BQU0sRUFBRSxRQUFRO0VBQ2hCQyxPQUFPLEVBQUUsU0FBUztFQUNsQkMsSUFBSSxFQUFFLGFBQWE7RUFDbkJDLFFBQVEsRUFBRSxVQUFVO0VBQ3BCQyxJQUFJLEVBQUUsTUFBTTtFQUNaQyxJQUFJLEVBQUU7QUFDUixDQUFDO0FBRUQsTUFBTUMsWUFBWSxHQUFHO0VBQ25CQyxNQUFNLEVBQUUsSUFBSTtFQUNaQyxVQUFVLEVBQUUsSUFBSTtFQUNoQkMsT0FBTyxFQUFFLElBQUk7RUFDYkMsV0FBVyxFQUFFLElBQUk7RUFDakJDLFdBQVcsRUFBRSxJQUFJO0VBQ2pCQyxlQUFlLEVBQUUsSUFBSTtFQUNyQmxCLFFBQVEsRUFBRSxJQUFJO0VBQ2RtQixZQUFZLEVBQUUsSUFBSTtFQUNsQkMsSUFBSSxFQUFFLElBQUk7RUFDVkMsUUFBUSxFQUFFLElBQUk7RUFDZEMsYUFBYSxFQUFFLElBQUk7RUFDbkJDLE9BQU8sRUFBRSxJQUFJO0VBQ2JuQixJQUFJLEVBQUUsSUFBSTtFQUNWb0IsUUFBUSxFQUFFLElBQUk7RUFDZEMsSUFBSSxFQUFFLElBQUk7RUFDVkMsUUFBUSxFQUFFO0FBQ1osQ0FBQztBQUVELE1BQU1DLFlBQVksR0FBRztFQUNuQlAsSUFBSSxFQUFFLElBQUk7RUFDVkUsYUFBYSxFQUFFLElBQUk7RUFDbkJDLE9BQU8sRUFBRTtBQUNYLENBQUM7QUFFRCxNQUFNSyxRQUFRLEdBQUcsQ0FBQztBQUVsQixTQUFTQyxTQUFTQSxDQUFDQyxHQUFHLEVBQUU7RUFDdEIsT0FBTyxPQUFPQSxHQUFHLEtBQUssUUFBUSxJQUFJLE9BQU9BLEdBQUcsQ0FBQ0MsSUFBSSxLQUFLLFVBQVU7QUFDbEU7QUFFQSxTQUFTQyxTQUFTQSxDQUFDQyxJQUFJLEVBQUU7RUFDdkIsSUFBSUMsR0FBRyxHQUFHLEtBQUs7RUFDZixJQUFJQyxJQUFJLEdBQUc5QixrQkFBa0IsQ0FBQzRCLElBQUksQ0FBQ0UsSUFBSSxDQUFDO0VBQ3hDLElBQUlGLElBQUksQ0FBQ0UsSUFBSSxLQUFLLE1BQU0sRUFBRTtJQUN4QkQsR0FBRyxHQUFHRCxJQUFJLENBQUNHLElBQUksQ0FBQ0MsV0FBVyxDQUFDLENBQUM7RUFDL0IsQ0FBQyxNQUFNLElBQUlKLElBQUksQ0FBQ0UsSUFBSSxLQUFLLFFBQVEsRUFBRTtJQUNqQ0QsR0FBRyxHQUFHRCxJQUFJLENBQUNLLElBQUksQ0FBQ0QsV0FBVyxDQUFDLENBQUM7RUFDL0I7RUFFQSxJQUFJSCxHQUFHLElBQUlELElBQUksQ0FBQ00sTUFBTSxFQUFFO0lBQ3RCLE9BQU8sQ0FDTEosSUFBSSxFQUNKQSxJQUFJLEdBQUcsR0FBRyxHQUFHRCxHQUFHLEVBQ2hCTixRQUFRLEVBQ1JPLElBQUksR0FBRyxNQUFNLEVBQ2JBLElBQUksR0FBRyxPQUFPLEdBQUdELEdBQUcsQ0FDckI7RUFDSCxDQUFDLE1BQU0sSUFBSUEsR0FBRyxFQUFFO0lBQ2QsT0FBTyxDQUFDQyxJQUFJLEVBQUVBLElBQUksR0FBRyxHQUFHLEdBQUdELEdBQUcsRUFBRUMsSUFBSSxHQUFHLE1BQU0sRUFBRUEsSUFBSSxHQUFHLE9BQU8sR0FBR0QsR0FBRyxDQUFDO0VBQ3RFLENBQUMsTUFBTSxJQUFJRCxJQUFJLENBQUNNLE1BQU0sRUFBRTtJQUN0QixPQUFPLENBQUNKLElBQUksRUFBRVAsUUFBUSxFQUFFTyxJQUFJLEdBQUcsTUFBTSxDQUFDO0VBQ3hDLENBQUMsTUFBTTtJQUNMLE9BQU8sQ0FBQ0EsSUFBSSxFQUFFQSxJQUFJLEdBQUcsTUFBTSxDQUFDO0VBQzlCO0FBQ0Y7QUFFQSxTQUFTSyxPQUFPQSxDQUFDUCxJQUFJLEVBQUU7RUFDckIsSUFBSVEsTUFBTTtFQUNWLElBQUlSLElBQUksQ0FBQ0UsSUFBSSxLQUFLLFVBQVUsRUFBRTtJQUM1Qk0sTUFBTSxHQUFHLENBQUMsVUFBVSxFQUFFYixRQUFRLEVBQUUsY0FBYyxDQUFDO0VBQ2pELENBQUMsTUFBTSxJQUFJSyxJQUFJLENBQUNFLElBQUksS0FBSyxNQUFNLEVBQUU7SUFDL0JNLE1BQU0sR0FBRyxDQUFDLE1BQU0sRUFBRWIsUUFBUSxFQUFFLFVBQVUsQ0FBQztFQUN6QyxDQUFDLE1BQU07SUFDTGEsTUFBTSxHQUFHVCxTQUFTLENBQUNDLElBQUksQ0FBQztFQUMxQjtFQUVBLE9BQU87SUFDTFMsVUFBVSxFQUFFLENBQUM7SUFDYkQsTUFBTTtJQUNORSxRQUFRLEVBQUUsQ0FBQztJQUNYVixJQUFJO0lBQ0pXLFlBQVksRUFBRSxDQUFDO0lBQ2ZDLFFBQVEsRUFBRTtFQUNaLENBQUM7QUFDSDtBQUVBLFNBQVNDLFVBQVVBLENBQUNiLElBQUksRUFBRTtFQUN4QkEsSUFBSSxDQUFDdkMsT0FBTyxDQUFDLEdBQUcsS0FBSztFQUNyQixJQUFJdUMsSUFBSSxDQUFDYyxLQUFLLEVBQUVkLElBQUksQ0FBQ2MsS0FBSyxDQUFDQyxPQUFPLENBQUNDLENBQUMsSUFBSUgsVUFBVSxDQUFDRyxDQUFDLENBQUMsQ0FBQztFQUN0RCxPQUFPaEIsSUFBSTtBQUNiO0FBRUEsSUFBSWlCLE9BQU8sR0FBRyxDQUFDLENBQUM7QUFFaEIsTUFBTUMsVUFBVSxDQUFDO0VBQ2ZDLFdBQVdBLENBQUNDLFNBQVMsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUU7SUFDaEMsSUFBSSxDQUFDQyxXQUFXLEdBQUcsS0FBSztJQUN4QixJQUFJLENBQUNDLFNBQVMsR0FBRyxLQUFLO0lBRXRCLElBQUkvQyxJQUFJO0lBQ1IsSUFDRSxPQUFPNEMsR0FBRyxLQUFLLFFBQVEsSUFDdkJBLEdBQUcsS0FBSyxJQUFJLEtBQ1hBLEdBQUcsQ0FBQ25CLElBQUksS0FBSyxNQUFNLElBQUltQixHQUFHLENBQUNuQixJQUFJLEtBQUssVUFBVSxDQUFDLEVBQ2hEO01BQ0F6QixJQUFJLEdBQUdvQyxVQUFVLENBQUNRLEdBQUcsQ0FBQztJQUN4QixDQUFDLE1BQU0sSUFBSUEsR0FBRyxZQUFZSCxVQUFVLElBQUlHLEdBQUcsWUFBWXBELE1BQU0sRUFBRTtNQUM3RFEsSUFBSSxHQUFHb0MsVUFBVSxDQUFDUSxHQUFHLENBQUM1QyxJQUFJLENBQUM7TUFDM0IsSUFBSTRDLEdBQUcsQ0FBQ0ksR0FBRyxFQUFFO1FBQ1gsSUFBSSxPQUFPSCxJQUFJLENBQUNHLEdBQUcsS0FBSyxXQUFXLEVBQUVILElBQUksQ0FBQ0csR0FBRyxHQUFHLENBQUMsQ0FBQztRQUNsRCxJQUFJLENBQUNILElBQUksQ0FBQ0csR0FBRyxDQUFDQyxNQUFNLEVBQUVKLElBQUksQ0FBQ0csR0FBRyxDQUFDQyxNQUFNLEdBQUcsS0FBSztRQUM3Q0osSUFBSSxDQUFDRyxHQUFHLENBQUNFLElBQUksR0FBR04sR0FBRyxDQUFDSSxHQUFHO01BQ3pCO0lBQ0YsQ0FBQyxNQUFNO01BQ0wsSUFBSUcsTUFBTSxHQUFHMUQsS0FBSztNQUNsQixJQUFJb0QsSUFBSSxDQUFDTyxNQUFNLEVBQUVELE1BQU0sR0FBR04sSUFBSSxDQUFDTyxNQUFNLENBQUMzRCxLQUFLO01BQzNDLElBQUlvRCxJQUFJLENBQUNNLE1BQU0sRUFBRUEsTUFBTSxHQUFHTixJQUFJLENBQUNNLE1BQU07TUFDckMsSUFBSUEsTUFBTSxDQUFDMUQsS0FBSyxFQUFFMEQsTUFBTSxHQUFHQSxNQUFNLENBQUMxRCxLQUFLO01BRXZDLElBQUk7UUFDRk8sSUFBSSxHQUFHbUQsTUFBTSxDQUFDUCxHQUFHLEVBQUVDLElBQUksQ0FBQztNQUMxQixDQUFDLENBQUMsT0FBT1EsS0FBSyxFQUFFO1FBQ2QsSUFBSSxDQUFDTixTQUFTLEdBQUcsSUFBSTtRQUNyQixJQUFJLENBQUNNLEtBQUssR0FBR0EsS0FBSztNQUNwQjtNQUVBLElBQUlyRCxJQUFJLElBQUksQ0FBQ0EsSUFBSSxDQUFDZixFQUFFLENBQUMsRUFBRTtRQUNyQjtRQUNBSSxTQUFTLENBQUNpRSxPQUFPLENBQUN0RCxJQUFJLENBQUM7TUFDekI7SUFDRjtJQUVBLElBQUksQ0FBQ3VELE1BQU0sR0FBRyxJQUFJL0QsTUFBTSxDQUFDbUQsU0FBUyxFQUFFM0MsSUFBSSxFQUFFNkMsSUFBSSxDQUFDO0lBQy9DLElBQUksQ0FBQ1csT0FBTyxHQUFHO01BQUUsR0FBR2hCLE9BQU87TUFBRUEsT0FBTztNQUFFZSxNQUFNLEVBQUUsSUFBSSxDQUFDQTtJQUFPLENBQUM7SUFDM0QsSUFBSSxDQUFDRSxPQUFPLEdBQUcsSUFBSSxDQUFDZCxTQUFTLENBQUNjLE9BQU8sQ0FBQ1QsR0FBRyxDQUFDVSxNQUFNLElBQUk7TUFDbEQsSUFBSSxPQUFPQSxNQUFNLEtBQUssUUFBUSxJQUFJQSxNQUFNLENBQUM3QyxPQUFPLEVBQUU7UUFDaEQsT0FBTztVQUFFLEdBQUc2QyxNQUFNO1VBQUUsR0FBR0EsTUFBTSxDQUFDN0MsT0FBTyxDQUFDLElBQUksQ0FBQzBDLE1BQU07UUFBRSxDQUFDO01BQ3RELENBQUMsTUFBTTtRQUNMLE9BQU9HLE1BQU07TUFDZjtJQUNGLENBQUMsQ0FBQztFQUNKO0VBRUFDLEtBQUtBLENBQUEsRUFBRztJQUNOLElBQUksSUFBSSxDQUFDTixLQUFLLEVBQUUsT0FBT08sT0FBTyxDQUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDUixLQUFLLENBQUM7SUFDakQsSUFBSSxJQUFJLENBQUNOLFNBQVMsRUFBRSxPQUFPYSxPQUFPLENBQUNFLE9BQU8sQ0FBQyxJQUFJLENBQUNQLE1BQU0sQ0FBQztJQUN2RCxJQUFJLENBQUMsSUFBSSxDQUFDUSxVQUFVLEVBQUU7TUFDcEIsSUFBSSxDQUFDQSxVQUFVLEdBQUcsSUFBSSxDQUFDQyxRQUFRLENBQUMsQ0FBQztJQUNuQztJQUNBLE9BQU8sSUFBSSxDQUFDRCxVQUFVO0VBQ3hCO0VBRUFFLEtBQUtBLENBQUNDLFVBQVUsRUFBRTtJQUNoQixPQUFPLElBQUksQ0FBQ1AsS0FBSyxDQUFDLENBQUMsQ0FBQ00sS0FBSyxDQUFDQyxVQUFVLENBQUM7RUFDdkM7RUFFQUMsT0FBT0EsQ0FBQ0MsU0FBUyxFQUFFO0lBQ2pCLE9BQU8sSUFBSSxDQUFDVCxLQUFLLENBQUMsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDK0MsU0FBUyxFQUFFQSxTQUFTLENBQUM7RUFDaEQ7RUFFQUMsYUFBYUEsQ0FBQSxFQUFHO0lBQ2QsTUFBTSxJQUFJQyxLQUFLLENBQUMsc0RBQXNELENBQUM7RUFDekU7RUFFQUMsV0FBV0EsQ0FBQ2xCLEtBQUssRUFBRTlCLElBQUksRUFBRTtJQUN2QixJQUFJbUMsTUFBTSxHQUFHLElBQUksQ0FBQ0gsTUFBTSxDQUFDaUIsVUFBVTtJQUNuQyxJQUFJO01BQ0YsSUFBSWpELElBQUksRUFBRUEsSUFBSSxDQUFDa0QsVUFBVSxDQUFDcEIsS0FBSyxDQUFDO01BQ2hDLElBQUksQ0FBQ0EsS0FBSyxHQUFHQSxLQUFLO01BQ2xCLElBQUlBLEtBQUssQ0FBQ3pCLElBQUksS0FBSyxnQkFBZ0IsSUFBSSxDQUFDeUIsS0FBSyxDQUFDSyxNQUFNLEVBQUU7UUFDcERMLEtBQUssQ0FBQ0ssTUFBTSxHQUFHQSxNQUFNLENBQUM5QyxhQUFhO1FBQ25DeUMsS0FBSyxDQUFDcUIsVUFBVSxDQUFDLENBQUM7TUFDcEIsQ0FBQyxNQUFNLElBQUloQixNQUFNLENBQUNpQixjQUFjLEVBQUU7UUFDaEMsSUFBSUMsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxZQUFZLEVBQUU7VUFDekMsSUFBSUMsVUFBVSxHQUFHckIsTUFBTSxDQUFDOUMsYUFBYTtVQUNyQyxJQUFJb0UsU0FBUyxHQUFHdEIsTUFBTSxDQUFDaUIsY0FBYztVQUNyQyxJQUFJTSxVQUFVLEdBQUcsSUFBSSxDQUFDMUIsTUFBTSxDQUFDWixTQUFTLENBQUN1QyxPQUFPO1VBQzlDLElBQUlDLENBQUMsR0FBR0gsU0FBUyxDQUFDSSxLQUFLLENBQUMsR0FBRyxDQUFDO1VBQzVCLElBQUlDLENBQUMsR0FBR0osVUFBVSxDQUFDRyxLQUFLLENBQUMsR0FBRyxDQUFDO1VBRTdCLElBQUlELENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBS0UsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJQyxRQUFRLENBQUNILENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHRyxRQUFRLENBQUNELENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ3BEO1lBQ0FFLE9BQU8sQ0FBQ2xDLEtBQUssQ0FDWCwwREFBMEQsR0FDeEQsYUFBYSxHQUNiNEIsVUFBVSxHQUNWLFFBQVEsR0FDUkYsVUFBVSxHQUNWLFFBQVEsR0FDUkMsU0FBUyxHQUNULGtEQUNKLENBQUM7VUFDSDtRQUNGO01BQ0Y7SUFDRixDQUFDLENBQUMsT0FBT1EsR0FBRyxFQUFFO01BQ1o7TUFDQTtNQUNBLElBQUlELE9BQU8sSUFBSUEsT0FBTyxDQUFDbEMsS0FBSyxFQUFFa0MsT0FBTyxDQUFDbEMsS0FBSyxDQUFDbUMsR0FBRyxDQUFDO0lBQ2xEO0lBQ0EsT0FBT25DLEtBQUs7RUFDZDtFQUVBb0MsZUFBZUEsQ0FBQSxFQUFHO0lBQ2hCLElBQUksQ0FBQ0MsU0FBUyxHQUFHLENBQUMsQ0FBQztJQUNuQixJQUFJQyxHQUFHLEdBQUdBLENBQUNqQyxNQUFNLEVBQUVqQyxJQUFJLEVBQUVtRSxFQUFFLEtBQUs7TUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQ0YsU0FBUyxDQUFDakUsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDaUUsU0FBUyxDQUFDakUsSUFBSSxDQUFDLEdBQUcsRUFBRTtNQUNwRCxJQUFJLENBQUNpRSxTQUFTLENBQUNqRSxJQUFJLENBQUMsQ0FBQ29FLElBQUksQ0FBQyxDQUFDbkMsTUFBTSxFQUFFa0MsRUFBRSxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUNELEtBQUssSUFBSWxDLE1BQU0sSUFBSSxJQUFJLENBQUNELE9BQU8sRUFBRTtNQUMvQixJQUFJLE9BQU9DLE1BQU0sS0FBSyxRQUFRLEVBQUU7UUFDOUIsS0FBSyxJQUFJb0MsS0FBSyxJQUFJcEMsTUFBTSxFQUFFO1VBQ3hCLElBQUksQ0FBQ3hELFlBQVksQ0FBQzRGLEtBQUssQ0FBQyxJQUFJLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDRCxLQUFLLENBQUMsRUFBRTtZQUNoRCxNQUFNLElBQUl4QixLQUFLLENBQ2IsaUJBQWlCd0IsS0FBSyxPQUFPcEMsTUFBTSxDQUFDOUMsYUFBYSxJQUFJLEdBQ25ELDBCQUEwQixJQUFJLENBQUMrQixTQUFTLENBQUN1QyxPQUFPLFFBQ3BELENBQUM7VUFDSDtVQUNBLElBQUksQ0FBQ2pFLFlBQVksQ0FBQzZFLEtBQUssQ0FBQyxFQUFFO1lBQ3hCLElBQUksT0FBT3BDLE1BQU0sQ0FBQ29DLEtBQUssQ0FBQyxLQUFLLFFBQVEsRUFBRTtjQUNyQyxLQUFLLElBQUlFLE1BQU0sSUFBSXRDLE1BQU0sQ0FBQ29DLEtBQUssQ0FBQyxFQUFFO2dCQUNoQyxJQUFJRSxNQUFNLEtBQUssR0FBRyxFQUFFO2tCQUNsQkwsR0FBRyxDQUFDakMsTUFBTSxFQUFFb0MsS0FBSyxFQUFFcEMsTUFBTSxDQUFDb0MsS0FBSyxDQUFDLENBQUNFLE1BQU0sQ0FBQyxDQUFDO2dCQUMzQyxDQUFDLE1BQU07a0JBQ0xMLEdBQUcsQ0FDRGpDLE1BQU0sRUFDTm9DLEtBQUssR0FBRyxHQUFHLEdBQUdFLE1BQU0sQ0FBQ3JFLFdBQVcsQ0FBQyxDQUFDLEVBQ2xDK0IsTUFBTSxDQUFDb0MsS0FBSyxDQUFDLENBQUNFLE1BQU0sQ0FDdEIsQ0FBQztnQkFDSDtjQUNGO1lBQ0YsQ0FBQyxNQUFNLElBQUksT0FBT3RDLE1BQU0sQ0FBQ29DLEtBQUssQ0FBQyxLQUFLLFVBQVUsRUFBRTtjQUM5Q0gsR0FBRyxDQUFDakMsTUFBTSxFQUFFb0MsS0FBSyxFQUFFcEMsTUFBTSxDQUFDb0MsS0FBSyxDQUFDLENBQUM7WUFDbkM7VUFDRjtRQUNGO01BQ0Y7SUFDRjtJQUNBLElBQUksQ0FBQ0csV0FBVyxHQUFHQyxNQUFNLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUNULFNBQVMsQ0FBQyxDQUFDVSxNQUFNLEdBQUcsQ0FBQztFQUMzRDtFQUVBLE1BQU1wQyxRQUFRQSxDQUFBLEVBQUc7SUFDZixJQUFJLENBQUNOLE1BQU0sR0FBRyxDQUFDO0lBQ2YsS0FBSyxJQUFJbkIsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ2tCLE9BQU8sQ0FBQzJDLE1BQU0sRUFBRTdELENBQUMsRUFBRSxFQUFFO01BQzVDLElBQUltQixNQUFNLEdBQUcsSUFBSSxDQUFDRCxPQUFPLENBQUNsQixDQUFDLENBQUM7TUFDNUIsSUFBSThELE9BQU8sR0FBRyxJQUFJLENBQUNDLFNBQVMsQ0FBQzVDLE1BQU0sQ0FBQztNQUNwQyxJQUFJdkMsU0FBUyxDQUFDa0YsT0FBTyxDQUFDLEVBQUU7UUFDdEIsSUFBSTtVQUNGLE1BQU1BLE9BQU87UUFDZixDQUFDLENBQUMsT0FBT2hELEtBQUssRUFBRTtVQUNkLE1BQU0sSUFBSSxDQUFDa0IsV0FBVyxDQUFDbEIsS0FBSyxDQUFDO1FBQy9CO01BQ0Y7SUFDRjtJQUVBLElBQUksQ0FBQ29DLGVBQWUsQ0FBQyxDQUFDO0lBQ3RCLElBQUksSUFBSSxDQUFDUSxXQUFXLEVBQUU7TUFDcEIsSUFBSWpHLElBQUksR0FBRyxJQUFJLENBQUN1RCxNQUFNLENBQUN2RCxJQUFJO01BQzNCLE9BQU8sQ0FBQ0EsSUFBSSxDQUFDaEIsT0FBTyxDQUFDLEVBQUU7UUFDckJnQixJQUFJLENBQUNoQixPQUFPLENBQUMsR0FBRyxJQUFJO1FBQ3BCLElBQUl1SCxLQUFLLEdBQUcsQ0FBQ3pFLE9BQU8sQ0FBQzlCLElBQUksQ0FBQyxDQUFDO1FBQzNCLE9BQU91RyxLQUFLLENBQUNILE1BQU0sR0FBRyxDQUFDLEVBQUU7VUFDdkIsSUFBSUMsT0FBTyxHQUFHLElBQUksQ0FBQ0csU0FBUyxDQUFDRCxLQUFLLENBQUM7VUFDbkMsSUFBSXBGLFNBQVMsQ0FBQ2tGLE9BQU8sQ0FBQyxFQUFFO1lBQ3RCLElBQUk7Y0FDRixNQUFNQSxPQUFPO1lBQ2YsQ0FBQyxDQUFDLE9BQU9JLENBQUMsRUFBRTtjQUNWLElBQUlsRixJQUFJLEdBQUdnRixLQUFLLENBQUNBLEtBQUssQ0FBQ0gsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDN0UsSUFBSTtjQUN2QyxNQUFNLElBQUksQ0FBQ2dELFdBQVcsQ0FBQ2tDLENBQUMsRUFBRWxGLElBQUksQ0FBQztZQUNqQztVQUNGO1FBQ0Y7TUFDRjtNQUVBLElBQUksSUFBSSxDQUFDbUUsU0FBUyxDQUFDL0UsUUFBUSxFQUFFO1FBQzNCLEtBQUssSUFBSSxDQUFDK0MsTUFBTSxFQUFFZ0QsT0FBTyxDQUFDLElBQUksSUFBSSxDQUFDaEIsU0FBUyxDQUFDL0UsUUFBUSxFQUFFO1VBQ3JELElBQUksQ0FBQzRDLE1BQU0sQ0FBQ2lCLFVBQVUsR0FBR2QsTUFBTTtVQUMvQixJQUFJO1lBQ0YsSUFBSTFELElBQUksQ0FBQ3lCLElBQUksS0FBSyxVQUFVLEVBQUU7Y0FDNUIsSUFBSWtGLEtBQUssR0FBRzNHLElBQUksQ0FBQ3FDLEtBQUssQ0FBQ1csR0FBRyxDQUFDNEQsT0FBTyxJQUNoQ0YsT0FBTyxDQUFDRSxPQUFPLEVBQUUsSUFBSSxDQUFDcEQsT0FBTyxDQUMvQixDQUFDO2NBRUQsTUFBTUksT0FBTyxDQUFDaUQsR0FBRyxDQUFDRixLQUFLLENBQUM7WUFDMUIsQ0FBQyxNQUFNO2NBQ0wsTUFBTUQsT0FBTyxDQUFDMUcsSUFBSSxFQUFFLElBQUksQ0FBQ3dELE9BQU8sQ0FBQztZQUNuQztVQUNGLENBQUMsQ0FBQyxPQUFPaUQsQ0FBQyxFQUFFO1lBQ1YsTUFBTSxJQUFJLENBQUNsQyxXQUFXLENBQUNrQyxDQUFDLENBQUM7VUFDM0I7UUFDRjtNQUNGO0lBQ0Y7SUFFQSxJQUFJLENBQUMxRCxTQUFTLEdBQUcsSUFBSTtJQUNyQixPQUFPLElBQUksQ0FBQzNELFNBQVMsQ0FBQyxDQUFDO0VBQ3pCO0VBRUFrSCxTQUFTQSxDQUFDNUMsTUFBTSxFQUFFO0lBQ2hCLElBQUksQ0FBQ0gsTUFBTSxDQUFDaUIsVUFBVSxHQUFHZCxNQUFNO0lBQy9CLElBQUk7TUFDRixJQUFJLE9BQU9BLE1BQU0sS0FBSyxRQUFRLElBQUlBLE1BQU0sQ0FBQ2hELElBQUksRUFBRTtRQUM3QyxJQUFJLElBQUksQ0FBQzZDLE1BQU0sQ0FBQ3ZELElBQUksQ0FBQ3lCLElBQUksS0FBSyxVQUFVLEVBQUU7VUFDeEMsSUFBSWtGLEtBQUssR0FBRyxJQUFJLENBQUNwRCxNQUFNLENBQUN2RCxJQUFJLENBQUNxQyxLQUFLLENBQUNXLEdBQUcsQ0FBQ2hELElBQUksSUFDekMwRCxNQUFNLENBQUNoRCxJQUFJLENBQUNWLElBQUksRUFBRSxJQUFJLENBQUN3RCxPQUFPLENBQ2hDLENBQUM7VUFFRCxJQUFJckMsU0FBUyxDQUFDd0YsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDdkIsT0FBTy9DLE9BQU8sQ0FBQ2lELEdBQUcsQ0FBQ0YsS0FBSyxDQUFDO1VBQzNCO1VBRUEsT0FBT0EsS0FBSztRQUNkO1FBRUEsT0FBT2pELE1BQU0sQ0FBQ2hELElBQUksQ0FBQyxJQUFJLENBQUM2QyxNQUFNLENBQUN2RCxJQUFJLEVBQUUsSUFBSSxDQUFDd0QsT0FBTyxDQUFDO01BQ3BELENBQUMsTUFBTSxJQUFJLE9BQU9FLE1BQU0sS0FBSyxVQUFVLEVBQUU7UUFDdkMsT0FBT0EsTUFBTSxDQUFDLElBQUksQ0FBQ0gsTUFBTSxDQUFDdkQsSUFBSSxFQUFFLElBQUksQ0FBQ3VELE1BQU0sQ0FBQztNQUM5QztJQUNGLENBQUMsQ0FBQyxPQUFPRixLQUFLLEVBQUU7TUFDZCxNQUFNLElBQUksQ0FBQ2tCLFdBQVcsQ0FBQ2xCLEtBQUssQ0FBQztJQUMvQjtFQUNGO0VBRUFqRSxTQUFTQSxDQUFBLEVBQUc7SUFDVixJQUFJLElBQUksQ0FBQ2lFLEtBQUssRUFBRSxNQUFNLElBQUksQ0FBQ0EsS0FBSztJQUNoQyxJQUFJLElBQUksQ0FBQ1AsV0FBVyxFQUFFLE9BQU8sSUFBSSxDQUFDUyxNQUFNO0lBQ3hDLElBQUksQ0FBQ1QsV0FBVyxHQUFHLElBQUk7SUFFdkIsSUFBSSxDQUFDZ0UsSUFBSSxDQUFDLENBQUM7SUFFWCxJQUFJakUsSUFBSSxHQUFHLElBQUksQ0FBQ1UsTUFBTSxDQUFDVixJQUFJO0lBQzNCLElBQUlrRSxHQUFHLEdBQUczSCxTQUFTO0lBQ25CLElBQUl5RCxJQUFJLENBQUNPLE1BQU0sRUFBRTJELEdBQUcsR0FBR2xFLElBQUksQ0FBQ08sTUFBTSxDQUFDaEUsU0FBUztJQUM1QyxJQUFJeUQsSUFBSSxDQUFDbUUsV0FBVyxFQUFFRCxHQUFHLEdBQUdsRSxJQUFJLENBQUNtRSxXQUFXO0lBQzVDLElBQUlELEdBQUcsQ0FBQzNILFNBQVMsRUFBRTJILEdBQUcsR0FBR0EsR0FBRyxDQUFDM0gsU0FBUztJQUV0QyxJQUFJNEQsR0FBRyxHQUFHLElBQUk3RCxZQUFZLENBQUM0SCxHQUFHLEVBQUUsSUFBSSxDQUFDeEQsTUFBTSxDQUFDdkQsSUFBSSxFQUFFLElBQUksQ0FBQ3VELE1BQU0sQ0FBQ1YsSUFBSSxDQUFDO0lBQ25FLElBQUlvRSxJQUFJLEdBQUdqRSxHQUFHLENBQUNrRSxRQUFRLENBQUMsQ0FBQztJQUN6QixJQUFJLENBQUMzRCxNQUFNLENBQUNYLEdBQUcsR0FBR3FFLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDekIsSUFBSSxDQUFDMUQsTUFBTSxDQUFDUCxHQUFHLEdBQUdpRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBRXpCLE9BQU8sSUFBSSxDQUFDMUQsTUFBTTtFQUNwQjtFQUVBdUQsSUFBSUEsQ0FBQSxFQUFHO0lBQ0wsSUFBSSxJQUFJLENBQUN6RCxLQUFLLEVBQUUsTUFBTSxJQUFJLENBQUNBLEtBQUs7SUFDaEMsSUFBSSxJQUFJLENBQUNOLFNBQVMsRUFBRSxPQUFPLElBQUksQ0FBQ1EsTUFBTTtJQUN0QyxJQUFJLENBQUNSLFNBQVMsR0FBRyxJQUFJO0lBRXJCLElBQUksSUFBSSxDQUFDZ0IsVUFBVSxFQUFFO01BQ25CLE1BQU0sSUFBSSxDQUFDTSxhQUFhLENBQUMsQ0FBQztJQUM1QjtJQUVBLEtBQUssSUFBSVgsTUFBTSxJQUFJLElBQUksQ0FBQ0QsT0FBTyxFQUFFO01BQy9CLElBQUk0QyxPQUFPLEdBQUcsSUFBSSxDQUFDQyxTQUFTLENBQUM1QyxNQUFNLENBQUM7TUFDcEMsSUFBSXZDLFNBQVMsQ0FBQ2tGLE9BQU8sQ0FBQyxFQUFFO1FBQ3RCLE1BQU0sSUFBSSxDQUFDaEMsYUFBYSxDQUFDLENBQUM7TUFDNUI7SUFDRjtJQUVBLElBQUksQ0FBQ29CLGVBQWUsQ0FBQyxDQUFDO0lBQ3RCLElBQUksSUFBSSxDQUFDUSxXQUFXLEVBQUU7TUFDcEIsSUFBSWpHLElBQUksR0FBRyxJQUFJLENBQUN1RCxNQUFNLENBQUN2RCxJQUFJO01BQzNCLE9BQU8sQ0FBQ0EsSUFBSSxDQUFDaEIsT0FBTyxDQUFDLEVBQUU7UUFDckJnQixJQUFJLENBQUNoQixPQUFPLENBQUMsR0FBRyxJQUFJO1FBQ3BCLElBQUksQ0FBQ21JLFFBQVEsQ0FBQ25ILElBQUksQ0FBQztNQUNyQjtNQUNBLElBQUksSUFBSSxDQUFDMEYsU0FBUyxDQUFDL0UsUUFBUSxFQUFFO1FBQzNCLElBQUlYLElBQUksQ0FBQ3lCLElBQUksS0FBSyxVQUFVLEVBQUU7VUFDNUIsS0FBSyxJQUFJbUYsT0FBTyxJQUFJNUcsSUFBSSxDQUFDcUMsS0FBSyxFQUFFO1lBQzlCLElBQUksQ0FBQytFLFNBQVMsQ0FBQyxJQUFJLENBQUMxQixTQUFTLENBQUMvRSxRQUFRLEVBQUVpRyxPQUFPLENBQUM7VUFDbEQ7UUFDRixDQUFDLE1BQU07VUFDTCxJQUFJLENBQUNRLFNBQVMsQ0FBQyxJQUFJLENBQUMxQixTQUFTLENBQUMvRSxRQUFRLEVBQUVYLElBQUksQ0FBQztRQUMvQztNQUNGO0lBQ0Y7SUFFQSxPQUFPLElBQUksQ0FBQ3VELE1BQU07RUFDcEI7RUFFQWxDLElBQUlBLENBQUNnRyxXQUFXLEVBQUVuRCxVQUFVLEVBQUU7SUFDNUIsSUFBSVUsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxZQUFZLEVBQUU7TUFDekMsSUFBSSxFQUFFLE1BQU0sSUFBSSxJQUFJLENBQUNqQyxJQUFJLENBQUMsRUFBRTtRQUMxQnRELFFBQVEsQ0FDTixnRUFBZ0UsR0FDOUQsaUVBQWlFLEdBQ2pFLDRDQUNKLENBQUM7TUFDSDtJQUNGO0lBQ0EsT0FBTyxJQUFJLENBQUNvRSxLQUFLLENBQUMsQ0FBQyxDQUFDdEMsSUFBSSxDQUFDZ0csV0FBVyxFQUFFbkQsVUFBVSxDQUFDO0VBQ25EO0VBRUFvRCxRQUFRQSxDQUFBLEVBQUc7SUFDVCxPQUFPLElBQUksQ0FBQzFFLEdBQUc7RUFDakI7RUFFQXdFLFNBQVNBLENBQUNqRixRQUFRLEVBQUVaLElBQUksRUFBRTtJQUN4QixLQUFLLElBQUksQ0FBQ21DLE1BQU0sRUFBRWdELE9BQU8sQ0FBQyxJQUFJdkUsUUFBUSxFQUFFO01BQ3RDLElBQUksQ0FBQ29CLE1BQU0sQ0FBQ2lCLFVBQVUsR0FBR2QsTUFBTTtNQUMvQixJQUFJMkMsT0FBTztNQUNYLElBQUk7UUFDRkEsT0FBTyxHQUFHSyxPQUFPLENBQUNuRixJQUFJLEVBQUUsSUFBSSxDQUFDaUMsT0FBTyxDQUFDO01BQ3ZDLENBQUMsQ0FBQyxPQUFPaUQsQ0FBQyxFQUFFO1FBQ1YsTUFBTSxJQUFJLENBQUNsQyxXQUFXLENBQUNrQyxDQUFDLEVBQUVsRixJQUFJLENBQUNnRyxPQUFPLENBQUM7TUFDekM7TUFDQSxJQUFJaEcsSUFBSSxDQUFDRSxJQUFJLEtBQUssTUFBTSxJQUFJRixJQUFJLENBQUNFLElBQUksS0FBSyxVQUFVLElBQUksQ0FBQ0YsSUFBSSxDQUFDaUcsTUFBTSxFQUFFO1FBQ3BFLE9BQU8sSUFBSTtNQUNiO01BQ0EsSUFBSXJHLFNBQVMsQ0FBQ2tGLE9BQU8sQ0FBQyxFQUFFO1FBQ3RCLE1BQU0sSUFBSSxDQUFDaEMsYUFBYSxDQUFDLENBQUM7TUFDNUI7SUFDRjtFQUNGO0VBRUFtQyxTQUFTQSxDQUFDRCxLQUFLLEVBQUU7SUFDZixJQUFJa0IsS0FBSyxHQUFHbEIsS0FBSyxDQUFDQSxLQUFLLENBQUNILE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDbkMsSUFBSTtNQUFFN0UsSUFBSTtNQUFFWTtJQUFTLENBQUMsR0FBR3NGLEtBQUs7SUFFOUIsSUFBSWxHLElBQUksQ0FBQ0UsSUFBSSxLQUFLLE1BQU0sSUFBSUYsSUFBSSxDQUFDRSxJQUFJLEtBQUssVUFBVSxJQUFJLENBQUNGLElBQUksQ0FBQ2lHLE1BQU0sRUFBRTtNQUNwRWpCLEtBQUssQ0FBQ21CLEdBQUcsQ0FBQyxDQUFDO01BQ1g7SUFDRjtJQUVBLElBQUl2RixRQUFRLENBQUNpRSxNQUFNLEdBQUcsQ0FBQyxJQUFJcUIsS0FBSyxDQUFDdkYsWUFBWSxHQUFHQyxRQUFRLENBQUNpRSxNQUFNLEVBQUU7TUFDL0QsSUFBSSxDQUFDMUMsTUFBTSxFQUFFZ0QsT0FBTyxDQUFDLEdBQUd2RSxRQUFRLENBQUNzRixLQUFLLENBQUN2RixZQUFZLENBQUM7TUFDcER1RixLQUFLLENBQUN2RixZQUFZLElBQUksQ0FBQztNQUN2QixJQUFJdUYsS0FBSyxDQUFDdkYsWUFBWSxLQUFLQyxRQUFRLENBQUNpRSxNQUFNLEVBQUU7UUFDMUNxQixLQUFLLENBQUN0RixRQUFRLEdBQUcsRUFBRTtRQUNuQnNGLEtBQUssQ0FBQ3ZGLFlBQVksR0FBRyxDQUFDO01BQ3hCO01BQ0EsSUFBSSxDQUFDcUIsTUFBTSxDQUFDaUIsVUFBVSxHQUFHZCxNQUFNO01BQy9CLElBQUk7UUFDRixPQUFPZ0QsT0FBTyxDQUFDbkYsSUFBSSxDQUFDb0csT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUNuRSxPQUFPLENBQUM7TUFDOUMsQ0FBQyxDQUFDLE9BQU9pRCxDQUFDLEVBQUU7UUFDVixNQUFNLElBQUksQ0FBQ2xDLFdBQVcsQ0FBQ2tDLENBQUMsRUFBRWxGLElBQUksQ0FBQztNQUNqQztJQUNGO0lBRUEsSUFBSWtHLEtBQUssQ0FBQ3hGLFFBQVEsS0FBSyxDQUFDLEVBQUU7TUFDeEIsSUFBSUEsUUFBUSxHQUFHd0YsS0FBSyxDQUFDeEYsUUFBUTtNQUM3QixJQUFJMkYsS0FBSztNQUNULE9BQVFBLEtBQUssR0FBR3JHLElBQUksQ0FBQ2MsS0FBSyxDQUFDZCxJQUFJLENBQUNzRyxPQUFPLENBQUM1RixRQUFRLENBQUMsQ0FBQyxFQUFHO1FBQ25EVixJQUFJLENBQUNzRyxPQUFPLENBQUM1RixRQUFRLENBQUMsSUFBSSxDQUFDO1FBQzNCLElBQUksQ0FBQzJGLEtBQUssQ0FBQzVJLE9BQU8sQ0FBQyxFQUFFO1VBQ25CNEksS0FBSyxDQUFDNUksT0FBTyxDQUFDLEdBQUcsSUFBSTtVQUNyQnVILEtBQUssQ0FBQ1YsSUFBSSxDQUFDL0QsT0FBTyxDQUFDOEYsS0FBSyxDQUFDLENBQUM7VUFDMUI7UUFDRjtNQUNGO01BQ0FILEtBQUssQ0FBQ3hGLFFBQVEsR0FBRyxDQUFDO01BQ2xCLE9BQU9WLElBQUksQ0FBQ3NHLE9BQU8sQ0FBQzVGLFFBQVEsQ0FBQztJQUMvQjtJQUVBLElBQUlGLE1BQU0sR0FBRzBGLEtBQUssQ0FBQzFGLE1BQU07SUFDekIsT0FBTzBGLEtBQUssQ0FBQ3pGLFVBQVUsR0FBR0QsTUFBTSxDQUFDcUUsTUFBTSxFQUFFO01BQ3ZDLElBQUlOLEtBQUssR0FBRy9ELE1BQU0sQ0FBQzBGLEtBQUssQ0FBQ3pGLFVBQVUsQ0FBQztNQUNwQ3lGLEtBQUssQ0FBQ3pGLFVBQVUsSUFBSSxDQUFDO01BQ3JCLElBQUk4RCxLQUFLLEtBQUs1RSxRQUFRLEVBQUU7UUFDdEIsSUFBSUssSUFBSSxDQUFDYyxLQUFLLElBQUlkLElBQUksQ0FBQ2MsS0FBSyxDQUFDK0QsTUFBTSxFQUFFO1VBQ25DN0UsSUFBSSxDQUFDdkMsT0FBTyxDQUFDLEdBQUcsSUFBSTtVQUNwQnlJLEtBQUssQ0FBQ3hGLFFBQVEsR0FBR1YsSUFBSSxDQUFDdUcsV0FBVyxDQUFDLENBQUM7UUFDckM7UUFDQTtNQUNGLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQ3BDLFNBQVMsQ0FBQ0ksS0FBSyxDQUFDLEVBQUU7UUFDaEMyQixLQUFLLENBQUN0RixRQUFRLEdBQUcsSUFBSSxDQUFDdUQsU0FBUyxDQUFDSSxLQUFLLENBQUM7UUFDdEM7TUFDRjtJQUNGO0lBQ0FTLEtBQUssQ0FBQ21CLEdBQUcsQ0FBQyxDQUFDO0VBQ2I7RUFFQVAsUUFBUUEsQ0FBQzVGLElBQUksRUFBRTtJQUNiQSxJQUFJLENBQUN2QyxPQUFPLENBQUMsR0FBRyxJQUFJO0lBQ3BCLElBQUkrQyxNQUFNLEdBQUdULFNBQVMsQ0FBQ0MsSUFBSSxDQUFDO0lBQzVCLEtBQUssSUFBSXVFLEtBQUssSUFBSS9ELE1BQU0sRUFBRTtNQUN4QixJQUFJK0QsS0FBSyxLQUFLNUUsUUFBUSxFQUFFO1FBQ3RCLElBQUlLLElBQUksQ0FBQ2MsS0FBSyxFQUFFO1VBQ2RkLElBQUksQ0FBQ3dHLElBQUksQ0FBQ0gsS0FBSyxJQUFJO1lBQ2pCLElBQUksQ0FBQ0EsS0FBSyxDQUFDNUksT0FBTyxDQUFDLEVBQUUsSUFBSSxDQUFDbUksUUFBUSxDQUFDUyxLQUFLLENBQUM7VUFDM0MsQ0FBQyxDQUFDO1FBQ0o7TUFDRixDQUFDLE1BQU07UUFDTCxJQUFJekYsUUFBUSxHQUFHLElBQUksQ0FBQ3VELFNBQVMsQ0FBQ0ksS0FBSyxDQUFDO1FBQ3BDLElBQUkzRCxRQUFRLEVBQUU7VUFDWixJQUFJLElBQUksQ0FBQ2lGLFNBQVMsQ0FBQ2pGLFFBQVEsRUFBRVosSUFBSSxDQUFDb0csT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQ2hEO01BQ0Y7SUFDRjtFQUNGO0VBRUFLLFFBQVFBLENBQUEsRUFBRztJQUNULE9BQU8sSUFBSSxDQUFDbEIsSUFBSSxDQUFDLENBQUMsQ0FBQ2tCLFFBQVEsQ0FBQyxDQUFDO0VBQy9CO0VBRUEsSUFBSUMsT0FBT0EsQ0FBQSxFQUFHO0lBQ1osT0FBTyxJQUFJLENBQUM3SSxTQUFTLENBQUMsQ0FBQyxDQUFDNkksT0FBTztFQUNqQztFQUVBLElBQUlyRixHQUFHQSxDQUFBLEVBQUc7SUFDUixPQUFPLElBQUksQ0FBQ3hELFNBQVMsQ0FBQyxDQUFDLENBQUN3RCxHQUFHO0VBQzdCO0VBRUEsSUFBSUksR0FBR0EsQ0FBQSxFQUFHO0lBQ1IsT0FBTyxJQUFJLENBQUM1RCxTQUFTLENBQUMsQ0FBQyxDQUFDNEQsR0FBRztFQUM3QjtFQUVBLElBQUlrRixRQUFRQSxDQUFBLEVBQUc7SUFDYixPQUFPLElBQUksQ0FBQ3BCLElBQUksQ0FBQyxDQUFDLENBQUNvQixRQUFRO0VBQzdCO0VBRUEsSUFBSXJGLElBQUlBLENBQUEsRUFBRztJQUNULE9BQU8sSUFBSSxDQUFDVSxNQUFNLENBQUNWLElBQUk7RUFDekI7RUFFQSxJQUFJRixTQUFTQSxDQUFBLEVBQUc7SUFDZCxPQUFPLElBQUksQ0FBQ1ksTUFBTSxDQUFDWixTQUFTO0VBQzlCO0VBRUEsSUFBSTNDLElBQUlBLENBQUEsRUFBRztJQUNULE9BQU8sSUFBSSxDQUFDOEcsSUFBSSxDQUFDLENBQUMsQ0FBQzlHLElBQUk7RUFDekI7RUFFQSxLQUFLbUksTUFBTSxDQUFDQyxXQUFXLElBQUk7SUFDekIsT0FBTyxZQUFZO0VBQ3JCO0FBQ0Y7QUFFQTNGLFVBQVUsQ0FBQzRGLGVBQWUsR0FBR0MsU0FBUyxJQUFJO0VBQ3hDOUYsT0FBTyxHQUFHOEYsU0FBUztBQUNyQixDQUFDO0FBRURDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHL0YsVUFBVTtBQUMzQkEsVUFBVSxDQUFDZ0csT0FBTyxHQUFHaEcsVUFBVTtBQUUvQi9DLElBQUksQ0FBQ2dKLGtCQUFrQixDQUFDakcsVUFBVSxDQUFDO0FBQ25DbkQsUUFBUSxDQUFDb0osa0JBQWtCLENBQUNqRyxVQUFVLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=