d72df828727abdad929315bca639fb50
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const toolkit_1 = require("@reduxjs/toolkit");
const axios_1 = tslib_1.__importDefault(require("axios"));
const sinon_1 = tslib_1.__importDefault(require("sinon"));
const user_model_1 = require("app/shared/model/user.model");
const constants_1 = require("app/config/constants");
const user_management_reducer_1 = tslib_1.__importStar(require("./user-management.reducer"));
describe('User management reducer tests', () => {
    var _a;
    const username = (_a = process.env.E2E_USERNAME) !== null && _a !== void 0 ? _a : 'admin';
    function isEmpty(element) {
        if (element instanceof Array) {
            return element.length === 0;
        }
        else {
            return Object.keys(element).length === 0;
        }
    }
    function testInitialState(state) {
        expect(state).toMatchObject({
            loading: false,
            errorMessage: null,
            updating: false,
            updateSuccess: false,
            totalItems: 0,
        });
        expect(isEmpty(state.users));
        expect(isEmpty(state.authorities));
        expect(isEmpty(state.user));
    }
    function testMultipleTypes(types, payload, testFunction, error) {
        types.forEach(e => {
            testFunction((0, user_management_reducer_1.default)(undefined, { type: e, payload, error }));
        });
    }
    describe('Common', () => {
        it('should return the initial state', () => {
            testInitialState((0, user_management_reducer_1.default)(undefined, { type: 'unknown' }));
        });
    });
    describe('Requests', () => {
        it('should not modify the current state', () => {
            testInitialState((0, user_management_reducer_1.default)(undefined, { type: user_management_reducer_1.getRoles.pending.type }));
        });
        it('should set state to loading', () => {
            testMultipleTypes([user_management_reducer_1.getUsers.pending.type, user_management_reducer_1.getUsersAsAdmin.pending.type, user_management_reducer_1.getUser.pending.type], {}, state => {
                expect(state).toMatchObject({
                    errorMessage: null,
                    updateSuccess: false,
                    loading: true,
                });
            });
        });
        it('should set state to updating', () => {
            testMultipleTypes([user_management_reducer_1.createUser.pending.type, user_management_reducer_1.updateUser.pending.type, user_management_reducer_1.deleteUser.pending.type], {}, state => {
                expect(state).toMatchObject({
                    errorMessage: null,
                    updateSuccess: false,
                    updating: true,
                });
            });
        });
    });
    describe('Failures', () => {
        it('should set state to failed and put an error message in errorMessage', () => {
            testMultipleTypes([
                user_management_reducer_1.getUsersAsAdmin.rejected.type,
                user_management_reducer_1.getUsers.rejected.type,
                user_management_reducer_1.getUser.rejected.type,
                user_management_reducer_1.getRoles.rejected.type,
                user_management_reducer_1.createUser.rejected.type,
                user_management_reducer_1.updateUser.rejected.type,
                user_management_reducer_1.deleteUser.rejected.type,
            ], { message: 'something happened' }, state => {
                expect(state).toMatchObject({
                    loading: false,
                    updating: false,
                    updateSuccess: false,
                    errorMessage: 'error happened',
                });
            }, { message: 'error happened' });
        });
    });
    describe('Success', () => {
        it('should update state according to a successful fetch users request', () => {
            const headers = { ['x-total-count']: 42 };
            const payload = { data: 'some handsome users', headers };
            const toTest = (0, user_management_reducer_1.default)(undefined, { type: user_management_reducer_1.getUsers.fulfilled.type, payload });
            expect(toTest).toMatchObject({
                loading: false,
                users: payload.data,
                totalItems: headers['x-total-count'],
            });
        });
        it('should update state according to a successful fetch user request', () => {
            const payload = { data: 'some handsome user' };
            const toTest = (0, user_management_reducer_1.default)(undefined, { type: user_management_reducer_1.getUser.fulfilled.type, payload });
            expect(toTest).toMatchObject({
                loading: false,
                user: payload.data,
            });
        });
        it('should update state according to a successful fetch role request', () => {
            const payload = { data: [constants_1.AUTHORITIES.ADMIN] };
            const toTest = (0, user_management_reducer_1.default)(undefined, { type: user_management_reducer_1.getRoles.fulfilled.type, payload });
            expect(toTest).toMatchObject({
                loading: false,
                authorities: payload.data,
            });
        });
        it('should set state to successful update', () => {
            testMultipleTypes([user_management_reducer_1.createUser.fulfilled.type, user_management_reducer_1.updateUser.fulfilled.type], { data: 'some handsome user' }, types => {
                expect(types).toMatchObject({
                    updating: false,
                    updateSuccess: true,
                    user: 'some handsome user',
                });
            });
        });
        it('should set state to successful update with an empty user', () => {
            const toTest = (0, user_management_reducer_1.default)(undefined, { type: user_management_reducer_1.deleteUser.fulfilled.type });
            expect(toTest).toMatchObject({
                updating: false,
                updateSuccess: true,
            });
            expect(isEmpty(toTest.user));
        });
    });
    describe('Reset', () => {
        it('should reset the state', () => {
            const initialState = {
                loading: false,
                errorMessage: null,
                users: [],
                authorities: [],
                user: user_model_1.defaultValue,
                updating: false,
                updateSuccess: false,
                totalItems: 0,
            };
            const initialStateNew = Object.assign(Object.assign({}, initialState), { loading: true });
            expect((0, user_management_reducer_1.default)(initialStateNew, user_management_reducer_1.reset)).toEqual(initialState);
        });
    });
    describe('Actions', () => {
        let store;
        const resolvedObject = { value: 'whatever' };
        const getState = jest.fn();
        const dispatch = jest.fn();
        const extra = {};
        beforeEach(() => {
            store = (0, toolkit_1.configureStore)({
                reducer: (state = [], action) => [...state, action],
            });
            axios_1.default.get = sinon_1.default.stub().returns(Promise.resolve(resolvedObject));
            axios_1.default.put = sinon_1.default.stub().returns(Promise.resolve(resolvedObject));
            axios_1.default.post = sinon_1.default.stub().returns(Promise.resolve(resolvedObject));
            axios_1.default.delete = sinon_1.default.stub().returns(Promise.resolve(resolvedObject));
        });
        it('dispatches FETCH_USERS_AS_ADMIN_PENDING and FETCH_USERS_AS_ADMIN_FULFILLED actions', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const arg = {};
            const result = yield (0, user_management_reducer_1.getUsersAsAdmin)(arg)(dispatch, getState, extra);
            const pendingAction = dispatch.mock.calls[0][0];
            expect(pendingAction.meta.requestStatus).toBe('pending');
            expect(user_management_reducer_1.getUsersAsAdmin.fulfilled.match(result)).toBe(true);
        }));
        it('dispatches FETCH_USERS_AS_ADMIN_PENDING and FETCH_USERS_AS_ADMIN_FULFILLED actions with pagination options', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const arg = { page: 1, size: 20, sort: 'id,desc' };
            const result = yield (0, user_management_reducer_1.getUsersAsAdmin)(arg)(dispatch, getState, extra);
            const pendingAction = dispatch.mock.calls[0][0];
            expect(pendingAction.meta.requestStatus).toBe('pending');
            expect(user_management_reducer_1.getUsersAsAdmin.fulfilled.match(result)).toBe(true);
        }));
        it('dispatches FETCH_USERS_PENDING and FETCH_USERS_FULFILLED actions', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const arg = {};
            const result = yield (0, user_management_reducer_1.getUsers)(arg)(dispatch, getState, extra);
            const pendingAction = dispatch.mock.calls[0][0];
            expect(pendingAction.meta.requestStatus).toBe('pending');
            expect(user_management_reducer_1.getUsers.fulfilled.match(result)).toBe(true);
        }));
        it('dispatches FETCH_USERS_PENDING and FETCH_USERS_FULFILLED actions with pagination options', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const arg = { page: 1, size: 20, sort: 'id,desc' };
            const result = yield (0, user_management_reducer_1.getUsers)(arg)(dispatch, getState, extra);
            const pendingAction = dispatch.mock.calls[0][0];
            expect(pendingAction.meta.requestStatus).toBe('pending');
            expect(user_management_reducer_1.getUsers.fulfilled.match(result)).toBe(true);
        }));
        it('dispatches FETCH_ROLES_PENDING and FETCH_ROLES_FULFILLED actions', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const result = yield (0, user_management_reducer_1.getRoles)()(dispatch, getState, extra);
            const pendingAction = dispatch.mock.calls[0][0];
            expect(pendingAction.meta.requestStatus).toBe('pending');
            expect(user_management_reducer_1.getRoles.fulfilled.match(result)).toBe(true);
        }));
        it('dispatches FETCH_USER_PENDING and FETCH_USER_FULFILLED actions', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const result = yield (0, user_management_reducer_1.getUser)(username)(dispatch, getState, extra);
            const pendingAction = dispatch.mock.calls[0][0];
            expect(pendingAction.meta.requestStatus).toBe('pending');
            expect(user_management_reducer_1.getUser.fulfilled.match(result)).toBe(true);
        }));
        it('dispatches CREATE_USER_PENDING and CREATE_USER_FULFILLED actions', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const arg = {};
            const result = yield (0, user_management_reducer_1.createUser)(arg)(dispatch, getState, extra);
            const pendingAction = dispatch.mock.calls[0][0];
            expect(pendingAction.meta.requestStatus).toBe('pending');
            expect(user_management_reducer_1.createUser.fulfilled.match(result)).toBe(true);
        }));
        it('dispatches UPDATE_USER_PENDING and UPDATE_USER_FULFILLED actions', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const arg = { login: username };
            const result = yield (0, user_management_reducer_1.updateUser)(arg)(dispatch, getState, extra);
            const pendingAction = dispatch.mock.calls[0][0];
            expect(pendingAction.meta.requestStatus).toBe('pending');
            expect(user_management_reducer_1.updateUser.fulfilled.match(result)).toBe(true);
        }));
        it('dispatches DELETE_USER_PENDING and DELETE_USER_FULFILLED actions', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const result = yield (0, user_management_reducer_1.deleteUser)(username)(dispatch, getState, extra);
            const pendingAction = dispatch.mock.calls[0][0];
            expect(pendingAction.meta.requestStatus).toBe('pending');
            expect(user_management_reducer_1.deleteUser.fulfilled.match(result)).toBe(true);
        }));
        it('dispatches RESET actions', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield store.dispatch((0, user_management_reducer_1.reset)());
            expect(store.getState()).toEqual([expect.any(Object), expect.objectContaining((0, user_management_reducer_1.reset)())]);
        }));
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3BjY28wNTYvRG9jdW1lbnRzL0NvdXJzIElUVS9yaWJvdWNob24vbWFnaWN2ZW50ZXN0b2NrL3NyYy9tYWluL3dlYmFwcC9hcHAvbW9kdWxlcy9hZG1pbmlzdHJhdGlvbi91c2VyLW1hbmFnZW1lbnQvdXNlci1tYW5hZ2VtZW50LnJlZHVjZXIuc3BlYy50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQSw4Q0FBa0Q7QUFDbEQsMERBQTBCO0FBQzFCLDBEQUEwQjtBQUUxQiw0REFBMkQ7QUFDM0Qsb0RBQW1EO0FBQ25ELDZGQVNtQztBQUVuQyxRQUFRLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFOztJQUM3QyxNQUFNLFFBQVEsR0FBRyxNQUFBLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxtQ0FBSSxPQUFPLENBQUM7SUFFckQsU0FBUyxPQUFPLENBQUMsT0FBTztRQUN0QixJQUFJLE9BQU8sWUFBWSxLQUFLLEVBQUUsQ0FBQztZQUM3QixPQUFPLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO1FBQzlCLENBQUM7YUFBTSxDQUFDO1lBQ04sT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUM7UUFDM0MsQ0FBQztJQUNILENBQUM7SUFFRCxTQUFTLGdCQUFnQixDQUFDLEtBQUs7UUFDN0IsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLGFBQWEsQ0FBQztZQUMxQixPQUFPLEVBQUUsS0FBSztZQUNkLFlBQVksRUFBRSxJQUFJO1lBQ2xCLFFBQVEsRUFBRSxLQUFLO1lBQ2YsYUFBYSxFQUFFLEtBQUs7WUFDcEIsVUFBVSxFQUFFLENBQUM7U0FDZCxDQUFDLENBQUM7UUFDSCxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQzdCLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDbkMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENB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QUFhLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN6RCxNQUFNLENBQUMsa0NBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RELENBQUMsQ0FBQSxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsMEZBQTBGLEVBQUUsR0FBUyxFQUFFO1lBQ3hHLE1BQU0sR0FBRyxHQUFHLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsQ0FBQztZQUVuRCxNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUEsa0NBQVEsRUFBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBRTlELE1BQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN6RCxNQUFNLENBQUMsa0NBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RELENBQUMsQ0FBQSxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsa0VBQWtFLEVBQUUsR0FBUyxFQUFFO1lBQ2hGLE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBQSxrQ0FBUSxHQUFFLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUUzRCxNQUFNLGFBQWEsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsYUFBYSxDQUFDLElB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QyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3hELENBQUMsQ0FBQSxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsMEJBQTBCLEVBQUUsR0FBUyxFQUFFO1lBQ3hDLE1BQU0sS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFBLCtCQUFLLEdBQUUsQ0FBQyxDQUFDO1lBQzlCLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFBLCtCQUFLLEdBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzRixDQUFDLENBQUEsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvcGNjbzA1Ni9Eb2N1bWVudHMvQ291cnMgSVRVL3JpYm91Y2hvbi9tYWdpY3ZlbnRlc3RvY2svc3JjL21haW4vd2ViYXBwL2FwcC9tb2R1bGVzL2FkbWluaXN0cmF0aW9uL3VzZXItbWFuYWdlbWVudC91c2VyLW1hbmFnZW1lbnQucmVkdWNlci5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbmZpZ3VyZVN0b3JlIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJztcblxuaW1wb3J0IHsgZGVmYXVsdFZhbHVlIH0gZnJvbSAnYXBwL3NoYXJlZC9tb2RlbC91c2VyLm1vZGVsJztcbmltcG9ydCB7IEFVVEhPUklUSUVTIH0gZnJvbSAnYXBwL2NvbmZpZy9jb25zdGFudHMnO1xuaW1wb3J0IHVzZXJNYW5hZ2VtZW50LCB7XG4gIGdldFVzZXJzLFxuICBnZXRVc2Vyc0FzQWRtaW4sXG4gIGdldFJvbGVzLFxuICBnZXRVc2VyLFxuICBjcmVhdGVVc2VyLFxuICB1cGRhdGVVc2VyLFxuICBkZWxldGVVc2VyLFxuICByZXNldCxcbn0gZnJvbSAnLi91c2VyLW1hbmFnZW1lbnQucmVkdWNlcic7XG5cbmRlc2NyaWJlKCdVc2VyIG1hbmFnZW1lbnQgcmVkdWNlciB0ZXN0cycsICgpID0+IHtcbiAgY29uc3QgdXNlcm5hbWUgPSBwcm9jZXNzLmVudi5FMkVfVVNFUk5BTUUgPz8gJ2FkbWluJztcblxuICBmdW5jdGlvbiBpc0VtcHR5KGVsZW1lbnQpOiBib29sZWFuIHtcbiAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICByZXR1cm4gZWxlbWVudC5sZW5ndGggPT09IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhlbGVtZW50KS5sZW5ndGggPT09IDA7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdGVzdEluaXRpYWxTdGF0ZShzdGF0ZSkge1xuICAgIGV4cGVjdChzdGF0ZSkudG9NYXRjaE9iamVjdCh7XG4gICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgIGVycm9yTWVzc2FnZTogbnVsbCxcbiAgICAgIHVwZGF0aW5nOiBmYWxzZSxcbiAgICAgIHVwZGF0ZVN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgdG90YWxJdGVtczogMCxcbiAgICB9KTtcbiAgICBleHBlY3QoaXNFbXB0eShzdGF0ZS51c2VycykpO1xuICAgIGV4cGVjdChpc0VtcHR5KHN0YXRlLmF1dGhvcml0aWVzKSk7XG4gICAgZXhwZWN0KGlzRW1wdHkoc3RhdGUudXNlcikpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGVzdE11bHRpcGxlVHlwZXModHlwZXMsIHBheWxvYWQsIHRlc3RGdW5jdGlvbiwgZXJyb3I/KSB7XG4gICAgdHlwZXMuZm9yRWFjaChlID0+IHtcbiAgICAgIHRlc3RGdW5jdGlvbih1c2VyTWFuYWdlbWVudCh1bmRlZmluZWQsIHsgdHlwZTogZSwgcGF5bG9hZCwgZXJyb3IgfSkpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVzY3JpYmUoJ0NvbW1vbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZScsICgpID0+IHtcbiAgICAgIHRlc3RJbml0aWFsU3RhdGUodXNlck1hbmFnZW1lbnQodW5kZWZpbmVkLCB7IHR5cGU6ICd1bmtub3duJyB9KSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZXF1ZXN0cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG5vdCBtb2RpZnkgdGhlIGN1cnJlbnQgc3RhdGUnLCAoKSA9PiB7XG4gICAgICB0ZXN0SW5pdGlhbFN0YXRlKHVzZXJNYW5hZ2VtZW50KHVuZGVmaW5lZCwgeyB0eXBlOiBnZXRSb2xlcy5wZW5kaW5nLnR5cGUgfSkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzZXQgc3RhdGUgdG8gbG9hZGluZycsICgpID0+IHtcbiAgICAgIHRlc3RNdWx0aXBsZVR5cGVzKFtnZXRVc2Vycy5wZW5kaW5nLnR5cGUsIGdldFVzZXJzQXNBZG1pbi5wZW5kaW5nLnR5cGUsIGdldFVzZXIucGVuZGluZy50eXBlXSwge30sIHN0YXRlID0+IHtcbiAgICAgICAgZXhwZWN0KHN0YXRlKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2U6IG51bGwsXG4gICAgICAgICAgdXBkYXRlU3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2V0IHN0YXRlIHRvIHVwZGF0aW5nJywgKCkgPT4ge1xuICAgICAgdGVzdE11bHRpcGxlVHlwZXMoW2NyZWF0ZVVzZXIucGVuZGluZy50eXBlLCB1cGRhdGVVc2VyLnBlbmRpbmcudHlwZSwgZGVsZXRlVXNlci5wZW5kaW5nLnR5cGVdLCB7fSwgc3RhdGUgPT4ge1xuICAgICAgICBleHBlY3Qoc3RhdGUpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICAgIGVycm9yTWVzc2FnZTogbnVsbCxcbiAgICAgICAgICB1cGRhdGVTdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICB1cGRhdGluZzogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZhaWx1cmVzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2V0IHN0YXRlIHRvIGZhaWxlZCBhbmQgcHV0IGFuIGVycm9yIG1lc3NhZ2UgaW4gZXJyb3JNZXNzYWdlJywgKCkgPT4ge1xuICAgICAgdGVzdE11bHRpcGxlVHlwZXMoXG4gICAgICAgIFtcbiAgICAgICAgICBnZXRVc2Vyc0FzQWRtaW4ucmVqZWN0ZWQudHlwZSxcbiAgICAgICAgICBnZXRVc2Vycy5yZWplY3RlZC50eXBlLFxuICAgICAgICAgIGdldFVzZXIucmVqZWN0ZWQudHlwZSxcbiAgICAgICAgICBnZXRSb2xlcy5yZWplY3RlZC50eXBlLFxuICAgICAgICAgIGNyZWF0ZVVzZXIucmVqZWN0ZWQudHlwZSxcbiAgICAgICAgICB1cGRhdGVVc2VyLnJlamVjdGVkLnR5cGUsXG4gICAgICAgICAgZGVsZXRlVXNlci5yZWplY3RlZC50eXBlLFxuICAgICAgICBdLFxuICAgICAgICB7IG1lc3NhZ2U6ICdzb21ldGhpbmcgaGFwcGVuZWQnIH0sXG4gICAgICAgIHN0YXRlID0+IHtcbiAgICAgICAgICBleHBlY3Qoc3RhdGUpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICB1cGRhdGluZzogZmFsc2UsXG4gICAgICAgICAgICB1cGRhdGVTdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZTogJ2Vycm9yIGhhcHBlbmVkJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgeyBtZXNzYWdlOiAnZXJyb3IgaGFwcGVuZWQnIH0sXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU3VjY2VzcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBzdGF0ZSBhY2NvcmRpbmcgdG8gYSBzdWNjZXNzZnVsIGZldGNoIHVzZXJzIHJlcXVlc3QnLCAoKSA9PiB7XG4gICAgICBjb25zdCBoZWFkZXJzID0geyBbJ3gtdG90YWwtY291bnQnXTogNDIgfTtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IGRhdGE6ICdzb21lIGhhbmRzb21lIHVzZXJzJywgaGVhZGVycyB9O1xuICAgICAgY29uc3QgdG9UZXN0ID0gdXNlck1hbmFnZW1lbnQodW5kZWZpbmVkLCB7IHR5cGU6IGdldFVzZXJzLmZ1bGZpbGxlZC50eXBlLCBwYXlsb2FkIH0pO1xuXG4gICAgICBleHBlY3QodG9UZXN0KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgIHVzZXJzOiBwYXlsb2FkLmRhdGEsXG4gICAgICAgIHRvdGFsSXRlbXM6IGhlYWRlcnNbJ3gtdG90YWwtY291bnQnXSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgc3RhdGUgYWNjb3JkaW5nIHRvIGEgc3VjY2Vzc2Z1bCBmZXRjaCB1c2VyIHJlcXVlc3QnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwYXlsb2FkID0geyBkYXRhOiAnc29tZSBoYW5kc29tZSB1c2VyJyB9O1xuICAgICAgY29uc3QgdG9UZXN0ID0gdXNlck1hbmFnZW1lbnQodW5kZWZpbmVkLCB7IHR5cGU6IGdldFVzZXIuZnVsZmlsbGVkLnR5cGUsIHBheWxvYWQgfSk7XG5cbiAgICAgIGV4cGVjdCh0b1Rlc3QpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgdXNlcjogcGF5bG9hZC5kYXRhLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBzdGF0ZSBhY2NvcmRpbmcgdG8gYSBzdWNjZXNzZnVsIGZldGNoIHJvbGUgcmVxdWVzdCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IGRhdGE6IFtBVVRIT1JJVElFUy5BRE1JTl0gfTtcbiAgICAgIGNvbnN0IHRvVGVzdCA9IHVzZXJNYW5hZ2VtZW50KHVuZGVmaW5lZCwgeyB0eXBlOiBnZXRSb2xlcy5mdWxmaWxsZWQudHlwZSwgcGF5bG9hZCB9KTtcblxuICAgICAgZXhwZWN0KHRvVGVzdCkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICBhdXRob3JpdGllczogcGF5bG9hZC5kYXRhLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNldCBzdGF0ZSB0byBzdWNjZXNzZnVsIHVwZGF0ZScsICgpID0+IHtcbiAgICAgIHRlc3RNdWx0aXBsZVR5cGVzKFtjcmVhdGVVc2VyLmZ1bGZpbGxlZC50eXBlLCB1cGRhdGVVc2VyLmZ1bGZpbGxlZC50eXBlXSwgeyBkYXRhOiAnc29tZSBoYW5kc29tZSB1c2VyJyB9LCB0eXBlcyA9PiB7XG4gICAgICAgIGV4cGVjdCh0eXBlcykudG9NYXRjaE9iamVjdCh7XG4gICAgICAgICAgdXBkYXRpbmc6IGZhbHNlLFxuICAgICAgICAgIHVwZGF0ZVN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgdXNlcjogJ3NvbWUgaGFuZHNvbWUgdXNlcicsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNldCBzdGF0ZSB0byBzdWNjZXNzZnVsIHVwZGF0ZSB3aXRoIGFuIGVtcHR5IHVzZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b1Rlc3QgPSB1c2VyTWFuYWdlbWVudCh1bmRlZmluZWQsIHsgdHlwZTogZGVsZXRlVXNlci5mdWxmaWxsZWQudHlwZSB9KTtcblxuICAgICAgZXhwZWN0KHRvVGVzdCkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIHVwZGF0aW5nOiBmYWxzZSxcbiAgICAgICAgdXBkYXRlU3VjY2VzczogdHJ1ZSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGlzRW1wdHkodG9UZXN0LnVzZXIpKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Jlc2V0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVzZXQgdGhlIHN0YXRlJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5pdGlhbFN0YXRlID0ge1xuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBudWxsLFxuICAgICAgICB1c2VyczogW10sXG4gICAgICAgIGF1dGhvcml0aWVzOiBbXSBhcyBhbnlbXSxcbiAgICAgICAgdXNlcjogZGVmYXVsdFZhbHVlLFxuICAgICAgICB1cGRhdGluZzogZmFsc2UsXG4gICAgICAgIHVwZGF0ZVN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICB0b3RhbEl0ZW1zOiAwLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IGluaXRpYWxTdGF0ZU5ldyA9IHtcbiAgICAgICAgLi4uaW5pdGlhbFN0YXRlLFxuICAgICAgICBsb2FkaW5nOiB0cnVlLFxuICAgICAgfTtcbiAgICAgIGV4cGVjdCh1c2VyTWFuYWdlbWVudChpbml0aWFsU3RhdGVOZXcsIHJlc2V0KSkudG9FcXVhbChpbml0aWFsU3RhdGUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWN0aW9ucycsICgpID0+IHtcbiAgICBsZXQgc3RvcmU7XG5cbiAgICBjb25zdCByZXNvbHZlZE9iamVjdCA9IHsgdmFsdWU6ICd3aGF0ZXZlcicgfTtcbiAgICBjb25zdCBnZXRTdGF0ZSA9IGplc3QuZm4oKTtcbiAgICBjb25zdCBkaXNwYXRjaCA9IGplc3QuZm4oKTtcbiAgICBjb25zdCBleHRyYSA9IHt9O1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgc3RvcmUgPSBjb25maWd1cmVTdG9yZSh7XG4gICAgICAgIHJlZHVjZXI6IChzdGF0ZSA9IFtdLCBhY3Rpb24pID0+IFsuLi5zdGF0ZSwgYWN0aW9uXSxcbiAgICAgIH0pO1xuICAgICAgYXhpb3MuZ2V0ID0gc2lub24uc3R1YigpLnJldHVybnMoUHJvbWlzZS5yZXNvbHZlKHJlc29sdmVkT2JqZWN0KSk7XG4gICAgICBheGlvcy5wdXQgPSBzaW5vbi5zdHViKCkucmV0dXJucyhQcm9taXNlLnJlc29sdmUocmVzb2x2ZWRPYmplY3QpKTtcbiAgICAgIGF4aW9zLnBvc3QgPSBzaW5vbi5zdHViKCkucmV0dXJucyhQcm9taXNlLnJlc29sdmUocmVzb2x2ZWRPYmplY3QpKTtcbiAgICAgIGF4aW9zLmRlbGV0ZSA9IHNpbm9uLnN0dWIoKS5yZXR1cm5zKFByb21pc2UucmVzb2x2ZShyZXNvbHZlZE9iamVjdCkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2Rpc3BhdGNoZXMgRkVUQ0hfVVNFUlNfQVNfQURNSU5fUEVORElORyBhbmQgRkVUQ0hfVVNFUlNfQVNfQURNSU5fRlVMRklMTEVEIGFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcmcgPSB7fTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0VXNlcnNBc0FkbWluKGFyZykoZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYSk7XG5cbiAgICAgIGNvbnN0IHBlbmRpbmdBY3Rpb24gPSBkaXNwYXRjaC5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KHBlbmRpbmdBY3Rpb24ubWV0YS5yZXF1ZXN0U3RhdHVzKS50b0JlKCdwZW5kaW5nJyk7XG4gICAgICBleHBlY3QoZ2V0VXNlcnNBc0FkbWluLmZ1bGZpbGxlZC5tYXRjaChyZXN1bHQpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2Rpc3BhdGNoZXMgRkVUQ0hfVVNFUlNfQVNfQURNSU5fUEVORElORyBhbmQgRkVUQ0hfVVNFUlNfQVNfQURNSU5fRlVMRklMTEVEIGFjdGlvbnMgd2l0aCBwYWdpbmF0aW9uIG9wdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcmcgPSB7IHBhZ2U6IDEsIHNpemU6IDIwLCBzb3J0OiAnaWQsZGVzYycgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0VXNlcnNBc0FkbWluKGFyZykoZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYSk7XG5cbiAgICAgIGNvbnN0IHBlbmRpbmdBY3Rpb24gPSBkaXNwYXRjaC5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KHBlbmRpbmdBY3Rpb24ubWV0YS5yZXF1ZXN0U3RhdHVzKS50b0JlKCdwZW5kaW5nJyk7XG4gICAgICBleHBlY3QoZ2V0VXNlcnNBc0FkbWluLmZ1bGZpbGxlZC5tYXRjaChyZXN1bHQpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2Rpc3BhdGNoZXMgRkVUQ0hfVVNFUlNfUEVORElORyBhbmQgRkVUQ0hfVVNFUlNfRlVMRklMTEVEIGFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcmcgPSB7fTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0VXNlcnMoYXJnKShkaXNwYXRjaCwgZ2V0U3RhdGUsIGV4dHJhKTtcblxuICAgICAgY29uc3QgcGVuZGluZ0FjdGlvbiA9IGRpc3BhdGNoLm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QocGVuZGluZ0FjdGlvbi5tZXRhLnJlcXVlc3RTdGF0dXMpLnRvQmUoJ3BlbmRpbmcnKTtcbiAgICAgIGV4cGVjdChnZXRVc2Vycy5mdWxmaWxsZWQubWF0Y2gocmVzdWx0KSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdkaXNwYXRjaGVzIEZFVENIX1VTRVJTX1BFTkRJTkcgYW5kIEZFVENIX1VTRVJTX0ZVTEZJTExFRCBhY3Rpb25zIHdpdGggcGFnaW5hdGlvbiBvcHRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYXJnID0geyBwYWdlOiAxLCBzaXplOiAyMCwgc29ydDogJ2lkLGRlc2MnIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFVzZXJzKGFyZykoZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYSk7XG5cbiAgICAgIGNvbnN0IHBlbmRpbmdBY3Rpb24gPSBkaXNwYXRjaC5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KHBlbmRpbmdBY3Rpb24ubWV0YS5yZXF1ZXN0U3RhdHVzKS50b0JlKCdwZW5kaW5nJyk7XG4gICAgICBleHBlY3QoZ2V0VXNlcnMuZnVsZmlsbGVkLm1hdGNoKHJlc3VsdCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlzcGF0Y2hlcyBGRVRDSF9ST0xFU19QRU5ESU5HIGFuZCBGRVRDSF9ST0xFU19GVUxGSUxMRUQgYWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJvbGVzKCkoZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYSk7XG5cbiAgICAgIGNvbnN0IHBlbmRpbmdBY3Rpb24gPSBkaXNwYXRjaC5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KHBlbmRpbmdBY3Rpb24ubWV0YS5yZXF1ZXN0U3RhdHVzKS50b0JlKCdwZW5kaW5nJyk7XG4gICAgICBleHBlY3QoZ2V0Um9sZXMuZnVsZmlsbGVkLm1hdGNoKHJlc3VsdCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlzcGF0Y2hlcyBGRVRDSF9VU0VSX1BFTkRJTkcgYW5kIEZFVENIX1VTRVJfRlVMRklMTEVEIGFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRVc2VyKHVzZXJuYW1lKShkaXNwYXRjaCwgZ2V0U3RhdGUsIGV4dHJhKTtcblxuICAgICAgY29uc3QgcGVuZGluZ0FjdGlvbiA9IGRpc3BhdGNoLm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QocGVuZGluZ0FjdGlvbi5tZXRhLnJlcXVlc3RTdGF0dXMpLnRvQmUoJ3BlbmRpbmcnKTtcbiAgICAgIGV4cGVjdChnZXRVc2VyLmZ1bGZpbGxlZC5tYXRjaChyZXN1bHQpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2Rpc3BhdGNoZXMgQ1JFQVRFX1VTRVJfUEVORElORyBhbmQgQ1JFQVRFX1VTRVJfRlVMRklMTEVEIGFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcmcgPSB7fTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3JlYXRlVXNlcihhcmcpKGRpc3BhdGNoLCBnZXRTdGF0ZSwgZXh0cmEpO1xuXG4gICAgICBjb25zdCBwZW5kaW5nQWN0aW9uID0gZGlzcGF0Y2gubW9jay5jYWxsc1swXVswXTtcbiAgICAgIGV4cGVjdChwZW5kaW5nQWN0aW9uLm1ldGEucmVxdWVzdFN0YXR1cykudG9CZSgncGVuZGluZycpO1xuICAgICAgZXhwZWN0KGNyZWF0ZVVzZXIuZnVsZmlsbGVkLm1hdGNoKHJlc3VsdCkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlzcGF0Y2hlcyBVUERBVEVfVVNFUl9QRU5ESU5HIGFuZCBVUERBVEVfVVNFUl9GVUxGSUxMRUQgYWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFyZyA9IHsgbG9naW46IHVzZXJuYW1lIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwZGF0ZVVzZXIoYXJnKShkaXNwYXRjaCwgZ2V0U3RhdGUsIGV4dHJhKTtcblxuICAgICAgY29uc3QgcGVuZGluZ0FjdGlvbiA9IGRpc3BhdGNoLm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QocGVuZGluZ0FjdGlvbi5tZXRhLnJlcXVlc3RTdGF0dXMpLnRvQmUoJ3BlbmRpbmcnKTtcbiAgICAgIGV4cGVjdCh1cGRhdGVVc2VyLmZ1bGZpbGxlZC5tYXRjaChyZXN1bHQpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2Rpc3BhdGNoZXMgREVMRVRFX1VTRVJfUEVORElORyBhbmQgREVMRVRFX1VTRVJfRlVMRklMTEVEIGFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkZWxldGVVc2VyKHVzZXJuYW1lKShkaXNwYXRjaCwgZ2V0U3RhdGUsIGV4dHJhKTtcblxuICAgICAgY29uc3QgcGVuZGluZ0FjdGlvbiA9IGRpc3BhdGNoLm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QocGVuZGluZ0FjdGlvbi5tZXRhLnJlcXVlc3RTdGF0dXMpLnRvQmUoJ3BlbmRpbmcnKTtcbiAgICAgIGV4cGVjdChkZWxldGVVc2VyLmZ1bGZpbGxlZC5tYXRjaChyZXN1bHQpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2Rpc3BhdGNoZXMgUkVTRVQgYWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHN0b3JlLmRpc3BhdGNoKHJlc2V0KCkpO1xuICAgICAgZXhwZWN0KHN0b3JlLmdldFN0YXRlKCkpLnRvRXF1YWwoW2V4cGVjdC5hbnkoT2JqZWN0KSwgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcocmVzZXQoKSldKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==