65a55de1f6ea78c545d5afaaa6c98388
'use strict';

let CssSyntaxError = require('./css-syntax-error');
let Declaration = require('./declaration');
let LazyResult = require('./lazy-result');
let Container = require('./container');
let Processor = require('./processor');
let stringify = require('./stringify');
let fromJSON = require('./fromJSON');
let Document = require('./document');
let Warning = require('./warning');
let Comment = require('./comment');
let AtRule = require('./at-rule');
let Result = require('./result.js');
let Input = require('./input');
let parse = require('./parse');
let list = require('./list');
let Rule = require('./rule');
let Root = require('./root');
let Node = require('./node');
function postcss(...plugins) {
  if (plugins.length === 1 && Array.isArray(plugins[0])) {
    plugins = plugins[0];
  }
  return new Processor(plugins);
}
postcss.plugin = function plugin(name, initializer) {
  let warningPrinted = false;
  function creator(...args) {
    // eslint-disable-next-line no-console
    if (console && console.warn && !warningPrinted) {
      warningPrinted = true;
      // eslint-disable-next-line no-console
      console.warn(name + ': postcss.plugin was deprecated. Migration guide:\n' + 'https://evilmartians.com/chronicles/postcss-8-plugin-migration');
      if (process.env.LANG && process.env.LANG.startsWith('cn')) {
        /* c8 ignore next 7 */
        // eslint-disable-next-line no-console
        console.warn(name + ': 里面 postcss.plugin 被弃用. 迁移指南:\n' + 'https://www.w3ctech.com/topic/2226');
      }
    }
    let transformer = initializer(...args);
    transformer.postcssPlugin = name;
    transformer.postcssVersion = new Processor().version;
    return transformer;
  }
  let cache;
  Object.defineProperty(creator, 'postcss', {
    get() {
      if (!cache) cache = creator();
      return cache;
    }
  });
  creator.process = function (css, processOpts, pluginOpts) {
    return postcss([creator(pluginOpts)]).process(css, processOpts);
  };
  return creator;
};
postcss.stringify = stringify;
postcss.parse = parse;
postcss.fromJSON = fromJSON;
postcss.list = list;
postcss.comment = defaults => new Comment(defaults);
postcss.atRule = defaults => new AtRule(defaults);
postcss.decl = defaults => new Declaration(defaults);
postcss.rule = defaults => new Rule(defaults);
postcss.root = defaults => new Root(defaults);
postcss.document = defaults => new Document(defaults);
postcss.CssSyntaxError = CssSyntaxError;
postcss.Declaration = Declaration;
postcss.Container = Container;
postcss.Processor = Processor;
postcss.Document = Document;
postcss.Comment = Comment;
postcss.Warning = Warning;
postcss.AtRule = AtRule;
postcss.Result = Result;
postcss.Input = Input;
postcss.Rule = Rule;
postcss.Root = Root;
postcss.Node = Node;
LazyResult.registerPostcss(postcss);
module.exports = postcss;
postcss.default = postcss;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDc3NTeW50YXhFcnJvciIsInJlcXVpcmUiLCJEZWNsYXJhdGlvbiIsIkxhenlSZXN1bHQiLCJDb250YWluZXIiLCJQcm9jZXNzb3IiLCJzdHJpbmdpZnkiLCJmcm9tSlNPTiIsIkRvY3VtZW50IiwiV2FybmluZyIsIkNvbW1lbnQiLCJBdFJ1bGUiLCJSZXN1bHQiLCJJbnB1dCIsInBhcnNlIiwibGlzdCIsIlJ1bGUiLCJSb290IiwiTm9kZSIsInBvc3Rjc3MiLCJwbHVnaW5zIiwibGVuZ3RoIiwiQXJyYXkiLCJpc0FycmF5IiwicGx1Z2luIiwibmFtZSIsImluaXRpYWxpemVyIiwid2FybmluZ1ByaW50ZWQiLCJjcmVhdG9yIiwiYXJncyIsImNvbnNvbGUiLCJ3YXJuIiwicHJvY2VzcyIsImVudiIsIkxBTkciLCJzdGFydHNXaXRoIiwidHJhbnNmb3JtZXIiLCJwb3N0Y3NzUGx1Z2luIiwicG9zdGNzc1ZlcnNpb24iLCJ2ZXJzaW9uIiwiY2FjaGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsImNzcyIsInByb2Nlc3NPcHRzIiwicGx1Z2luT3B0cyIsImNvbW1lbnQiLCJkZWZhdWx0cyIsImF0UnVsZSIsImRlY2wiLCJydWxlIiwicm9vdCIsImRvY3VtZW50IiwicmVnaXN0ZXJQb3N0Y3NzIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlcyI6WyJwb3N0Y3NzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5sZXQgQ3NzU3ludGF4RXJyb3IgPSByZXF1aXJlKCcuL2Nzcy1zeW50YXgtZXJyb3InKVxubGV0IERlY2xhcmF0aW9uID0gcmVxdWlyZSgnLi9kZWNsYXJhdGlvbicpXG5sZXQgTGF6eVJlc3VsdCA9IHJlcXVpcmUoJy4vbGF6eS1yZXN1bHQnKVxubGV0IENvbnRhaW5lciA9IHJlcXVpcmUoJy4vY29udGFpbmVyJylcbmxldCBQcm9jZXNzb3IgPSByZXF1aXJlKCcuL3Byb2Nlc3NvcicpXG5sZXQgc3RyaW5naWZ5ID0gcmVxdWlyZSgnLi9zdHJpbmdpZnknKVxubGV0IGZyb21KU09OID0gcmVxdWlyZSgnLi9mcm9tSlNPTicpXG5sZXQgRG9jdW1lbnQgPSByZXF1aXJlKCcuL2RvY3VtZW50JylcbmxldCBXYXJuaW5nID0gcmVxdWlyZSgnLi93YXJuaW5nJylcbmxldCBDb21tZW50ID0gcmVxdWlyZSgnLi9jb21tZW50JylcbmxldCBBdFJ1bGUgPSByZXF1aXJlKCcuL2F0LXJ1bGUnKVxubGV0IFJlc3VsdCA9IHJlcXVpcmUoJy4vcmVzdWx0LmpzJylcbmxldCBJbnB1dCA9IHJlcXVpcmUoJy4vaW5wdXQnKVxubGV0IHBhcnNlID0gcmVxdWlyZSgnLi9wYXJzZScpXG5sZXQgbGlzdCA9IHJlcXVpcmUoJy4vbGlzdCcpXG5sZXQgUnVsZSA9IHJlcXVpcmUoJy4vcnVsZScpXG5sZXQgUm9vdCA9IHJlcXVpcmUoJy4vcm9vdCcpXG5sZXQgTm9kZSA9IHJlcXVpcmUoJy4vbm9kZScpXG5cbmZ1bmN0aW9uIHBvc3Rjc3MoLi4ucGx1Z2lucykge1xuICBpZiAocGx1Z2lucy5sZW5ndGggPT09IDEgJiYgQXJyYXkuaXNBcnJheShwbHVnaW5zWzBdKSkge1xuICAgIHBsdWdpbnMgPSBwbHVnaW5zWzBdXG4gIH1cbiAgcmV0dXJuIG5ldyBQcm9jZXNzb3IocGx1Z2lucylcbn1cblxucG9zdGNzcy5wbHVnaW4gPSBmdW5jdGlvbiBwbHVnaW4obmFtZSwgaW5pdGlhbGl6ZXIpIHtcbiAgbGV0IHdhcm5pbmdQcmludGVkID0gZmFsc2VcbiAgZnVuY3Rpb24gY3JlYXRvciguLi5hcmdzKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4gJiYgIXdhcm5pbmdQcmludGVkKSB7XG4gICAgICB3YXJuaW5nUHJpbnRlZCA9IHRydWVcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIG5hbWUgK1xuICAgICAgICAgICc6IHBvc3Rjc3MucGx1Z2luIHdhcyBkZXByZWNhdGVkLiBNaWdyYXRpb24gZ3VpZGU6XFxuJyArXG4gICAgICAgICAgJ2h0dHBzOi8vZXZpbG1hcnRpYW5zLmNvbS9jaHJvbmljbGVzL3Bvc3Rjc3MtOC1wbHVnaW4tbWlncmF0aW9uJ1xuICAgICAgKVxuICAgICAgaWYgKHByb2Nlc3MuZW52LkxBTkcgJiYgcHJvY2Vzcy5lbnYuTEFORy5zdGFydHNXaXRoKCdjbicpKSB7XG4gICAgICAgIC8qIGM4IGlnbm9yZSBuZXh0IDcgKi9cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIG5hbWUgK1xuICAgICAgICAgICAgJzog6YeM6Z2iIHBvc3Rjc3MucGx1Z2luIOiiq+W8g+eUqC4g6L+B56e75oyH5Y2XOlxcbicgK1xuICAgICAgICAgICAgJ2h0dHBzOi8vd3d3LnczY3RlY2guY29tL3RvcGljLzIyMjYnXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHRyYW5zZm9ybWVyID0gaW5pdGlhbGl6ZXIoLi4uYXJncylcbiAgICB0cmFuc2Zvcm1lci5wb3N0Y3NzUGx1Z2luID0gbmFtZVxuICAgIHRyYW5zZm9ybWVyLnBvc3Rjc3NWZXJzaW9uID0gbmV3IFByb2Nlc3NvcigpLnZlcnNpb25cbiAgICByZXR1cm4gdHJhbnNmb3JtZXJcbiAgfVxuXG4gIGxldCBjYWNoZVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3JlYXRvciwgJ3Bvc3Rjc3MnLCB7XG4gICAgZ2V0KCkge1xuICAgICAgaWYgKCFjYWNoZSkgY2FjaGUgPSBjcmVhdG9yKClcbiAgICAgIHJldHVybiBjYWNoZVxuICAgIH1cbiAgfSlcblxuICBjcmVhdG9yLnByb2Nlc3MgPSBmdW5jdGlvbiAoY3NzLCBwcm9jZXNzT3B0cywgcGx1Z2luT3B0cykge1xuICAgIHJldHVybiBwb3N0Y3NzKFtjcmVhdG9yKHBsdWdpbk9wdHMpXSkucHJvY2Vzcyhjc3MsIHByb2Nlc3NPcHRzKVxuICB9XG5cbiAgcmV0dXJuIGNyZWF0b3Jcbn1cblxucG9zdGNzcy5zdHJpbmdpZnkgPSBzdHJpbmdpZnlcbnBvc3Rjc3MucGFyc2UgPSBwYXJzZVxucG9zdGNzcy5mcm9tSlNPTiA9IGZyb21KU09OXG5wb3N0Y3NzLmxpc3QgPSBsaXN0XG5cbnBvc3Rjc3MuY29tbWVudCA9IGRlZmF1bHRzID0+IG5ldyBDb21tZW50KGRlZmF1bHRzKVxucG9zdGNzcy5hdFJ1bGUgPSBkZWZhdWx0cyA9PiBuZXcgQXRSdWxlKGRlZmF1bHRzKVxucG9zdGNzcy5kZWNsID0gZGVmYXVsdHMgPT4gbmV3IERlY2xhcmF0aW9uKGRlZmF1bHRzKVxucG9zdGNzcy5ydWxlID0gZGVmYXVsdHMgPT4gbmV3IFJ1bGUoZGVmYXVsdHMpXG5wb3N0Y3NzLnJvb3QgPSBkZWZhdWx0cyA9PiBuZXcgUm9vdChkZWZhdWx0cylcbnBvc3Rjc3MuZG9jdW1lbnQgPSBkZWZhdWx0cyA9PiBuZXcgRG9jdW1lbnQoZGVmYXVsdHMpXG5cbnBvc3Rjc3MuQ3NzU3ludGF4RXJyb3IgPSBDc3NTeW50YXhFcnJvclxucG9zdGNzcy5EZWNsYXJhdGlvbiA9IERlY2xhcmF0aW9uXG5wb3N0Y3NzLkNvbnRhaW5lciA9IENvbnRhaW5lclxucG9zdGNzcy5Qcm9jZXNzb3IgPSBQcm9jZXNzb3JcbnBvc3Rjc3MuRG9jdW1lbnQgPSBEb2N1bWVudFxucG9zdGNzcy5Db21tZW50ID0gQ29tbWVudFxucG9zdGNzcy5XYXJuaW5nID0gV2FybmluZ1xucG9zdGNzcy5BdFJ1bGUgPSBBdFJ1bGVcbnBvc3Rjc3MuUmVzdWx0ID0gUmVzdWx0XG5wb3N0Y3NzLklucHV0ID0gSW5wdXRcbnBvc3Rjc3MuUnVsZSA9IFJ1bGVcbnBvc3Rjc3MuUm9vdCA9IFJvb3RcbnBvc3Rjc3MuTm9kZSA9IE5vZGVcblxuTGF6eVJlc3VsdC5yZWdpc3RlclBvc3Rjc3MocG9zdGNzcylcblxubW9kdWxlLmV4cG9ydHMgPSBwb3N0Y3NzXG5wb3N0Y3NzLmRlZmF1bHQgPSBwb3N0Y3NzXG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBRVosSUFBSUEsY0FBYyxHQUFHQyxPQUFPLENBQUMsb0JBQW9CLENBQUM7QUFDbEQsSUFBSUMsV0FBVyxHQUFHRCxPQUFPLENBQUMsZUFBZSxDQUFDO0FBQzFDLElBQUlFLFVBQVUsR0FBR0YsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUN6QyxJQUFJRyxTQUFTLEdBQUdILE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDdEMsSUFBSUksU0FBUyxHQUFHSixPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ3RDLElBQUlLLFNBQVMsR0FBR0wsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUN0QyxJQUFJTSxRQUFRLEdBQUdOLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFDcEMsSUFBSU8sUUFBUSxHQUFHUCxPQUFPLENBQUMsWUFBWSxDQUFDO0FBQ3BDLElBQUlRLE9BQU8sR0FBR1IsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNsQyxJQUFJUyxPQUFPLEdBQUdULE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDbEMsSUFBSVUsTUFBTSxHQUFHVixPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ2pDLElBQUlXLE1BQU0sR0FBR1gsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUNuQyxJQUFJWSxLQUFLLEdBQUdaLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDOUIsSUFBSWEsS0FBSyxHQUFHYixPQUFPLENBQUMsU0FBUyxDQUFDO0FBQzlCLElBQUljLElBQUksR0FBR2QsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUM1QixJQUFJZSxJQUFJLEdBQUdmLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDNUIsSUFBSWdCLElBQUksR0FBR2hCLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDNUIsSUFBSWlCLElBQUksR0FBR2pCLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFFNUIsU0FBU2tCLE9BQU9BLENBQUMsR0FBR0Ms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