{"version":3,"names":["cov_1zlyy6ied","actualCoverage","s","axios_1","tslib_1","__importDefault","require","toolkit_1","reducer_utils_1","initialState","loading","resetPasswordSuccess","resetPasswordFailure","successMessage","apiUrl","exports","handlePasswordResetInit","createAsyncThunk","mail","f","__awaiter","default","post","headers","serializeError","serializeAxiosError","handlePasswordResetFinish","data","PasswordResetSlice","createSlice","name","reducers","reset","extraReducers","builder","addCase","fulfilled","Object","assign","addMatcher","isPending","state","isRejected","actions","reducer"],"sources":["/Users/pcco056/Documents/Cours ITU/ribouchon/magicventestock/src/main/webapp/app/modules/account/password-reset/password-reset.reducer.ts"],"sourcesContent":["import axios from 'axios';\nimport { createAsyncThunk, createSlice, isPending, isRejected } from '@reduxjs/toolkit';\n\nimport { serializeAxiosError } from 'app/shared/reducers/reducer.utils';\n\nconst initialState = {\n  loading: false,\n  resetPasswordSuccess: false,\n  resetPasswordFailure: false,\n  successMessage: null,\n};\n\nexport type PasswordResetState = Readonly<typeof initialState>;\n\nconst apiUrl = 'api/account/reset-password';\n// Actions\n\nexport const handlePasswordResetInit = createAsyncThunk(\n  'passwordReset/reset_password_init',\n  // If the content-type isn't set that way, axios will try to encode the body and thus modify the data sent to the server.\n  async (mail: string) => axios.post(`${apiUrl}/init`, mail, { headers: { ['Content-Type']: 'text/plain' } }),\n  { serializeError: serializeAxiosError },\n);\n\nexport const handlePasswordResetFinish = createAsyncThunk(\n  'passwordReset/reset_password_finish',\n  async (data: { key: string; newPassword: string }) => axios.post(`${apiUrl}/finish`, data),\n  { serializeError: serializeAxiosError },\n);\n\nexport const PasswordResetSlice = createSlice({\n  name: 'passwordReset',\n  initialState: initialState as PasswordResetState,\n  reducers: {\n    reset() {\n      return initialState;\n    },\n  },\n  extraReducers(builder) {\n    builder\n      .addCase(handlePasswordResetInit.fulfilled, () => ({\n        ...initialState,\n        loading: false,\n        resetPasswordSuccess: true,\n        successMessage: 'Check your email for details on how to reset your password.',\n      }))\n      .addCase(handlePasswordResetFinish.fulfilled, () => ({\n        ...initialState,\n        loading: false,\n        resetPasswordSuccess: true,\n        successMessage: \"Your password couldn't be reset. Remember a password request is only valid for 24 hours.\",\n      }))\n      .addMatcher(isPending(handlePasswordResetInit, handlePasswordResetFinish), state => {\n        state.loading = true;\n      })\n      .addMatcher(isRejected(handlePasswordResetInit, handlePasswordResetFinish), () => ({\n        ...initialState,\n        loading: false,\n        resetPasswordFailure: true,\n      }));\n  },\n});\n\nexport const { reset } = PasswordResetSlice.actions;\n\n// Reducer\nexport default PasswordResetSlice.reducer;\n"],"mappings":"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","ignoreList":[]}