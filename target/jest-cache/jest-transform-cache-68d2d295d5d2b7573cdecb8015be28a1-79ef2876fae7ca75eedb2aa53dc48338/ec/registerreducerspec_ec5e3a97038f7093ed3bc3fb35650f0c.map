{"file":"/Users/pcco056/Documents/Cours ITU/ribouchon/magicventestock/src/main/webapp/app/modules/account/register/register.reducer.spec.ts","mappings":";;;AAAA,0DAA0B;AAC1B,0DAA0B;AAC1B,8CAAkD;AAElD,+EAAqE;AAErE,QAAQ,CAAC,wBAAwB,EAAE,GAAG,EAAE;IACtC,MAAM,YAAY,GAAG;QACnB,OAAO,EAAE,KAAK;QACd,mBAAmB,EAAE,KAAK;QAC1B,mBAAmB,EAAE,KAAK;QAC1B,YAAY,EAAE,IAAI;QAClB,cAAc,EAAE,IAAI;KACrB,CAAC;IAEF,EAAE,CAAC,iCAAiC,EAAE,GAAG,EAAE;QACzC,MAAM,CAAC,IAAA,0BAAQ,EAAC,SAAS,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,OAAO,mBAC5C,YAAY,EACf,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,yBAAyB,EAAE,GAAG,EAAE;QACjC,MAAM,CAAC,IAAA,0BAAQ,EAAC,SAAS,EAAE,EAAE,IAAI,EAAE,iCAAc,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,OAAO,iCACrE,YAAY,KACf,OAAO,EAAE,IAAI,IACb,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,qBAAqB,EAAE,GAAG,EAAE;QAC7B,MAAM,CACJ,IAAA,0BAAQ,EAAC,EAAE,OAAO,EAAE,IAAI,EAAE,mBAAmB,EAAE,IAAI,EAAE,mBAAmB,EAAE,IAAI,EAAE,YAAY,EAAE,EAAE,EAAE,cAAc,EAAE,EAAE,EAAE,EAAE,IAAA,wBAAK,GAAE,CAAC,CACjI,CAAC,OAAO,mBACJ,YAAY,EACf,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sCAAsC,EAAE,GAAG,EAAE;QAC9C,MAAM,CACJ,IAAA,0BAAQ,EAAC,SAAS,EAAE;YAClB,IAAI,EAAE,iCAAc,CAAC,SAAS,CAAC,IAAI;YACnC,OAAO,EAAE,cAAc;SACxB,CAAC,CACH,CAAC,OAAO,iCACJ,YAAY,KACf,mBAAmB,EAAE,IAAI,EACzB,cAAc,EAAE,+DAA+D,IAC/E,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,sCAAsC,EAAE,GAAG,EAAE;QAC9C,MAAM,KAAK,GAAG,EAAE,OAAO,EAAE,YAAY,EAAE,CAAC;QACxC,MAAM,CACJ,IAAA,0BAAQ,EAAC,SAAS,EAAE;YAClB,IAAI,EAAE,iCAAc,CAAC,QAAQ,CAAC,IAAI;YAClC,KAAK;SACN,CAAC,CACH,CAAC,OAAO,iCACJ,YAAY,KACf,mBAAmB,EAAE,IAAI,EACzB,YAAY,EAAE,KAAK,CAAC,OAAO,IAC3B,CAAC;IACL,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,SAAS,EAAE,GAAG,EAAE;QACvB,IAAI,KAAK,CAAC;QAEV,MAAM,cAAc,GAAG,EAAE,KAAK,EAAE,UAAU,EAAE,CAAC;QAC7C,MAAM,QAAQ,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC;QAC3B,MAAM,QAAQ,GAAG,IAAI,CAAC,EAAE,EAAE,CAAC;QAC3B,MAAM,KAAK,GAAG,EAAE,CAAC;QACjB,UAAU,CAAC,GAAG,EAAE;YACd,KAAK,GAAG,IAAA,wBAAc,EAAC;gBACrB,OAAO,EAAE,CAAC,KAAK,GAAG,EAAE,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC,GAAG,KAAK,EAAE,MAAM,CAAC;aACpD,CAAC,CAAC;YACH,eAAK,CAAC,IAAI,GAAG,eAAK,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC;QACrE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,wEAAwE,EAAE,GAAS,EAAE;YACtF,MAAM,GAAG,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC;YAEnD,MAAM,MAAM,GAAG,MAAM,IAAA,iCAAc,EAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;YAEpE,MAAM,aAAa,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAChD,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACzD,MAAM,CAAC,iCAAc,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1D,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAC9C,CAAC,CAAA,CAAC,CAAC;QACH,EAAE,CAAC,0BAA0B,EAAE,GAAS,EAAE;YACxC,MAAM,KAAK,CAAC,QAAQ,CAAC,IAAA,wBAAK,GAAE,CAAC,CAAC;YAC9B,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,MAAM,CAAC,gBAAgB,CAAC,IAAA,wBAAK,GAAE,CAAC,CAAC,CAAC,CAAC;QAC3F,CAAC,CAAA,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["/Users/pcco056/Documents/Cours ITU/ribouchon/magicventestock/src/main/webapp/app/modules/account/register/register.reducer.spec.ts"],"sourcesContent":["import axios from 'axios';\nimport sinon from 'sinon';\nimport { configureStore } from '@reduxjs/toolkit';\n\nimport register, { handleRegister, reset } from './register.reducer';\n\ndescribe('Creating account tests', () => {\n  const initialState = {\n    loading: false,\n    registrationSuccess: false,\n    registrationFailure: false,\n    errorMessage: null,\n    successMessage: null,\n  };\n\n  it('should return the initial state', () => {\n    expect(register(undefined, { type: '' })).toEqual({\n      ...initialState,\n    });\n  });\n\n  it('should detect a request', () => {\n    expect(register(undefined, { type: handleRegister.pending.type })).toEqual({\n      ...initialState,\n      loading: true,\n    });\n  });\n\n  it('should handle RESET', () => {\n    expect(\n      register({ loading: true, registrationSuccess: true, registrationFailure: true, errorMessage: '', successMessage: '' }, reset()),\n    ).toEqual({\n      ...initialState,\n    });\n  });\n\n  it('should handle CREATE_ACCOUNT success', () => {\n    expect(\n      register(undefined, {\n        type: handleRegister.fulfilled.type,\n        payload: 'fake payload',\n      }),\n    ).toEqual({\n      ...initialState,\n      registrationSuccess: true,\n      successMessage: 'Registration saved! Please check your email for confirmation.',\n    });\n  });\n\n  it('should handle CREATE_ACCOUNT failure', () => {\n    const error = { message: 'fake error' };\n    expect(\n      register(undefined, {\n        type: handleRegister.rejected.type,\n        error,\n      }),\n    ).toEqual({\n      ...initialState,\n      registrationFailure: true,\n      errorMessage: error.message,\n    });\n  });\n\n  describe('Actions', () => {\n    let store;\n\n    const resolvedObject = { value: 'whatever' };\n    const getState = jest.fn();\n    const dispatch = jest.fn();\n    const extra = {};\n    beforeEach(() => {\n      store = configureStore({\n        reducer: (state = [], action) => [...state, action],\n      });\n      axios.post = sinon.stub().returns(Promise.resolve(resolvedObject));\n    });\n\n    it('dispatches CREATE_ACCOUNT_PENDING and CREATE_ACCOUNT_FULFILLED actions', async () => {\n      const arg = { login: '', email: '', password: '' };\n\n      const result = await handleRegister(arg)(dispatch, getState, extra);\n\n      const pendingAction = dispatch.mock.calls[0][0];\n      expect(pendingAction.meta.requestStatus).toBe('pending');\n      expect(handleRegister.fulfilled.match(result)).toBe(true);\n      expect(result.payload).toBe(resolvedObject);\n    });\n    it('dispatches RESET actions', async () => {\n      await store.dispatch(reset());\n      expect(store.getState()).toEqual([expect.any(Object), expect.objectContaining(reset())]);\n    });\n  });\n});\n"],"version":3}