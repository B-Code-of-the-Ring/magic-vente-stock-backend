dfc0144c0ab2304b6b389e4aec6234b5
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _classnames = _interopRequireDefault(require("classnames"));
var _Portal = _interopRequireDefault(require("./Portal"));
var _Fade = _interopRequireDefault(require("./Fade"));
var _utils = require("./utils");
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
function _extends() {
  _extends = Object.assign ? Object.assign.bind() : function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    enumerableOnly && (symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    })), keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = null != arguments[i] ? arguments[i] : {};
    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {
      _defineProperty(target, key, source[key]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {
      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
    });
  }
  return target;
}
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function noop() {}
const FadePropTypes = _propTypes.default.shape(_Fade.default.propTypes);
const propTypes = {
  autoFocus: _propTypes.default.bool,
  backdrop: _propTypes.default.bool,
  backdropClassName: _propTypes.default.string,
  backdropTransition: FadePropTypes,
  children: _propTypes.default.node,
  className: _propTypes.default.string,
  container: _utils.targetPropType,
  cssModule: _propTypes.default.object,
  direction: _propTypes.default.oneOf(['start', 'end', 'bottom', 'top']),
  fade: _propTypes.default.bool,
  innerRef: _propTypes.default.oneOfType([_propTypes.default.object, _propTypes.default.string, _propTypes.default.func]),
  isOpen: _propTypes.default.bool,
  keyboard: _propTypes.default.bool,
  labelledBy: _propTypes.default.string,
  offcanvasTransition: FadePropTypes,
  onClosed: _propTypes.default.func,
  onEnter: _propTypes.default.func,
  onExit: _propTypes.default.func,
  style: _propTypes.default.object,
  onOpened: _propTypes.default.func,
  returnFocusAfterClose: _propTypes.default.bool,
  role: _propTypes.default.string,
  scrollable: _propTypes.default.bool,
  toggle: _propTypes.default.func,
  trapFocus: _propTypes.default.bool,
  unmountOnClose: _propTypes.default.bool,
  zIndex: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])
};
const propsToOmit = Object.keys(propTypes);
const defaultProps = {
  isOpen: false,
  autoFocus: true,
  direction: 'start',
  scrollable: false,
  role: 'dialog',
  backdrop: true,
  keyboard: true,
  zIndex: 1050,
  fade: true,
  onOpened: noop,
  onClosed: noop,
  offcanvasTransition: {
    timeout: _utils.TransitionTimeouts.Offcanvas
  },
  backdropTransition: {
    mountOnEnter: true,
    timeout: _utils.TransitionTimeouts.Fade // uses standard fade transition
  },
  unmountOnClose: true,
  returnFocusAfterClose: true,
  container: 'body',
  trapFocus: false
};
class Offcanvas extends _react.default.Component {
  constructor(props) {
    super(props);
    this._element = null;
    this._originalBodyPadding = null;
    this.getFocusableChildren = this.getFocusableChildren.bind(this);
    this.handleBackdropClick = this.handleBackdropClick.bind(this);
    this.handleBackdropMouseDown = this.handleBackdropMouseDown.bind(this);
    this.handleEscape = this.handleEscape.bind(this);
    this.handleTab = this.handleTab.bind(this);
    this.onOpened = this.onOpened.bind(this);
    this.onClosed = this.onClosed.bind(this);
    this.manageFocusAfterClose = this.manageFocusAfterClose.bind(this);
    this.clearBackdropAnimationTimeout = this.clearBackdropAnimationTimeout.bind(this);
    this.trapFocus = this.trapFocus.bind(this);
    this._backdrop = /*#__PURE__*/_react.default.createRef();
    this._dialog = /*#__PURE__*/_react.default.createRef();
    this.state = {
      isOpen: false
    };
  }
  componentDidMount() {
    const {
      isOpen,
      autoFocus,
      onEnter
    } = this.props;
    if (isOpen) {
      this.init();
      this.setState({
        isOpen: true
      });
      if (autoFocus) {
        this.setFocus();
      }
    }
    if (onEnter) {
      onEnter();
    }

    // traps focus inside the Offcanvas, even if the browser address bar is focused
    document.addEventListener('focus', this.trapFocus, true);
    this._isMounted = true;
  }
  componentDidUpdate(prevProps, prevState) {
    if (this.props.isOpen && !prevProps.isOpen) {
      this.init();
      this.setState({
        isOpen: true
      });
      return;
    }

    // now Offcanvas Dialog is rendered and we can refer this._element and this._dialog
    if (this.props.autoFocus && this.state.isOpen && !prevState.isOpen) {
      this.setFocus();
    }
    if (this._element && prevProps.zIndex !== this.props.zIndex) {
      this._element.style.zIndex = this.props.zIndex;
    }
  }
  componentWillUnmount() {
    this.clearBackdropAnimationTimeout();
    if (this.props.onExit) {
      this.props.onExit();
    }
    if (this._element) {
      this.destroy();
      if (this.props.isOpen || this.state.isOpen) {
        this.close();
      }
    }
    document.removeEventListener('focus', this.trapFocus, true);
    this._isMounted = false;
  }

  // not mouseUp because scrollbar fires it, shouldn't close when user scrolls
  handleBackdropClick(e) {
    if (e.target === this._mouseDownElement) {
      e.stopPropagation();
      const backdrop = this._backdrop.current;
      if (!this.props.isOpen || this.props.backdrop !== true) return;
      if (backdrop && e.target === backdrop && this.props.toggle) {
        this.props.toggle(e);
      }
    }
  }
  handleTab(e) {
    if (e.which !== 9) return;
    if (this.offcanvasIndex < Offcanvas.openCount - 1) return; // last opened offcanvas

    const focusableChildren = this.getFocusableChildren();
    const totalFocusable = focusableChildren.length;
    if (totalFocusable === 0) return;
    const currentFocus = this.getFocusedChild();
    let focusedIndex = 0;
    for (let i = 0; i < totalFocusable; i += 1) {
      if (focusableChildren[i] === currentFocus) {
        focusedIndex = i;
        break;
      }
    }
    if (e.shiftKey && focusedIndex === 0) {
      e.preventDefault();
      focusableChildren[totalFocusable - 1].focus();
    } else if (!e.shiftKey && focusedIndex === totalFocusable - 1) {
      e.preventDefault();
      focusableChildren[0].focus();
    }
  }
  handleBackdropMouseDown(e) {
    this._mouseDownElement = e.target;
  }
  handleEscape(e) {
    if (this.props.isOpen && e.keyCode === _utils.keyCodes.esc && this.props.toggle) {
      if (this.props.keyboard) {
        e.preventDefault();
        e.stopPropagation();
        this.props.toggle(e);
      }
    }
  }
  onOpened(node, isAppearing) {
    this.props.onOpened();
    (this.props.offcanvasTransition.onEntered || noop)(node, isAppearing);
  }
  onClosed(node) {
    const {
      unmountOnClose
    } = this.props;
    // so all methods get called before it is unmounted
    this.props.onClosed();
    (this.props.offcanvasTransition.onExited || noop)(node);
    if (unmountOnClose) {
      this.destroy();
    }
    this.close();
    if (this._isMounted) {
      this.setState({
        isOpen: false
      });
    }
  }
  setFocus() {
    if (this._dialog.current && typeof this._dialog.current.focus === 'function') {
      this._dialog.current.focus();
    }
  }
  getFocusableChildren() {
    return this._element.querySelectorAll(_utils.focusableElements.join(', '));
  }
  getFocusedChild() {
    let currentFocus;
    const focusableChildren = this.getFocusableChildren();
    try {
      currentFocus = document.activeElement;
    } catch (err) {
      currentFocus = focusableChildren[0];
    }
    return currentFocus;
  }
  trapFocus(ev) {
    if (!this.props.trapFocus) {
      return;
    }
    if (!this._element) {
      // element is not attached
      return;
    }
    if (this._dialog.current === ev.target) {
      // initial focus when the Offcanvas is opened
      return;
    }
    if (this.offcanvasIndex < Offcanvas.openCount - 1) {
      // last opened offcanvas
      return;
    }
    const children = this.getFocusableChildren();
    for (let i = 0; i < children.length; i += 1) {
      // focus is already inside the Offcanvas
      if (children[i] === ev.target) return;
    }
    if (children.length > 0) {
      // otherwise focus the first focusable element in the Offcanvas
      ev.preventDefault();
      ev.stopPropagation();
      children[0].focus();
    }
  }
  init() {
    try {
      this._triggeringElement = document.activeElement;
    } catch (err) {
      this._triggeringElement = null;
    }
    if (!this._element) {
      this._element = document.createElement('div');
      this._element.setAttribute('tabindex', '-1');
      this._element.style.position = 'relative';
      this._element.style.zIndex = this.props.zIndex;
      this._mountContainer = (0, _utils.getTarget)(this.props.container);
      this._mountContainer.appendChild(this._element);
    }
    this._originalBodyPadding = (0, _utils.getOriginalBodyPadding)();
    (0, _utils.conditionallyUpdateScrollbar)();
    if (Offcanvas.openCount === 0 && this.props.backdrop && !this.props.scrollable) {
      document.body.style.overflow = 'hidden';
    }
    this.offcanvasIndex = Offcanvas.openCount;
    Offcanvas.openCount += 1;
  }
  destroy() {
    if (this._element) {
      this._mountContainer.removeChild(this._element);
      this._element = null;
    }
    this.manageFocusAfterClose();
  }
  manageFocusAfterClose() {
    if (this._triggeringElement) {
      const {
        returnFocusAfterClose
      } = this.props;
      if (this._triggeringElement.focus && returnFocusAfterClose) this._triggeringElement.focus();
      this._triggeringElement = null;
    }
  }
  close() {
    this.manageFocusAfterClose();
    Offcanvas.openCount = Math.max(0, Offcanvas.openCount - 1);
    document.body.style.overflow = null;
    (0, _utils.setScrollbarWidth)(this._originalBodyPadding);
  }
  clearBackdropAnimationTimeout() {
    if (this._backdropAnimationTimeout) {
      clearTimeout(this._backdropAnimationTimeout);
      this._backdropAnimationTimeout = undefined;
    }
  }
  render() {
    const {
      direction,
      unmountOnClose
    } = this.props;
    if (!!this._element && (this.state.isOpen || !unmountOnClose)) {
      const isOffcanvasHidden = !!this._element && !this.state.isOpen && !unmountOnClose;
      this._element.style.display = isOffcanvasHidden ? 'none' : 'block';
      const {
        className,
        backdropClassName,
        cssModule,
        isOpen,
        backdrop,
        role,
        labelledBy,
        style
      } = this.props;
      const offcanvasAttributes = {
        onKeyUp: this.handleEscape,
        onKeyDown: this.handleTab,
        'aria-labelledby': labelledBy,
        role,
        tabIndex: '-1'
      };
      const hasTransition = this.props.fade;
      const offcanvasTransition = _objectSpread(_objectSpread(_objectSpread({}, _Fade.default.defaultProps), this.props.offcanvasTransition), {}, {
        baseClass: hasTransition ? this.props.offcanvasTransition.baseClass : '',
        timeout: hasTransition ? this.props.offcanvasTransition.timeout : 0
      });
      const backdropTransition = _objectSpread(_objectSpread(_objectSpread({}, _Fade.default.defaultProps), this.props.backdropTransition), {}, {
        baseClass: hasTransition ? this.props.backdropTransition.baseClass : '',
        timeout: hasTransition ? this.props.backdropTransition.timeout : 0
      });
      const Backdrop = backdrop && (hasTransition ? /*#__PURE__*/_react.default.createElement(_Fade.default, _extends({}, backdropTransition, {
        in: isOpen && !!backdrop,
        innerRef: this._backdrop,
        cssModule: cssModule,
        className: (0, _utils.mapToCssModules)((0, _classnames.default)('offcanvas-backdrop', backdropClassName), cssModule),
        onClick: this.handleBackdropClick,
        onMouseDown: this.handleBackdropMouseDown
      })) : /*#__PURE__*/_react.default.createElement("div", {
        className: (0, _utils.mapToCssModules)((0, _classnames.default)('offcanvas-backdrop', 'show', backdropClassName), cssModule),
        ref: this._backdrop,
        onClick: this.handleBackdropClick,
        onMouseDown: this.handleBackdropMouseDown
      }));
      const attributes = (0, _utils.omit)(this.props, propsToOmit);
      return /*#__PURE__*/_react.default.createElement(_Portal.default, {
        node: this._element
      }, /*#__PURE__*/_react.default.createElement(_Fade.default, _extends({}, attributes, offcanvasAttributes, offcanvasTransition, {
        in: isOpen,
        onEntered: this.onOpened,
        onExited: this.onClosed,
        cssModule: cssModule,
        className: (0, _utils.mapToCssModules)((0, _classnames.default)('offcanvas', className, `offcanvas-${direction}`), cssModule),
        innerRef: this._dialog,
        style: _objectSpread(_objectSpread({}, style), {}, {
          visibility: isOpen ? 'visible' : 'hidden'
        })
      }), this.props.children), Backdrop);
    }
    return null;
  }
}
Offcanvas.propTypes = propTypes;
Offcanvas.defaultProps = defaultProps;
Offcanvas.openCount = 0;
var _default = Offcanvas;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wcm9wVHlwZXMiLCJfY2xhc3NuYW1lcyIsIl9Qb3J0YWwiLCJfRmFkZSIsIl91dGlscyIsIm9iaiIsIl9fZXNNb2R1bGUiLCJfZXh0ZW5kcyIsImFzc2lnbiIsImJpbmQiLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJvd25LZXlzIiwib2JqZWN0IiwiZW51bWVyYWJsZU9ubHkiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwic3ltYm9scyIsImZpbHRlciIsInN5bSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiX29iamVjdFNwcmVhZCIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwibm9vcCIsIkZhZGVQcm9wVHlwZXMiLCJzaGFwZSIsInByb3BUeXBlcyIsImF1dG9Gb2N1cyIsImJvb2wiLCJiYWNrZHJvcCIsImJhY2tkcm9wQ2xhc3NOYW1lIiwic3RyaW5nIiwiYmFja2Ryb3BUcmFuc2l0aW9uIiwiY2hpbGRyZW4iLCJub2RlIiwiY2xhc3NOYW1lIiwiY29udGFpbmVyIiwidGFyZ2V0UHJvcFR5cGUiLCJjc3NNb2R1bGUiLCJkaXJlY3Rpb24iLCJvbmVPZiIsImZhZGUiLCJpbm5lclJlZiIsIm9uZU9mVHlwZSIsImZ1bmMiLCJpc09wZW4iLCJrZXlib2FyZCIsImxhYmVsbGVkQnkiLCJvZmZjYW52YXNUcmFuc2l0aW9uIiwib25DbG9zZWQiLCJvbkVudGVyIiwib25FeGl0Iiwic3R5bGUiLCJvbk9wZW5lZCIsInJldHVybkZvY3VzQWZ0ZXJDbG9zZSIsInJvbGUiLCJzY3JvbGxhYmxlIiwidG9nZ2xlIiwidHJhcEZvY3VzIiwidW5tb3VudE9uQ2xvc2UiLCJ6SW5kZXgiLCJudW1iZXIiLCJwcm9wc1RvT21pdCIsImRlZmF1bHRQcm9wcyIsInRpbWVvdXQiLCJUcmFuc2l0aW9uVGltZW91dHMiLCJPZmZjYW52YXMiLCJtb3VudE9uRW50ZXIiLCJGYWRlIiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsIl9lbGVtZW50IiwiX29yaWdpbmFsQm9keVBhZGRpbmciLCJnZXRGb2N1c2FibGVDaGlsZHJlbiIsImhhbmRsZUJhY2tkcm9wQ2xpY2siLCJoYW5kbGVCYWNrZHJvcE1vdXNlRG93biIsImhhbmRsZUVzY2FwZSIsImhhbmRsZVRhYiIsIm1hbmFnZUZvY3VzQWZ0ZXJDbG9zZSIsImNsZWFyQmFja2Ryb3BBbmltYXRpb25UaW1lb3V0IiwiX2JhY2tkcm9wIiwiY3JlYXRlUmVmIiwiX2RpYWxvZyIsInN0YXRlIiwiY29tcG9uZW50RGlkTW91bnQiLCJpbml0Iiwic2V0U3RhdGUiLCJzZXRGb2N1cyIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9pc01vdW50ZWQiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJwcmV2U3RhdGUiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImRlc3Ryb3kiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwiX21vdXNlRG93bkVsZW1lbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJjdXJyZW50Iiwid2hpY2giLCJvZmZjYW52YXNJbmRleCIsIm9wZW5Db3VudCIsImZvY3VzYWJsZUNoaWxkcmVuIiwidG90YWxGb2N1c2FibGUiLCJjdXJyZW50Rm9jdXMiLCJnZXRGb2N1c2VkQ2hpbGQiLCJmb2N1c2VkSW5kZXgiLCJzaGlmdEtleSIsInByZXZlbnREZWZhdWx0IiwiZm9jdXMiLCJrZXlDb2RlIiwia2V5Q29kZXMiLCJlc2MiLCJpc0FwcGVhcmluZyIsIm9uRW50ZXJlZCIsIm9uRXhpdGVkIiwicXVlcnlTZWxlY3RvckFsbCIsImZvY3VzYWJsZUVsZW1lbnRzIiwiam9pbiIsImFjdGl2ZUVsZW1lbnQiLCJlcnIiLCJldiIsIl90cmlnZ2VyaW5nRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJwb3NpdGlvbiIsIl9tb3VudENvbnRhaW5lciIsImdldFRhcmdldCIsImFwcGVuZENoaWxkIiwiZ2V0T3JpZ2luYWxCb2R5UGFkZGluZyIsImNvbmRpdGlvbmFsbHlVcGRhdGVTY3JvbGxiYXIiLCJib2R5Iiwib3ZlcmZsb3ciLCJyZW1vdmVDaGlsZCIsIk1hdGgiLCJtYXgiLCJzZXRTY3JvbGxiYXJXaWR0aCIsIl9iYWNrZHJvcEFuaW1hdGlvblRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJ1bmRlZmluZWQiLCJyZW5kZXIiLCJpc09mZmNhbnZhc0hpZGRlbiIsImRpc3BsYXkiLCJvZmZjYW52YXNBdHRyaWJ1dGVzIiwib25LZXlVcCIsIm9uS2V5RG93biIsInRhYkluZGV4IiwiaGFzVHJhbnNpdGlvbiIsImJhc2VDbGFzcyIsIkJhY2tkcm9wIiwiaW4iLCJtYXBUb0Nzc01vZHVsZXMiLCJvbkNsaWNrIiwib25Nb3VzZURvd24iLCJyZWYiLCJhdHRyaWJ1dGVzIiwib21pdCIsInZpc2liaWxpdHkiLCJfZGVmYXVsdCJdLCJzb3VyY2VzIjpbIk9mZmNhbnZhcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcbnZhciBfcmVhY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSk7XG52YXIgX3Byb3BUeXBlcyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcInByb3AtdHlwZXNcIikpO1xudmFyIF9jbGFzc25hbWVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiY2xhc3NuYW1lc1wiKSk7XG52YXIgX1BvcnRhbCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vUG9ydGFsXCIpKTtcbnZhciBfRmFkZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vRmFkZVwiKSk7XG52YXIgX3V0aWxzID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7IF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KSksIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IG51bGwgIT0gYXJndW1lbnRzW2ldID8gYXJndW1lbnRzW2ldIDoge307IGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSkgOiBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5mdW5jdGlvbiBub29wKCkge31cbmNvbnN0IEZhZGVQcm9wVHlwZXMgPSBfcHJvcFR5cGVzLmRlZmF1bHQuc2hhcGUoX0ZhZGUuZGVmYXVsdC5wcm9wVHlwZXMpO1xuY29uc3QgcHJvcFR5cGVzID0ge1xuICBhdXRvRm9jdXM6IF9wcm9wVHlwZXMuZGVmYXVsdC5ib29sLFxuICBiYWNrZHJvcDogX3Byb3BUeXBlcy5kZWZhdWx0LmJvb2wsXG4gIGJhY2tkcm9wQ2xhc3NOYW1lOiBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nLFxuICBiYWNrZHJvcFRyYW5zaXRpb246IEZhZGVQcm9wVHlwZXMsXG4gIGNoaWxkcmVuOiBfcHJvcFR5cGVzLmRlZmF1bHQubm9kZSxcbiAgY2xhc3NOYW1lOiBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nLFxuICBjb250YWluZXI6IF91dGlscy50YXJnZXRQcm9wVHlwZSxcbiAgY3NzTW9kdWxlOiBfcHJvcFR5cGVzLmRlZmF1bHQub2JqZWN0LFxuICBkaXJlY3Rpb246IF9wcm9wVHlwZXMuZGVmYXVsdC5vbmVPZihbJ3N0YXJ0JywgJ2VuZCcsICdib3R0b20nLCAndG9wJ10pLFxuICBmYWRlOiBfcHJvcFR5cGVzLmRlZmF1bHQuYm9vbCxcbiAgaW5uZXJSZWY6IF9wcm9wVHlwZXMuZGVmYXVsdC5vbmVPZlR5cGUoW19wcm9wVHlwZXMuZGVmYXVsdC5vYmplY3QsIF9wcm9wVHlwZXMuZGVmYXVsdC5zdHJpbmcsIF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jXSksXG4gIGlzT3BlbjogX3Byb3BUeXBlcy5kZWZhdWx0LmJvb2wsXG4gIGtleWJvYXJkOiBfcHJvcFR5cGVzLmRlZmF1bHQuYm9vbCxcbiAgbGFiZWxsZWRCeTogX3Byb3BUeXBlcy5kZWZhdWx0LnN0cmluZyxcbiAgb2ZmY2FudmFzVHJhbnNpdGlvbjogRmFkZVByb3BUeXBlcyxcbiAgb25DbG9zZWQ6IF9wcm9wVHlwZXMuZGVmYXVsdC5mdW5jLFxuICBvbkVudGVyOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYyxcbiAgb25FeGl0OiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYyxcbiAgc3R5bGU6IF9wcm9wVHlwZXMuZGVmYXVsdC5vYmplY3QsXG4gIG9uT3BlbmVkOiBfcHJvcFR5cGVzLmRlZmF1bHQuZnVuYyxcbiAgcmV0dXJuRm9jdXNBZnRlckNsb3NlOiBfcHJvcFR5cGVzLmRlZmF1bHQuYm9vbCxcbiAgcm9sZTogX3Byb3BUeXBlcy5kZWZhdWx0LnN0cmluZyxcbiAgc2Nyb2xsYWJsZTogX3Byb3BUeXBlcy5kZWZhdWx0LmJvb2wsXG4gIHRvZ2dsZTogX3Byb3BUeXBlcy5kZWZhdWx0LmZ1bmMsXG4gIHRyYXBGb2N1czogX3Byb3BUeXBlcy5kZWZhdWx0LmJvb2wsXG4gIHVubW91bnRPbkNsb3NlOiBfcHJvcFR5cGVzLmRlZmF1bHQuYm9vbCxcbiAgekluZGV4OiBfcHJvcFR5cGVzLmRlZmF1bHQub25lT2ZUeXBlKFtfcHJvcFR5cGVzLmRlZmF1bHQubnVtYmVyLCBfcHJvcFR5cGVzLmRlZmF1bHQuc3RyaW5nXSlcbn07XG5jb25zdCBwcm9wc1RvT21pdCA9IE9iamVjdC5rZXlzKHByb3BUeXBlcyk7XG5jb25zdCBkZWZhdWx0UHJvcHMgPSB7XG4gIGlzT3BlbjogZmFsc2UsXG4gIGF1dG9Gb2N1czogdHJ1ZSxcbiAgZGlyZWN0aW9uOiAnc3RhcnQnLFxuICBzY3JvbGxhYmxlOiBmYWxzZSxcbiAgcm9sZTogJ2RpYWxvZycsXG4gIGJhY2tkcm9wOiB0cnVlLFxuICBrZXlib2FyZDogdHJ1ZSxcbiAgekluZGV4OiAxMDUwLFxuICBmYWRlOiB0cnVlLFxuICBvbk9wZW5lZDogbm9vcCxcbiAgb25DbG9zZWQ6IG5vb3AsXG4gIG9mZmNhbnZhc1RyYW5zaXRpb246IHtcbiAgICB0aW1lb3V0OiBfdXRpbHMuVHJhbnNpdGlvblRpbWVvdXRzLk9mZmNhbnZhc1xuICB9LFxuICBiYWNrZHJvcFRyYW5zaXRpb246IHtcbiAgICBtb3VudE9uRW50ZXI6IHRydWUsXG4gICAgdGltZW91dDogX3V0aWxzLlRyYW5zaXRpb25UaW1lb3V0cy5GYWRlIC8vIHVzZXMgc3RhbmRhcmQgZmFkZSB0cmFuc2l0aW9uXG4gIH0sXG5cbiAgdW5tb3VudE9uQ2xvc2U6IHRydWUsXG4gIHJldHVybkZvY3VzQWZ0ZXJDbG9zZTogdHJ1ZSxcbiAgY29udGFpbmVyOiAnYm9keScsXG4gIHRyYXBGb2N1czogZmFsc2Vcbn07XG5jbGFzcyBPZmZjYW52YXMgZXh0ZW5kcyBfcmVhY3QuZGVmYXVsdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLl9vcmlnaW5hbEJvZHlQYWRkaW5nID0gbnVsbDtcbiAgICB0aGlzLmdldEZvY3VzYWJsZUNoaWxkcmVuID0gdGhpcy5nZXRGb2N1c2FibGVDaGlsZHJlbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlQmFja2Ryb3BDbGljayA9IHRoaXMuaGFuZGxlQmFja2Ryb3BDbGljay5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlQmFja2Ryb3BNb3VzZURvd24gPSB0aGlzLmhhbmRsZUJhY2tkcm9wTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVFc2NhcGUgPSB0aGlzLmhhbmRsZUVzY2FwZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFuZGxlVGFiID0gdGhpcy5oYW5kbGVUYWIuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uT3BlbmVkID0gdGhpcy5vbk9wZW5lZC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25DbG9zZWQgPSB0aGlzLm9uQ2xvc2VkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5tYW5hZ2VGb2N1c0FmdGVyQ2xvc2UgPSB0aGlzLm1hbmFnZUZvY3VzQWZ0ZXJDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2xlYXJCYWNrZHJvcEFuaW1hdGlvblRpbWVvdXQgPSB0aGlzLmNsZWFyQmFja2Ryb3BBbmltYXRpb25UaW1lb3V0LmJpbmQodGhpcyk7XG4gICAgdGhpcy50cmFwRm9jdXMgPSB0aGlzLnRyYXBGb2N1cy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2JhY2tkcm9wID0gLyojX19QVVJFX18qL19yZWFjdC5kZWZhdWx0LmNyZWF0ZVJlZigpO1xuICAgIHRoaXMuX2RpYWxvZyA9IC8qI19fUFVSRV9fKi9fcmVhY3QuZGVmYXVsdC5jcmVhdGVSZWYoKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaXNPcGVuOiBmYWxzZVxuICAgIH07XG4gIH1cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgY29uc3Qge1xuICAgICAgaXNPcGVuLFxuICAgICAgYXV0b0ZvY3VzLFxuICAgICAgb25FbnRlclxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGlmIChpc09wZW4pIHtcbiAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlzT3BlbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgICBpZiAoYXV0b0ZvY3VzKSB7XG4gICAgICAgIHRoaXMuc2V0Rm9jdXMoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9uRW50ZXIpIHtcbiAgICAgIG9uRW50ZXIoKTtcbiAgICB9XG5cbiAgICAvLyB0cmFwcyBmb2N1cyBpbnNpZGUgdGhlIE9mZmNhbnZhcywgZXZlbiBpZiB0aGUgYnJvd3NlciBhZGRyZXNzIGJhciBpcyBmb2N1c2VkXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLnRyYXBGb2N1cywgdHJ1ZSk7XG4gICAgdGhpcy5faXNNb3VudGVkID0gdHJ1ZTtcbiAgfVxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5pc09wZW4gJiYgIXByZXZQcm9wcy5pc09wZW4pIHtcbiAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlzT3BlbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gbm93IE9mZmNhbnZhcyBEaWFsb2cgaXMgcmVuZGVyZWQgYW5kIHdlIGNhbiByZWZlciB0aGlzLl9lbGVtZW50IGFuZCB0aGlzLl9kaWFsb2dcbiAgICBpZiAodGhpcy5wcm9wcy5hdXRvRm9jdXMgJiYgdGhpcy5zdGF0ZS5pc09wZW4gJiYgIXByZXZTdGF0ZS5pc09wZW4pIHtcbiAgICAgIHRoaXMuc2V0Rm9jdXMoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2VsZW1lbnQgJiYgcHJldlByb3BzLnpJbmRleCAhPT0gdGhpcy5wcm9wcy56SW5kZXgpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUuekluZGV4ID0gdGhpcy5wcm9wcy56SW5kZXg7XG4gICAgfVxuICB9XG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuY2xlYXJCYWNrZHJvcEFuaW1hdGlvblRpbWVvdXQoKTtcbiAgICBpZiAodGhpcy5wcm9wcy5vbkV4aXQpIHtcbiAgICAgIHRoaXMucHJvcHMub25FeGl0KCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9lbGVtZW50KSB7XG4gICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgIGlmICh0aGlzLnByb3BzLmlzT3BlbiB8fCB0aGlzLnN0YXRlLmlzT3Blbikge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy50cmFwRm9jdXMsIHRydWUpO1xuICAgIHRoaXMuX2lzTW91bnRlZCA9IGZhbHNlO1xuICB9XG5cbiAgLy8gbm90IG1vdXNlVXAgYmVjYXVzZSBzY3JvbGxiYXIgZmlyZXMgaXQsIHNob3VsZG4ndCBjbG9zZSB3aGVuIHVzZXIgc2Nyb2xsc1xuICBoYW5kbGVCYWNrZHJvcENsaWNrKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMuX21vdXNlRG93bkVsZW1lbnQpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBjb25zdCBiYWNrZHJvcCA9IHRoaXMuX2JhY2tkcm9wLmN1cnJlbnQ7XG4gICAgICBpZiAoIXRoaXMucHJvcHMuaXNPcGVuIHx8IHRoaXMucHJvcHMuYmFja2Ryb3AgIT09IHRydWUpIHJldHVybjtcbiAgICAgIGlmIChiYWNrZHJvcCAmJiBlLnRhcmdldCA9PT0gYmFja2Ryb3AgJiYgdGhpcy5wcm9wcy50b2dnbGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy50b2dnbGUoZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGhhbmRsZVRhYihlKSB7XG4gICAgaWYgKGUud2hpY2ggIT09IDkpIHJldHVybjtcbiAgICBpZiAodGhpcy5vZmZjYW52YXNJbmRleCA8IE9mZmNhbnZhcy5vcGVuQ291bnQgLSAxKSByZXR1cm47IC8vIGxhc3Qgb3BlbmVkIG9mZmNhbnZhc1xuXG4gICAgY29uc3QgZm9jdXNhYmxlQ2hpbGRyZW4gPSB0aGlzLmdldEZvY3VzYWJsZUNoaWxkcmVuKCk7XG4gICAgY29uc3QgdG90YWxGb2N1c2FibGUgPSBmb2N1c2FibGVDaGlsZHJlbi5sZW5ndGg7XG4gICAgaWYgKHRvdGFsRm9jdXNhYmxlID09PSAwKSByZXR1cm47XG4gICAgY29uc3QgY3VycmVudEZvY3VzID0gdGhpcy5nZXRGb2N1c2VkQ2hpbGQoKTtcbiAgICBsZXQgZm9jdXNlZEluZGV4ID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsRm9jdXNhYmxlOyBpICs9IDEpIHtcbiAgICAgIGlmIChmb2N1c2FibGVDaGlsZHJlbltpXSA9PT0gY3VycmVudEZvY3VzKSB7XG4gICAgICAgIGZvY3VzZWRJbmRleCA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZS5zaGlmdEtleSAmJiBmb2N1c2VkSW5kZXggPT09IDApIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGZvY3VzYWJsZUNoaWxkcmVuW3RvdGFsRm9jdXNhYmxlIC0gMV0uZm9jdXMoKTtcbiAgICB9IGVsc2UgaWYgKCFlLnNoaWZ0S2V5ICYmIGZvY3VzZWRJbmRleCA9PT0gdG90YWxGb2N1c2FibGUgLSAxKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBmb2N1c2FibGVDaGlsZHJlblswXS5mb2N1cygpO1xuICAgIH1cbiAgfVxuICBoYW5kbGVCYWNrZHJvcE1vdXNlRG93bihlKSB7XG4gICAgdGhpcy5fbW91c2VEb3duRWxlbWVudCA9IGUudGFyZ2V0O1xuICB9XG4gIGhhbmRsZUVzY2FwZShlKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuaXNPcGVuICYmIGUua2V5Q29kZSA9PT0gX3V0aWxzLmtleUNvZGVzLmVzYyAmJiB0aGlzLnByb3BzLnRvZ2dsZSkge1xuICAgICAgaWYgKHRoaXMucHJvcHMua2V5Ym9hcmQpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnByb3BzLnRvZ2dsZShlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgb25PcGVuZWQobm9kZSwgaXNBcHBlYXJpbmcpIHtcbiAgICB0aGlzLnByb3BzLm9uT3BlbmVkKCk7XG4gICAgKHRoaXMucHJvcHMub2ZmY2FudmFzVHJhbnNpdGlvbi5vbkVudGVyZWQgfHwgbm9vcCkobm9kZSwgaXNBcHBlYXJpbmcpO1xuICB9XG4gIG9uQ2xvc2VkKG5vZGUpIHtcbiAgICBjb25zdCB7XG4gICAgICB1bm1vdW50T25DbG9zZVxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIC8vIHNvIGFsbCBtZXRob2RzIGdldCBjYWxsZWQgYmVmb3JlIGl0IGlzIHVubW91bnRlZFxuICAgIHRoaXMucHJvcHMub25DbG9zZWQoKTtcbiAgICAodGhpcy5wcm9wcy5vZmZjYW52YXNUcmFuc2l0aW9uLm9uRXhpdGVkIHx8IG5vb3ApKG5vZGUpO1xuICAgIGlmICh1bm1vdW50T25DbG9zZSkge1xuICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgfVxuICAgIHRoaXMuY2xvc2UoKTtcbiAgICBpZiAodGhpcy5faXNNb3VudGVkKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaXNPcGVuOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHNldEZvY3VzKCkge1xuICAgIGlmICh0aGlzLl9kaWFsb2cuY3VycmVudCAmJiB0eXBlb2YgdGhpcy5fZGlhbG9nLmN1cnJlbnQuZm9jdXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX2RpYWxvZy5jdXJyZW50LmZvY3VzKCk7XG4gICAgfVxuICB9XG4gIGdldEZvY3VzYWJsZUNoaWxkcmVuKCkge1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoX3V0aWxzLmZvY3VzYWJsZUVsZW1lbnRzLmpvaW4oJywgJykpO1xuICB9XG4gIGdldEZvY3VzZWRDaGlsZCgpIHtcbiAgICBsZXQgY3VycmVudEZvY3VzO1xuICAgIGNvbnN0IGZvY3VzYWJsZUNoaWxkcmVuID0gdGhpcy5nZXRGb2N1c2FibGVDaGlsZHJlbigpO1xuICAgIHRyeSB7XG4gICAgICBjdXJyZW50Rm9jdXMgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY3VycmVudEZvY3VzID0gZm9jdXNhYmxlQ2hpbGRyZW5bMF07XG4gICAgfVxuICAgIHJldHVybiBjdXJyZW50Rm9jdXM7XG4gIH1cbiAgdHJhcEZvY3VzKGV2KSB7XG4gICAgaWYgKCF0aGlzLnByb3BzLnRyYXBGb2N1cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2VsZW1lbnQpIHtcbiAgICAgIC8vIGVsZW1lbnQgaXMgbm90IGF0dGFjaGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9kaWFsb2cuY3VycmVudCA9PT0gZXYudGFyZ2V0KSB7XG4gICAgICAvLyBpbml0aWFsIGZvY3VzIHdoZW4gdGhlIE9mZmNhbnZhcyBpcyBvcGVuZWRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMub2ZmY2FudmFzSW5kZXggPCBPZmZjYW52YXMub3BlbkNvdW50IC0gMSkge1xuICAgICAgLy8gbGFzdCBvcGVuZWQgb2ZmY2FudmFzXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5nZXRGb2N1c2FibGVDaGlsZHJlbigpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIC8vIGZvY3VzIGlzIGFscmVhZHkgaW5zaWRlIHRoZSBPZmZjYW52YXNcbiAgICAgIGlmIChjaGlsZHJlbltpXSA9PT0gZXYudGFyZ2V0KSByZXR1cm47XG4gICAgfVxuICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBvdGhlcndpc2UgZm9jdXMgdGhlIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50IGluIHRoZSBPZmZjYW52YXNcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGNoaWxkcmVuWzBdLmZvY3VzKCk7XG4gICAgfVxuICB9XG4gIGluaXQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuX3RyaWdnZXJpbmdFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuX3RyaWdnZXJpbmdFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9lbGVtZW50KSB7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS56SW5kZXggPSB0aGlzLnByb3BzLnpJbmRleDtcbiAgICAgIHRoaXMuX21vdW50Q29udGFpbmVyID0gKDAsIF91dGlscy5nZXRUYXJnZXQpKHRoaXMucHJvcHMuY29udGFpbmVyKTtcbiAgICAgIHRoaXMuX21vdW50Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2VsZW1lbnQpO1xuICAgIH1cbiAgICB0aGlzLl9vcmlnaW5hbEJvZHlQYWRkaW5nID0gKDAsIF91dGlscy5nZXRPcmlnaW5hbEJvZHlQYWRkaW5nKSgpO1xuICAgICgwLCBfdXRpbHMuY29uZGl0aW9uYWxseVVwZGF0ZVNjcm9sbGJhcikoKTtcbiAgICBpZiAoT2ZmY2FudmFzLm9wZW5Db3VudCA9PT0gMCAmJiB0aGlzLnByb3BzLmJhY2tkcm9wICYmICF0aGlzLnByb3BzLnNjcm9sbGFibGUpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICB9XG4gICAgdGhpcy5vZmZjYW52YXNJbmRleCA9IE9mZmNhbnZhcy5vcGVuQ291bnQ7XG4gICAgT2ZmY2FudmFzLm9wZW5Db3VudCArPSAxO1xuICB9XG4gIGRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuX2VsZW1lbnQpIHtcbiAgICAgIHRoaXMuX21vdW50Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX2VsZW1lbnQpO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMubWFuYWdlRm9jdXNBZnRlckNsb3NlKCk7XG4gIH1cbiAgbWFuYWdlRm9jdXNBZnRlckNsb3NlKCkge1xuICAgIGlmICh0aGlzLl90cmlnZ2VyaW5nRWxlbWVudCkge1xuICAgICAgY29uc3Qge1xuICAgICAgICByZXR1cm5Gb2N1c0FmdGVyQ2xvc2VcbiAgICAgIH0gPSB0aGlzLnByb3BzO1xuICAgICAgaWYgKHRoaXMuX3RyaWdnZXJpbmdFbGVtZW50LmZvY3VzICYmIHJldHVybkZvY3VzQWZ0ZXJDbG9zZSkgdGhpcy5fdHJpZ2dlcmluZ0VsZW1lbnQuZm9jdXMoKTtcbiAgICAgIHRoaXMuX3RyaWdnZXJpbmdFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5tYW5hZ2VGb2N1c0FmdGVyQ2xvc2UoKTtcbiAgICBPZmZjYW52YXMub3BlbkNvdW50ID0gTWF0aC5tYXgoMCwgT2ZmY2FudmFzLm9wZW5Db3VudCAtIDEpO1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBudWxsO1xuICAgICgwLCBfdXRpbHMuc2V0U2Nyb2xsYmFyV2lkdGgpKHRoaXMuX29yaWdpbmFsQm9keVBhZGRpbmcpO1xuICB9XG4gIGNsZWFyQmFja2Ryb3BBbmltYXRpb25UaW1lb3V0KCkge1xuICAgIGlmICh0aGlzLl9iYWNrZHJvcEFuaW1hdGlvblRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9iYWNrZHJvcEFuaW1hdGlvblRpbWVvdXQpO1xuICAgICAgdGhpcy5fYmFja2Ryb3BBbmltYXRpb25UaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgZGlyZWN0aW9uLFxuICAgICAgdW5tb3VudE9uQ2xvc2VcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAoISF0aGlzLl9lbGVtZW50ICYmICh0aGlzLnN0YXRlLmlzT3BlbiB8fCAhdW5tb3VudE9uQ2xvc2UpKSB7XG4gICAgICBjb25zdCBpc09mZmNhbnZhc0hpZGRlbiA9ICEhdGhpcy5fZWxlbWVudCAmJiAhdGhpcy5zdGF0ZS5pc09wZW4gJiYgIXVubW91bnRPbkNsb3NlO1xuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gaXNPZmZjYW52YXNIaWRkZW4gPyAnbm9uZScgOiAnYmxvY2snO1xuICAgICAgY29uc3Qge1xuICAgICAgICBjbGFzc05hbWUsXG4gICAgICAgIGJhY2tkcm9wQ2xhc3NOYW1lLFxuICAgICAgICBjc3NNb2R1bGUsXG4gICAgICAgIGlzT3BlbixcbiAgICAgICAgYmFja2Ryb3AsXG4gICAgICAgIHJvbGUsXG4gICAgICAgIGxhYmVsbGVkQnksXG4gICAgICAgIHN0eWxlXG4gICAgICB9ID0gdGhpcy5wcm9wcztcbiAgICAgIGNvbnN0IG9mZmNhbnZhc0F0dHJpYnV0ZXMgPSB7XG4gICAgICAgIG9uS2V5VXA6IHRoaXMuaGFuZGxlRXNjYXBlLFxuICAgICAgICBvbktleURvd246IHRoaXMuaGFuZGxlVGFiLFxuICAgICAgICAnYXJpYS1sYWJlbGxlZGJ5JzogbGFiZWxsZWRCeSxcbiAgICAgICAgcm9sZSxcbiAgICAgICAgdGFiSW5kZXg6ICctMSdcbiAgICAgIH07XG4gICAgICBjb25zdCBoYXNUcmFuc2l0aW9uID0gdGhpcy5wcm9wcy5mYWRlO1xuICAgICAgY29uc3Qgb2ZmY2FudmFzVHJhbnNpdGlvbiA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBfRmFkZS5kZWZhdWx0LmRlZmF1bHRQcm9wcyksIHRoaXMucHJvcHMub2ZmY2FudmFzVHJhbnNpdGlvbiksIHt9LCB7XG4gICAgICAgIGJhc2VDbGFzczogaGFzVHJhbnNpdGlvbiA/IHRoaXMucHJvcHMub2ZmY2FudmFzVHJhbnNpdGlvbi5iYXNlQ2xhc3MgOiAnJyxcbiAgICAgICAgdGltZW91dDogaGFzVHJhbnNpdGlvbiA/IHRoaXMucHJvcHMub2ZmY2FudmFzVHJhbnNpdGlvbi50aW1lb3V0IDogMFxuICAgICAgfSk7XG4gICAgICBjb25zdCBiYWNrZHJvcFRyYW5zaXRpb24gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgX0ZhZGUuZGVmYXVsdC5kZWZhdWx0UHJvcHMpLCB0aGlzLnByb3BzLmJhY2tkcm9wVHJhbnNpdGlvbiksIHt9LCB7XG4gICAgICAgIGJhc2VDbGFzczogaGFzVHJhbnNpdGlvbiA/IHRoaXMucHJvcHMuYmFja2Ryb3BUcmFuc2l0aW9uLmJhc2VDbGFzcyA6ICcnLFxuICAgICAgICB0aW1lb3V0OiBoYXNUcmFuc2l0aW9uID8gdGhpcy5wcm9wcy5iYWNrZHJvcFRyYW5zaXRpb24udGltZW91dCA6IDBcbiAgICAgIH0pO1xuICAgICAgY29uc3QgQmFja2Ryb3AgPSBiYWNrZHJvcCAmJiAoaGFzVHJhbnNpdGlvbiA/IC8qI19fUFVSRV9fKi9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GYWRlLmRlZmF1bHQsIF9leHRlbmRzKHt9LCBiYWNrZHJvcFRyYW5zaXRpb24sIHtcbiAgICAgICAgaW46IGlzT3BlbiAmJiAhIWJhY2tkcm9wLFxuICAgICAgICBpbm5lclJlZjogdGhpcy5fYmFja2Ryb3AsXG4gICAgICAgIGNzc01vZHVsZTogY3NzTW9kdWxlLFxuICAgICAgICBjbGFzc05hbWU6ICgwLCBfdXRpbHMubWFwVG9Dc3NNb2R1bGVzKSgoMCwgX2NsYXNzbmFtZXMuZGVmYXVsdCkoJ29mZmNhbnZhcy1iYWNrZHJvcCcsIGJhY2tkcm9wQ2xhc3NOYW1lKSwgY3NzTW9kdWxlKSxcbiAgICAgICAgb25DbGljazogdGhpcy5oYW5kbGVCYWNrZHJvcENsaWNrLFxuICAgICAgICBvbk1vdXNlRG93bjogdGhpcy5oYW5kbGVCYWNrZHJvcE1vdXNlRG93blxuICAgICAgfSkpIDogLyojX19QVVJFX18qL19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge1xuICAgICAgICBjbGFzc05hbWU6ICgwLCBfdXRpbHMubWFwVG9Dc3NNb2R1bGVzKSgoMCwgX2NsYXNzbmFtZXMuZGVmYXVsdCkoJ29mZmNhbnZhcy1iYWNrZHJvcCcsICdzaG93JywgYmFja2Ryb3BDbGFzc05hbWUpLCBjc3NNb2R1bGUpLFxuICAgICAgICByZWY6IHRoaXMuX2JhY2tkcm9wLFxuICAgICAgICBvbkNsaWNrOiB0aGlzLmhhbmRsZUJhY2tkcm9wQ2xpY2ssXG4gICAgICAgIG9uTW91c2VEb3duOiB0aGlzLmhhbmRsZUJhY2tkcm9wTW91c2VEb3duXG4gICAgICB9KSk7XG4gICAgICBjb25zdCBhdHRyaWJ1dGVzID0gKDAsIF91dGlscy5vbWl0KSh0aGlzLnByb3BzLCBwcm9wc1RvT21pdCk7XG4gICAgICByZXR1cm4gLyojX19QVVJFX18qL19yZWFjdC5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoX1BvcnRhbC5kZWZhdWx0LCB7XG4gICAgICAgIG5vZGU6IHRoaXMuX2VsZW1lbnRcbiAgICAgIH0sIC8qI19fUFVSRV9fKi9fcmVhY3QuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9GYWRlLmRlZmF1bHQsIF9leHRlbmRzKHt9LCBhdHRyaWJ1dGVzLCBvZmZjYW52YXNBdHRyaWJ1dGVzLCBvZmZjYW52YXNUcmFuc2l0aW9uLCB7XG4gICAgICAgIGluOiBpc09wZW4sXG4gICAgICAgIG9uRW50ZXJlZDogdGhpcy5vbk9wZW5lZCxcbiAgICAgICAgb25FeGl0ZWQ6IHRoaXMub25DbG9zZWQsXG4gICAgICAgIGNzc01vZHVsZTogY3NzTW9kdWxlLFxuICAgICAgICBjbGFzc05hbWU6ICgwLCBfdXRpbHMubWFwVG9Dc3NNb2R1bGVzKSgoMCwgX2NsYXNzbmFtZXMuZGVmYXVsdCkoJ29mZmNhbnZhcycsIGNsYXNzTmFtZSwgYG9mZmNhbnZhcy0ke2RpcmVjdGlvbn1gKSwgY3NzTW9kdWxlKSxcbiAgICAgICAgaW5uZXJSZWY6IHRoaXMuX2RpYWxvZyxcbiAgICAgICAgc3R5bGU6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3R5bGUpLCB7fSwge1xuICAgICAgICAgIHZpc2liaWxpdHk6IGlzT3BlbiA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nXG4gICAgICAgIH0pXG4gICAgICB9KSwgdGhpcy5wcm9wcy5jaGlsZHJlbiksIEJhY2tkcm9wKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbk9mZmNhbnZhcy5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5PZmZjYW52YXMuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuT2ZmY2FudmFzLm9wZW5Db3VudCA9IDA7XG52YXIgX2RlZmF1bHQgPSBPZmZjYW52YXM7XG5leHBvcnRzLmRlZmF1bHQg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