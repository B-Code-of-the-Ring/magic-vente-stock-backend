{"version":3,"names":["pico","require","tokenizer","Input","registerInput","dependant","HIGHLIGHT_THEME","yellow","cyan","gray","magenta","green","getTokenType","type","value","processor","endOfFile","next","nextToken","back","terminalHighlight","css","ignoreErrors","result","token","color","split","map","i","join","module","exports"],"sources":["terminal-highlight.js"],"sourcesContent":["'use strict'\n\nlet pico = require('picocolors')\n\nlet tokenizer = require('./tokenize')\n\nlet Input\n\nfunction registerInput(dependant) {\n  Input = dependant\n}\n\nconst HIGHLIGHT_THEME = {\n  ';': pico.yellow,\n  ':': pico.yellow,\n  '(': pico.cyan,\n  ')': pico.cyan,\n  '[': pico.yellow,\n  ']': pico.yellow,\n  '{': pico.yellow,\n  '}': pico.yellow,\n  'at-word': pico.cyan,\n  'brackets': pico.cyan,\n  'call': pico.cyan,\n  'class': pico.yellow,\n  'comment': pico.gray,\n  'hash': pico.magenta,\n  'string': pico.green\n}\n\nfunction getTokenType([type, value], processor) {\n  if (type === 'word') {\n    if (value[0] === '.') {\n      return 'class'\n    }\n    if (value[0] === '#') {\n      return 'hash'\n    }\n  }\n\n  if (!processor.endOfFile()) {\n    let next = processor.nextToken()\n    processor.back(next)\n    if (next[0] === 'brackets' || next[0] === '(') return 'call'\n  }\n\n  return type\n}\n\nfunction terminalHighlight(css) {\n  let processor = tokenizer(new Input(css), { ignoreErrors: true })\n  let result = ''\n  while (!processor.endOfFile()) {\n    let token = processor.nextToken()\n    let color = HIGHLIGHT_THEME[getTokenType(token, processor)]\n    if (color) {\n      result += token[1]\n        .split(/\\r?\\n/)\n        .map(i => color(i))\n        .join('\\n')\n    } else {\n      result += token[1]\n    }\n  }\n  return result\n}\n\nterminalHighlight.registerInput = registerInput\n\nmodule.exports = terminalHighlight\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,IAAI,GAAGC,OAAO,CAAC,YAAY,CAAC;AAEhC,IAAIC,SAAS,GAAGD,OAAO,CAAC,YAAY,CAAC;AAErC,IAAIE,KAAK;AAET,SAASC,aAAaA,CAACC,SAAS,EAAE;EAChCF,KAAK,GAAGE,SAAS;AACnB;AAEA,MAAMC,eAAe,GAAG;EACtB,GAAG,EAAEN,IAAI,CAACO,MAAM;EAChB,GAAG,EAAEP,IAAI,CAACO,MAAM;EAChB,GAAG,EAAEP,IAAI,CAACQ,IAAI;EACd,GAAG,EAAER,IAAI,CAACQ,IAAI;EACd,GAAG,EAAER,IAAI,CAACO,MAAM;EAChB,GAAG,EAAEP,IAAI,CAACO,MAAM;EAChB,GAAG,EAAEP,IAAI,CAACO,MAAM;EAChB,GAAG,EAAEP,IAAI,CAACO,MAAM;EAChB,SAAS,EAAEP,IAAI,CAACQ,IAAI;EACpB,UAAU,EAAER,IAAI,CAACQ,IAAI;EACrB,MAAM,EAAER,IAAI,CAACQ,IAAI;EACjB,OAAO,EAAER,IAAI,CAACO,MAAM;EACpB,SAAS,EAAEP,IAAI,CAACS,IAAI;EACpB,MAAM,EAAET,IAAI,CAACU,OAAO;EACpB,QAAQ,EAAEV,IAAI,CAACW;AACjB,CAAC;AAED,SAASC,YAAYA,CAAC,CAACC,IAAI,EAAEC,KAAK,CAAC,EAAEC,SAAS,EAAE;EAC9C,IAAIF,IAAI,KAAK,MAAM,EAAE;IACnB,IAAIC,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;MACpB,OAAO,OAAO;IAChB;IACA,IAAIA,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;MACpB,OAAO,MAAM;IACf;EACF;EAEA,IAAI,CAACC,SAAS,CAACC,SAAS,CAAC,CAAC,EAAE;IAC1B,IAAIC,IAAI,GAAGF,SAAS,CAACG,SAAS,CAAC,CAAC;IAChCH,SAAS,CAACI,IAAI,CAACF,IAAI,CAAC;IACpB,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,UAAU,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE,OAAO,MAAM;EAC9D;EAEA,OAAOJ,IAAI;AACb;AAEA,SAASO,iBAAiBA,CAACC,GAAG,EAAE;EAC9B,IAAIN,SAAS,GAAGb,SAAS,CAAC,IAAIC,KAAK,CAACkB,GAAG,CAAC,EAAE;IAAEC,YAAY,EAAE;EAAK,CAAC,CAAC;EACjE,IAAIC,MAAM,GAAG,EAAE;EACf,OAAO,CAACR,SAAS,CAACC,SAAS,CAAC,CAAC,EAAE;IAC7B,IAAIQ,KAAK,GAAGT,SAAS,CAACG,SAAS,CAAC,CAAC;IACjC,IAAIO,KAAK,GAAGnB,eAAe,CAACM,YAAY,CAACY,KAAK,EAAET,SAAS,CAAC,CAAC;IAC3D,IAAIU,KAAK,EAAE;MACTF,MAAM,IAAIC,KAAK,CAAC,CAAC,CAAC,CACfE,KAAK,CAAC,OAAO,CAAC,CACdC,GAAG,CAACC,CAAC,IAAIH,KAAK,CAACG,CAAC,CAAC,CAAC,CAClBC,IAAI,CAAC,IAAI,CAAC;IACf,CAAC,MAAM;MACLN,MAAM,IAAIC,KAAK,CAAC,CAAC,CAAC;IACpB;EACF;EACA,OAAOD,MAAM;AACf;AAEAH,iBAAiB,CAAChB,aAAa,GAAGA,aAAa;AAE/C0B,MAAM,CAACC,OAAO,GAAGX,iBAAiB","ignoreList":[]}