{"version":3,"names":["cov_1qsukuk4yb","actualCoverage","s","axios_1","tslib_1","__importDefault","require","toolkit_1","reducer_utils_1","initialState","loading","errorMessage","successMessage","updateSuccess","updateFailure","apiUrl","exports","savePassword","createAsyncThunk","password","f","__awaiter","default","post","serializeError","serializeAxiosError","PasswordSlice","createSlice","name","reducers","reset","extraReducers","builder","addCase","pending","state","rejected","fulfilled","actions","reducer"],"sources":["/Users/pcco056/Documents/Cours ITU/ribouchon/magicventestock/src/main/webapp/app/modules/account/password/password.reducer.ts"],"sourcesContent":["import axios from 'axios';\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nimport { serializeAxiosError } from 'app/shared/reducers/reducer.utils';\n\nconst initialState = {\n  loading: false,\n  errorMessage: null,\n  successMessage: null,\n  updateSuccess: false,\n  updateFailure: false,\n};\n\nexport type PasswordState = Readonly<typeof initialState>;\n\nconst apiUrl = 'api/account';\n\ninterface IPassword {\n  currentPassword: string;\n  newPassword: string;\n}\n\n// Actions\n\nexport const savePassword = createAsyncThunk(\n  'password/update_password',\n  async (password: IPassword) => axios.post(`${apiUrl}/change-password`, password),\n  { serializeError: serializeAxiosError },\n);\n\nexport const PasswordSlice = createSlice({\n  name: 'password',\n  initialState: initialState as PasswordState,\n  reducers: {\n    reset() {\n      return initialState;\n    },\n  },\n  extraReducers(builder) {\n    builder\n      .addCase(savePassword.pending, state => {\n        state.errorMessage = null;\n        state.updateSuccess = false;\n        state.loading = true;\n      })\n      .addCase(savePassword.rejected, state => {\n        state.loading = false;\n        state.updateSuccess = false;\n        state.updateFailure = true;\n        state.errorMessage = 'An error has occurred! The password could not be changed.';\n      })\n      .addCase(savePassword.fulfilled, state => {\n        state.loading = false;\n        state.updateSuccess = true;\n        state.updateFailure = false;\n        state.successMessage = 'Password changed!';\n      });\n  },\n});\n\nexport const { reset } = PasswordSlice.actions;\n\n// Reducer\nexport default PasswordSlice.reducer;\n"],"mappings":"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","ignoreList":[]}